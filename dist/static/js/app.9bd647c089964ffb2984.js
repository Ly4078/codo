webpackJsonp([1],{"+Lof":function(e,t){},"+cgv":function(e,t){},0:function(e,t){},"0R78":function(e,t){},1:function(e,t){},2:function(e,t){},"25XN":function(e,t){},"2YW8":function(e,t){},"2ZRu":function(e,t){},"3f40":function(e,t){},"4qOc":function(e,t){},"5EGF":function(e,t){},"6A8z":function(e,t){},"6GiJ":function(e,t){},"6XTv":function(e,t){},"6cmn":function(e,t){},"991W":function(e,t){},"9bx5":function(e,t,a){e.exports=a.p+"static/img/welcome.85567a9.jpg"},"9e5F":function(e,t){},A2YN:function(e,t){},AK5F:function(e,t){},Aa9d:function(e,t){},BbT8:function(e,t,a){e.exports=a.p+"static/img/jianshezhong.2e6f103.jpg"},BjDr:function(e,t){},BjQB:function(e,t,a){"use strict";var l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"welcome"},[t("img",{attrs:{src:a("9bx5"),alt:""}})])}]};t.a=l},DtRI:function(e,t){},Fo3S:function(e,t){},GuXo:function(e,t){},HbKL:function(e,t){},IRxy:function(e,t){},JiAK:function(e,t){},K30a:function(e,t,a){e.exports=a.p+"static/img/timgs.147bdd5.png"},MTXi:function(e,t){},MbV9:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),r=a("woOf"),i=a.n(r),s={name:"App",data:function(){return{clientHeight:document.documentElement.clientHeight+"px",mainHeight:.86*document.documentElement.clientHeight+"px",tableHeight:.925*document.documentElement.clientHeight-140+"px",tableHeight3:.925*document.documentElement.clientHeight-140+"px",tableHeight2:.84*document.documentElement.clientHeight+"px"}},mounted:function(){this.init(),this.clientHeight=document.documentElement.clientHeight+"px";var e=this;window.onresize=function(){e.clientHeight=document.documentElement.clientHeight+"px",e.mainHeight=.86*document.documentElement.clientHeight+"px",e.tableHeight=.925*document.documentElement.clientHeight-140+"px",e.tableHeight3=.925*document.documentElement.clientHeight-140+"px",e.tableHeight2=.84*document.documentElement.clientHeight+"px"}},watch:{clientHeight:function(){this.$store.commit("setClientHeight",this.clientHeight)},mainHeight:function(){this.$store.commit("setMainHeight",this.mainHeight)},tableHeight:function(){this.$store.commit("setTableHeight",this.tableHeight)},tableHeight2:function(){this.$store.commit("setTableHeight2",this.tableHeight2)},tableHeight3:function(){this.$store.commit("setTableHeight3",this.tableHeight3)},"this.$store.state.token":{handler:function(){this.init()}}},methods:{init:function(){this.$store.state.token||this.$router.push({name:""}),this.$store.commit("setClientHeight",this.clientHeight),this.$store.commit("setMainHeight",this.mainHeight),this.$store.commit("setTableHeight",this.tableHeight),this.$store.commit("setTableHeight2",this.tableHeight2)}},created:function(){sessionStorage.getItem("userInfo")&&this.$store.commit("setUserInfo",JSON.parse(sessionStorage.getItem("userInfo"))),sessionStorage.getItem("store")&&this.$store.replaceState(i()({},this.$store.state,JSON.parse(sessionStorage.getItem("store"))))}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")(s,o,!1,function(e){a("uYJz")},null,null).exports,u=a("/ocq"),c=a("mtWM"),m=a.n(c),d={name:"Login",data:function(){return{ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{handtoken:function(){this.$store.commit("setToken",this.msg)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.login()})},login:function(){var e=this,t={username:this.ruleForm.username,password:this.ruleForm.password};this.$http.post("login",t).then(function(t){200==t.status?(e.$store.commit("setUserInfo",t.data),e.$router.push({path:"/Home",params:{}})):e.$message({message:t.response.data,duration:5e3,showClose:!0,type:"error"})})},fullScreen:function(){void 0!==document.fullScreenElement&&null===document.fullScreenElement||void 0!==document.msFullscreenElement&&null===document.msFullscreenElement||void 0!==document.mozFullScreen&&!document.mozFullScreen||void 0!==document.webkitIsFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen?document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}}},p={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"login"},[l("img",{staticClass:"logo_icon",attrs:{src:a("iQH9"),alt:"logo"}}),e._v(" "),l("img",{staticClass:"loginbj",attrs:{src:a("vF8b"),alt:""}}),e._v(" "),e._m(0),e._v(" "),l("div",{staticClass:"login_box"},[l("div",{staticClass:"box-title"},[e._v("用户登录")]),e._v(" "),l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0"}},[l("el-form-item",{attrs:{label:"",prop:"username"}},[l("el-input",{attrs:{maxlength:"11",autofocus:!0,placeholder:"用户名",clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",e._n(t))},expression:"ruleForm.username"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"",prop:"password"}},[l("el-input",{attrs:{maxlength:"32",placeholder:"登录密码","show-password":"",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"legend"},[t("p",[this._v("游龙戏凤-运营管理平台")]),this._v(" "),t("p",[this._v("从操作性考虑，提供更加方便的操作页面")]),this._v(" "),t("p",[this._v("从效率性考虑，支持更快的业务处理")]),this._v(" "),t("p",[this._v("从安全性考虑，让每一次操作更安全放心")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"loginbut"},[t("a",{attrs:{href:"#"}},[this._v("关于我们")]),this._v(" "),t("a",{attrs:{href:"#"}},[this._v("法律声明及隐私政策")]),this._v(" "),t("a",{attrs:{href:"#"}},[this._v("友情链接")]),this._v(" "),t("a",{attrs:{href:"#"}},[this._v("© 2019-2017 后台管理系统 版权所有 ICP证：沪B2-20080101")])])}]};var h=a("VU/8")(d,p,!1,function(e){a("BjDr")},null,null).exports,g={name:"home",data:function(){var e=this;return{menu:"../../assets/images/menu.png",menulist:[],ispwd1:!0,ispwd2:!0,visible:!0,ruleForm:{pass1:"",pass2:""},rules:{pass1:[{required:!0,trigger:["blur","change"],validator:function(t,a,l){var r=/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_]+$)(?![a-z0-9]+$)(?![a-z\W_]+$)(?![0-9\W_]+$)[a-zA-Z0-9\W_]{8,30}$/,i="密码为数字，小写字母，大写字母，特殊符号 至少包含三种，长度为 8 - 30位";e.ruleForm.pass2?a?a!==e.ruleForm.pass1?l(new Error("两次输入的密码不一致")):r.test(a)?l():l(new Error(i)):l(new Error("请确认你的密码")):a?r.test(a)?l():l(new Error(i)):l(new Error("密码不能为空"))}}],pass2:[{required:!0,trigger:["blur","change"],validator:function(t,a,l){e.ruleForm.pass1?a?a!==e.ruleForm.pass1?l(new Error("两次输入的密码不一致")):l():l(new Error("请确认你的密码")):a?l():l(new Error("密码不能为空"))}}]},centerDialogVisible:!1}},watch:{centerDialogVisible:function(){this.centerDialogVisible||(this.ruleForm.pass1="",this.ruleForm.pass2="")}},methods:{getmenulist:function(){var e=this;this.$http.get("menu").then(function(t){for(var a in t.data.sort(function(e,t){return e.sort<t.sort?-1:e.sort>t.sort?1:0}),t.data)t.data[a].imgurl="http://dev.byn-kj.com/image/"+t.data[a].skey+".png",t.data[a].child.sort(function(e,t){return e.sort<t.sort?-1:e.sort>t.sort?1:0});e.menulist=t.data,console.log("menulist:",e.menulist)})},handitems:function(e){this.$router.push("/"+e.url)},handleOpen:function(e,t){},handleClose:function(e,t){},handlepass:function(){this.centerDialogVisible=!this.centerDialogVisible},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.savepwd()})},showpwd:function(e){1==e?this.ispwd1=!this.ispwd1:2==e&&(this.ispwd2=!this.ispwd2)},savepwd:function(){var e=this;this.$http.put("password/"+this.ruleForm.pass2).then(function(t){200==t.status&&e.handleCommand()})},resetForm:function(e){this.$refs[e].resetFields(),this.centerDialogVisible=!this.centerDialogVisible},handleCommand:function(){var e=this;this.$http.get("logout").then(function(t){200==t.status&&(e.$store.commit("setUserInfo",{}),e.$store.commit("setshopInfo",{}),e.$store.commit("setToken",""),localStorage.clear(),e.$router.push({name:"Login"}))})}},created:function(){this.getmenulist()}},f={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"home"},[l("el-container",{attrs:{justify:"center"}},[l("el-header",[l("div",{staticClass:"title"},[l("img",{attrs:{src:a("K30a"),alt:"管理员头像"}}),e._v("\n        管理控制台\n      ")]),e._v(" "),l("div",{staticClass:"info"},[l("span",{staticClass:"el-dropdown-link"},[e._v(e._s(this.$store.state.userInfo.trueName))]),e._v(" "),l("span",{staticClass:"command editps",on:{click:e.handlepass}},[e._v("修改密码")]),e._v(" "),l("span",{staticClass:"command",on:{click:e.handleCommand}},[e._v("退出登录")])])]),e._v(" "),l("el-container",[l("el-aside",{attrs:{width:"220px"}},[l("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#2f323e","active-text-color":"#007eff","text-color":"#fff","unique-opened":!0},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.menulist,function(t){return l("el-submenu",{key:t.id,attrs:{index:t.id}},[l("template",{slot:"title"},[l("img",{staticClass:"menuicon",attrs:{src:t.imgurl,alt:""}}),e._v(" "),l("span",[e._v(e._s(t.name))])]),e._v(" "),t.child?l("el-menu-item-group",e._l(t.child,function(t){return l("el-menu-item",{key:t.id,attrs:{index:t.id},on:{click:function(a){return e.handitems(t)}}},[e._v(e._s(t.name))])}),1):e._e()],2)}),1)],1),e._v(" "),l("el-container",[l("el-main",[l("router-view",{style:{height:this.$store.state.mainHeight}}),e._v(" "),l("p",[e._v("©版权所有-比翼鸟系统")])],1)],1)],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"修改密码",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"34%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[l("el-form-item",{attrs:{label:"请输入新密码",prop:"pass1"}},[l("el-input",{attrs:{type:e.ispwd1?"password":"text",placeholder:"请输入新密码"},model:{value:e.ruleForm.pass1,callback:function(t){e.$set(e.ruleForm,"pass1",t)},expression:"ruleForm.pass1"}},[l("i",{staticClass:"el-input__icon el-icon-view el-input__clear",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function(t){return e.showpwd(1)}},slot:"suffix"})])],1),e._v(" "),l("el-form-item",{attrs:{label:"请再次输入新密码",prop:"pass2"}},[l("el-input",{attrs:{type:e.ispwd2?"password":"text",placeholder:"请再次输入新密码"},model:{value:e.ruleForm.pass2,callback:function(t){e.$set(e.ruleForm,"pass2",t)},expression:"ruleForm.pass2"}},[l("i",{staticClass:"el-input__icon el-icon-view el-input__clear",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function(t){return e.showpwd(2)}},slot:"suffix"})])],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")]),e._v(" "),l("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,f,!1,function(e){a("DtRI")},null,null).exports,v=a("hpgx"),y={name:"perlist",data:function(){return{total:0,disval:1,pageNum:1,pageSize:10,roleName:"",loading:!1,DialogVisible:!1,centerDialogVisible:!1,checkList:[],rolemenulist:[],permissionlist:[],ruleobj:{},actuserobj:{},ruleForm:{id:"",name:"",code:"",remark:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],code:[{required:!0,message:"请输入角色code",trigger:"blur"}],remark:[{required:!0,message:"请输入角色说明",trigger:"blur"}]}}},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible){for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}}},methods:{getrole:function(e){var t=this;1==e&&(this.pageNum=1);var a="role?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.roleName&&(a+="&name="+this.roleName),this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,t.roleName="",t.total=e.data.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.permissionlist=[]):t.permissionlist=e.data.data})},handleCurrentChange:function(e){this.pageNum=e,this.getrole()},handleSizeChange:function(e){this.pageSize=e,this.getrole()},openDialog:function(e){this.disval=e,this.centerDialogVisible=!0},handleedit:function(e){this.actuserobj=e,this.getidinfo(e.id),this.openDialog(2)},confirmEdit:function(){this.checkList.length>0&&this.putrolemenu()},getidinfo:function(e){var t=this;this.$http.get("role/"+e).then(function(e){var a=e.data;for(var l in a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},handlemenu:function(e){this.checkList=[],this.DialogVisible=!0,this.ruleobj=e,this.getrolemenu(e)},getrolemenu:function(e){var t=this;this.$http.get("role/menu/"+e.id).then(function(e){var a=e.data;for(var l in a)for(var r in a[l].child)1==a[l].child[r].status&&t.checkList.push(a[l].child[r].id);t.rolemenulist=a})},putrolemenu:function(){var e=this,t={roleId:this.ruleobj.id,permission:this.checkList};this.$http.put("role/menu",t).then(function(t){200==t.status&&(e.$message.success("保存成功！"),e.DialogVisible=!1)})},handledel:function(e){var t=this;this.$confirm("是否确定删除此数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete("role/"+e.id).then(function(e){t.$message.success("删除操作成功！"),t.getrole()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):this.$refs[e].resetFields()},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("role",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getrole())}):2==this.disval&&this.$http.put("role",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getrole())})}},created:function(){this.getrole()}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入角色名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getrole(1)}},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getrole(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建角色")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.permissionlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",align:"center",label:"角色代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"角色说明"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){return e.handlemenu(t.row)}}},[e._v("菜单")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建角色",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色code",prop:"code"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色说明",prop:"remark"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑角色",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色code",prop:"code"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色说明",prop:"remark"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"分配菜单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"5vh",width:"70%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolemenulist,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"一级菜单",width:"100%"}}),e._v(" "),a("el-table-column",{attrs:{label:"二级菜单"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(t.row.child,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)]}}])})],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"40%","margin-top":"10px"},attrs:{type:"primary"},on:{click:e.confirmEdit}},[e._v("确认修改")])],1)],1)},staticRenderFns:[]};var F=a("VU/8")(y,_,!1,function(e){a("5EGF")},"data-v-243ab18a",null).exports,k=a("Gu7T"),w=a.n(k),x={name:"perlist",data:function(){return{total:0,ptotal:0,disval:1,pageNum:1,pageSize:10,PermissionName:"",loading:!1,centerDialogVisible:!1,actuserobj:{},ruleForm:{id:"",name:"",url:"",skey:"",sort:"",parentKey:""},rules:{name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],url:[{required:!0,message:"请输入权限地址(URL)",trigger:"blur"}],skey:[{required:!0,message:"请输入权限KEY",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]},permissionlist:[],paginationlist:[]}},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible){for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}}},methods:{getpermission:function(e){var t=this;1==e&&(this.pageNum=1);var a="permission?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.PermissionName&&(a+="&name="+this.PermissionName),this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.PermissionName="",t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.permissionlist=[];else{var a=[].concat(w()(e.data.data));a=a.sort(t.Until.compare("sort",1)),t.permissionlist=a}})},CurrentChange:function(e){var t=this;this.$http.get("permission/parent").then(function(e){t.paginationlist=e.data})},handleCurrentChange:function(e){this.pageNum=e,this.getpermission()},handleSizeChange:function(e){this.pageSize=e,this.getpermission()},openDialog:function(e){this.paginationlist.length<1&&this.CurrentChange(),this.disval=e,this.centerDialogVisible=!0},handleedit:function(e){this.actuserobj=e,this.getidinfo(e.id),this.openDialog(2)},getidinfo:function(e){var t=this;this.$http.get("permission/"+e).then(function(e){var a=e.data;for(var l in a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},handledel:function(e){var t=this;this.$confirm("是否确定删除此数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete("permission/"+e.id).then(function(e){t.$message.success("删除操作成功！"),t.getpermission()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):this.$refs[e].resetFields()},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("permission",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getpermission(),e.ruleForm.parentKey||e.CurrentChange())}):2==this.disval&&this.$http.put("permission",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getpermission(),e.ruleForm.parentKey||e.CurrentChange())})}},created:function(){this.getpermission()}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"perlist mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入权限名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getpermission(1)}},model:{value:e.PermissionName,callback:function(t){e.PermissionName=t},expression:"PermissionName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getpermission(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建权限")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.permissionlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"权限名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",align:"center",label:"权限地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"skey",align:"center",label:"权限KEY"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",align:"center",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.handledel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建权限",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父级资源",prop:"parentKey"}},[a("el-select",{attrs:{placeholder:"请选择父级资源"},model:{value:e.ruleForm.parentKey,callback:function(t){e.$set(e.ruleForm,"parentKey",t)},expression:"ruleForm.parentKey"}},e._l(e.paginationlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.skey}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限URL"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限KEY",prop:"skey"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.skey,callback:function(t){e.$set(e.ruleForm,"skey",t)},expression:"ruleForm.skey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑权限",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父级资源",prop:"parentKey"}},[a("el-select",{attrs:{placeholder:"请选择父级资源"},model:{value:e.ruleForm.parentKey,callback:function(t){e.$set(e.ruleForm,"parentKey",t)},expression:"ruleForm.parentKey"}},e._l(e.paginationlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.skey}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限URL"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限KEY",prop:"skey"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.skey,callback:function(t){e.$set(e.ruleForm,"skey",t)},expression:"ruleForm.skey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var N=a("VU/8")(x,$,!1,function(e){a("YDde")},"data-v-15afa622",null).exports,C=a("Dd8w"),D=a.n(C),I=function(e,t,a){var l=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return a(new Error("邮箱不能为空"));setTimeout(function(){l.test(t)?a():a(new Error("请输入正确的邮箱格式"))},100)},V=function(e,t,a){var l=/^1[3456789]\d{9}$/;if(!t)return a(new Error("账户手机号码不能为空"));setTimeout(function(){l.test(t)?a():a(new Error("账户手机号码错误"))},100)},z={name:"perlist",data:function(){return{total:0,ptotal:0,disval:1,pageNum:1,pageSize:10,term:{trueName:"",name:""},loading:!1,centerDialogVisible1:!1,centerDialogVisible2:!1,centerDialogVisible3:!1,actuserobj:{},citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}],ruleForm:{username:"",password:"123456",trueName:"",email:"",type:"",areaId:"",cityId:""},rules:{username:[{required:!0,validator:V,trigger:"blur"}],password:[{required:!0,message:"请输入账户密码",trigger:"blur"},{pattern:/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_]+$)(?![a-z0-9]+$)(?![a-z\W_]+$)(?![0-9\W_]+$)[a-zA-Z0-9\W_]{8,30}$/,message:"密码为数字，小写字母，大写字母，特殊符号 至少包含三种，长度为 8 - 30位"}],trueName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],email:[{required:!0,validator:I,trigger:"blur"}],type:[{required:!0,message:"请选择用户类型",trigger:"change"}],cityId:[{required:!0,message:"请选择用户所在城市",trigger:"change"}],areaId:[{required:!0,message:"请选择用户所在区域",trigger:"change"}]},rolelist:[],typelist:[{id:1,label:"系统管理用户"},{id:2,label:"酒店管理用户"},{id:3,label:"供应商用户"}],hotellist:[],areas:[],userlist:[]}},filters:{fitercityId:function(e){return 1==e?"武汉":2==e?"长沙":void 0}},watch:{centerDialogVisible1:function(){if(this.centerDialogVisible1)this.ruleForm.password="123456";else{for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}},centerDialogVisible2:function(){if(this.centerDialogVisible2);else{for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}}},methods:{getareas:function(){var e=this;if(!this.areas.length){this.$http.get("user/area").then(function(t){if(200==t.status){for(var a in t.data)t.data[a].label=t.data[a].name;e.areas=t.data}})}},gethotel:function(){var e=this;this.hotellist.length<1&&this.$http.get("user/hotel").then(function(t){e.hotellist=t.data})},getuserlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="user?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.userlist=[];else{var a=[].concat(w()(e.data.data));for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1,a[l].createTime="20"+a[l].createTime;t.userlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getuserlist()},handleSizeChange:function(e){this.pageSize=e,this.getuserlist()},openDialog:function(e){this.disval=e,this.getareas(),1==e?this.centerDialogVisible1=!0:2==e?this.centerDialogVisible2=!0:3==e&&(this.centerDialogVisible3=!0)},handleedit:function(e){this.getidinfo(e.id),this.openDialog(2),this.actuserobj=e},handledeploy:function(e){this.openDialog(3),this.actuserobj=e,this.getrole(e.id)},handlereset:function(e){var t=this;this.$confirm("重置密码后，之前旧密码将不能再使用，是否确认重置密码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.put("user/resetPassword/"+e.id).then(function(e){200==e.status&&t.$message.success("重置成功！")})}).catch(function(){t.$message({type:"info",message:"已取消密码重置"})})},getrole:function(e){var t=this,a="user/role/"+e;this.$http.get(a).then(function(e){if(200==e.status){var a=e.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1;t.rolelist=a}})},saverole:function(){var e=this,t=[];for(var a in this.rolelist)this.rolelist[a].status&&t.push(this.rolelist[a].id);if(t.length<1)this.$message.error("请至少选择一个选项");else{var l={userId:this.actuserobj.id,role:t};this.$http.put("user/role",l).then(function(t){e.$message.success("保存成功"),e.centerDialogVisible3=!e.centerDialogVisible3})}},getidinfo:function(e){var t=this;this.$http.get("user/"+e).then(function(e){var a=D()({},e.data);for(var l in a.remark=a.remark?a.remark:"",a.areaId=a.areaId?String(a.areaId):"",a)t.ruleForm[l]=a[l]})},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=0,this.$http.put("user/status",a).then(function(e){200==e.status&&t.$message.success("修改成功")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):this.$refs[e].resetFields()},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("user",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible1=!e.centerDialogVisible1,e.getuserlist())}):2==this.disval&&this.$http.put("user",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible2=!e.centerDialogVisible2,e.getuserlist())})}},created:function(){this.getuserlist()}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getuserlist(1)}},model:{value:e.term.name,callback:function(t){e.$set(e.term,"name",t)},expression:"term.name"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getuserlist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getuserlist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建帐户")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"username",align:"center",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"真实姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"所在城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitercityId")(t.row.cityId)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-service"},on:{click:function(a){return e.handledeploy(t.row)}}},[e._v("分配角色")]),e._v(" "),a("el-button",{attrs:{disabled:!t.row.status,type:"danger",size:"mini",icon:"el-icon-setting"},on:{click:function(a){return e.handlereset(t.row)}}},[e._v("重置密码")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible1?a("el-dialog",{attrs:{title:"创建帐户",visible:e.centerDialogVisible1,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible1=t}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.disval||2==e.disval,expression:"disval==1 || disval==2"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号手机",prop:"username"}},[a("el-input",{attrs:{disabled:2==e.disval,clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),1==e.disval?a("el-form-item",{attrs:{label:"账户密码"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:!0},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"trueName"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.trueName,callback:function(t){e.$set(e.ruleForm,"trueName",t)},expression:"ruleForm.trueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户城市",prop:"cityId"}},[a("el-select",{attrs:{placeholder:"请选择用户城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所在区域",prop:"areaId"}},[a("el-select",{attrs:{placeholder:"请选择所在区域"},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.areas,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible2?a("el-dialog",{attrs:{title:"编辑帐户",visible:e.centerDialogVisible2,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible2=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号手机",prop:"username"}},[a("el-input",{attrs:{disabled:2==e.disval,clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),1==e.disval?a("el-form-item",{attrs:{label:"账户密码"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:!0},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"trueName"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.trueName,callback:function(t){e.$set(e.ruleForm,"trueName",t)},expression:"ruleForm.trueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户城市",prop:"cityId"}},[a("el-select",{attrs:{placeholder:"请选择用户城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所在区域",prop:"areaId"}},[a("el-select",{attrs:{placeholder:"请选择所在区域"},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.areas,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"分配角色",visible:e.centerDialogVisible3,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible3=t}}},[a("ul",{staticClass:"diaul"},[e._l(e.rolelist,function(t){return a("li",{key:t.id},[a("el-checkbox",{attrs:{label:t.status},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v(e._s(t.name))])],1)}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saverole}},[e._v("保存")])],2)])],1)},staticRenderFns:[]};var T=a("VU/8")(z,S,!1,function(e){a("PjBU")},null,null).exports,q=a("mvHQ"),E=a.n(q),L=a("bOdI"),j=a.n(L),O={name:"perlist",data:function(){var e;return e={total:0,hoteltoal:0,disval:1,pageNum:1,pageSize:10,hotel_pageNum:1,hotel_pageSize:40,areaName:"",loading:!1,DialogVisible:!1,centerDialogVisible1:!1,centerDialogVisible2:!1,checkList:[],arealist:[],hotellist:[],oldhotellist:[],actuserobj:{},ruleobj:{},statuslist:[{id:1,label:"有效"},{id:2,label:"无效"}],citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}]},j()(e,"ruleobj",{}),j()(e,"ruleForm",{name:"",parentId:"",remark:"",seq:"",status:"",cityId:""}),j()(e,"rules",{cityId:[{required:!0,message:"请选择城市",trigger:"change,blur"}],name:[{required:!0,message:"请输入区域名称",trigger:"blur"}],seq:[{required:!0,message:"请输入角色code",trigger:"blur"}]}),e},filters:{filterstatus:function(e){return 1==e?"有效":"无效"},filtercityId:function(e){return 1==e?"武汉":2==e?"长沙":void 0}},watch:{centerDialogVisible1:function(){if(this.centerDialogVisible1);else{for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}},centerDialogVisible2:function(){if(this.centerDialogVisible2);else{for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}},DialogVisible:function(){this.DialogVisible||(this.hotel_pageNum=1)},checkList:function(){this.polling()}},methods:{getarea:function(e){var t=this;1==e&&(this.pageNum=1);var a="area?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.areaName&&(a+="&name="+this.areaName),this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.areaName="",t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.arealist=[];else{var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1;t.arealist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getarea()},handleSizeChange:function(e){this.pageSize=e,this.getarea()},hotelhandleCurrentChange:function(e){this.hotel_pageNum=e,this.confirmEdit(1)},hotelhandleSizeChange:function(e){this.hotel_pageSize=e,this.confirmEdit(1)},openDialog:function(e){this.disval=e,1==e?this.centerDialogVisible1=!0:2==e&&(this.centerDialogVisible2=!0)},handleedit:function(e){for(var t in e)e[t]&&(this.ruleForm[t]=e[t]);this.actuserobj=e,this.getidinfo(e.id),this.openDialog(2)},polling:function(){if(this.checkList.length)for(var e in this.oldhotellist)for(var t in this.checkList)this.checkList[t]===this.oldhotellist[e].id?this.oldhotellist[e].status=1:this.oldhotellist[e].status=0;else this.oldhotellist.map(function(e){e.status=0})},distribution:function(e){var t=this;this.ruleobj=e;var a="area/hotel?pageNum="+this.hotel_pageNum+"&pageSize="+this.hotel_pageSize,l={areaId:e.id,cityId:e.cityId};for(var r in l)l[r]&&(a+="&"+r+"="+l[r]);this.$http.get(a,l).then(function(e){if(200==e.status){t.DialogVisible=!0;var a=D()({},e.data);for(var l in a.data)1==a.data[l].status&&t.checkList.push(a.data[l].id);t.hotellist=a.data,t.oldhotellist=JSON.parse(E()(a.data)),t.oldhotellist.map(function(e){delete e.name,e.status=e.status?e.status:0}),t.hoteltoal=a.total}})},confirmEdit:function(e){var t=this,a={areaId:this.ruleobj.id,hotelList:this.oldhotellist};this.$http.put("area/updateHotel",a).then(function(a){200==a.status&&(t.checkList=[],t.oldhotellist=[],1==e?t.distribution(t.ruleobj):(t.$message.success("保存成功！"),t.DialogVisible=!1))})},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=0,this.$http.put("area/status",a).then(function(e){200==e.status&&t.$message.success("修改成功")})},getidinfo:function(e){var t=this;this.$http.get("area/"+e).then(function(e){var a=e.data;for(var l in a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.remark="")},savedata:function(){var e=this,t={};for(var a in this.ruleForm)""!==this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("area",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible1=!e.centerDialogVisible1,e.getarea())}):2==this.disval&&this.$http.put("area",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible2=!e.centerDialogVisible2,e.getarea())})}},created:function(){this.getarea()}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"area_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入区域名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getarea(1)}},model:{value:e.areaName,callback:function(t){e.areaName=t},expression:"areaName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getarea(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建区域")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.arealist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{align:"center",label:"城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filtercityId")(t.row.cityId)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"区域名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.distribution(t.row)}}},[e._v("分配酒店")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible1?a("el-dialog",{attrs:{title:"创建区域",visible:e.centerDialogVisible1,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible1=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"区域名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入区域名称",maxlength:"20",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"seq"}},[a("el-input",{attrs:{placeholder:"请输入排序序号",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.seq,callback:function(t){e.$set(e.ruleForm,"seq",t)},expression:"ruleForm.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"100",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible2?a("el-dialog",{attrs:{title:"编辑区域",visible:e.centerDialogVisible2,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible2=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"区域名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入区域名称",maxlength:"20",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"seq"}},[a("el-input",{attrs:{placeholder:"请输入排序序号",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.seq,callback:function(t){e.$set(e.ruleForm,"seq",t)},expression:"ruleForm.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"100",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"分配酒店",visible:e.DialogVisible,"modal-append-to-body":!1,width:"80%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.hotellist,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1),e._v(" "),e.DialogVisible?a("span",{staticClass:"pagein dialogpag"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[40],"page-size":40,total:e.hoteltoal},on:{"size-change":e.hotelhandleSizeChange,"current-change":e.hotelhandleCurrentChange}})],1):e._e(),e._v(" "),a("el-button",{staticStyle:{"margin-left":"40%","margin-top":"10px"},attrs:{type:"primary"},on:{click:e.confirmEdit}},[e._v("确认修改")])],1)],1)},staticRenderFns:[]};var A=a("VU/8")(O,H,!1,function(e){a("6cmn")},"data-v-6e1cc36e",null).exports,R=a("fZjL"),P=a.n(R),B=a("RRo+"),U=a.n(B),M=a("AMV0"),W=a.n(M),Y=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?t<0?a(new Error("请输入一个大于0的数字")):U()(t)?a():a(new Error("请输入一个正整数")):a(new Error("请输入一个数字"))},100)},Z=function(e,t,a){(t*=1)||a(new Error("请输入价格")),setTimeout(function(){W()(t)?t<0?a(new Error("价格应该大于0")):U()(t)?a():-1!=(t+=" ").indexOf(".")&&(t.split(".")[1].length>3?a(new Error("价格最多有两位小数")):a()):a(new Error("价格应该是一个大于数的数字"))},100)},X={name:"goods_list",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,isupload:!1,loading:!1,innerVisible:!1,centerDialogVisible:!1,DialogVisiblebanner:!1,term:{name:"",sku:"",typeId:"",status:""},types:[],tbimgUrl:!1,goodslist:[],statusss:[{id:2,label:"上线"},{id:3,label:"下线"}],statuslist:[{id:1,label:"有效"},{id:2,label:"作废"}],fileList:[],bannerlist:[],typelist:[{id:1,label:"单人间"},{id:2,label:"标准间"},{id:3,label:"大床间"},{id:4,label:"三人间"},{id:5,label:"套间"}],uploadForm:{file:null,goodsId:"",sort:""},uploadrules:{files:[{required:!0,message:"请选择商品图片",trigger:"blur"}],sort:[{required:!0,validator:Y,trigger:"blur"}]},ruleForm:{id:"",intro:"",name:"",originPrice:"",costPrice:"",typeId:"",remark:"",salePrice:"",status:"",thumb:"",saleAmount:"",file:null},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],intro:[{required:!0,message:"请输入商品简介",trigger:"blur"}],typeId:[{required:!0,message:"请输入商品简介",trigger:"blur"}],costPrice:[{required:!0,validator:Z,trigger:"blur"}],originPrice:[{required:!0,validator:Z,trigger:"blur"}],salePrice:[{required:!0,validator:Z,trigger:"blur"}],saleAmount:[{required:!0,validator:Y,trigger:"blur,change"}],remark:[{required:!0,message:"请输商品子标题",trigger:"blur"}],file:[{required:!0,message:"请选择商品图片",trigger:"blur"}]}}},filters:{fiterstatus:function(e){return 1==e?"有效":"无效"},fitertype:function(e){return 1==e?"单人间":2==e?"标准间":3==e?"大床间":4==e?"三人间":5==e?"套间":"其它"}},watch:{centerDialogVisible:function(){if(this.fileList=[],this.centerDialogVisible)this.gettypes();else if(this.ruleForm&&this.ruleForm.name){for(var e in this.ruleForm)this.ruleForm[e]="";this.ruleForm.file=null,this.actuserobj={}}},innerVisible:function(){if(this.fileList=[],!this.innerVisible){for(var e in this.uploadForm)this.uploadForm[e]="";this.uploadForm.files=null}}},methods:{getgoodslist:function(e){var t=this;1==e&&(this.pageNum=1);var a="goods?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.$http.get(a).then(function(e){var a=[].concat(w()(e.data.data));for(var l in a)2==a[l].status?a[l].status=!0:3==a[l].status&&(a[l].status=!1);t.goodslist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getgoodslist()},handleSizeChange:function(e){this.pageSize=e,this.getgoodslist()},changestatus:function(e){var t,a=this,l={};(l=JSON.parse(E()(e))).status=l.status?2:3,t={status:l.status,id:e.id},this.$http.put("goods/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getgoodslist())})},handletbimg:function(e){this.tbimgUrl=e},openDialog:function(e){this.disval=e,3==e?this.DialogVisiblebanner=!this.DialogVisiblebanner:this.centerDialogVisible=!this.centerDialogVisible,this.uploadData={}},handleedit:function(e){this.getidinfo(e.id),this.openDialog(2),this.actuserobj=e},handlebanner:function(e){this.openDialog(3),this.actuserobj=e,this.uploadForm.goodsId=e.id,this.getbannerlist(e.id)},getbannerlist:function(e){var t=this;this.$http.get("goods/banner?id="+e).then(function(e){e.data.sort(function(e,t){return e.sort<t.sort?-1:e.sort>t.sort?1:0}),t.bannerlist=e.data})},handlelbdel:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete("goods/banner/"+e.id).then(function(e){t.$message.success("修改成功"),t.getbannerlist(t.actuserobj.id)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getidinfo:function(e){var t=this;this.$http.get("goods/"+e).then(function(e){var a=e.data,l=a.thumb.split("/"),r={name:l[l.length-1],url:t.$GLOBAL.API+a.thumb};for(var i in 3!=t.disval&&(t.fileList=[],t.fileList.push(r)),a.intro=a.intro?a.intro:"",a.remark=a.remark?a.remark:"",a)t.ruleForm[i]=a[i]})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;3!=t.disval?t.savedata():t.savebanner()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.intro="")},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);var l=new FormData;P()(t).forEach(function(e){return l.append(e,t[e])}),t=l,1==this.disval?this.$http.post("goods",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getgoodslist())}):2==this.disval&&this.$http.put("goods",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getgoodslist())})},savebanner:function(){var e=this,t={};for(var a in this.uploadForm)this.uploadForm[a]&&(t[a]=this.uploadForm[a]);var l=new FormData;P()(t).forEach(function(e){return l.append(e,t[e])}),t=l,this.$http.post("goods/banner",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.getbannerlist(e.actuserobj.id),e.innerVisible=!e.innerVisible)})},gettypes:function(){var e=this;if(this.types.length<1){this.$http.get("goods/type").then(function(t){for(var a in t.data)t.data[a].id=Number(t.data[a].id);e.types=t.data})}},onBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/jpg",a=e.size/1024<150;return t?a?(this.isupload=!0,3!=this.disval?this.ruleForm.file=e:this.uploadForm.file=e):(this.isupload=!1,this.$message.error("上传文件大小不能超过 150kb!")):(this.isupload=!1,this.$message.error("上传文件只能是图片格式!")),t&&a},onchange:function(e,t){if(console.log(this.isupload),this.isupload){var a={name:e.name,url:e.url,isupload:1};this.fileList=[],this.fileList.push(a),this.isupload=!1}},handleRemove:function(e,t){this.fileList=[],3!=this.disval?this.ruleForm.file=null:this.uploadForm.file=null},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")}},created:function(){this.getgoodslist()}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getgoodslist(1)}},model:{value:e.term.name,callback:function(t){e.$set(e.term,"name",t)},expression:"term.name"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品分类"},on:{focus:e.gettypes},model:{value:e.term.typeId,callback:function(t){e.$set(e.term,"typeId",t)},expression:"term.typeId"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.statusss,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getgoodslist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建商品")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.goodslist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thumb",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticClass:"thumbimg tbimg",attrs:{src:e.$GLOBAL.API+t.row.thumb,alt:"商品图片"},on:{click:function(a){return e.handletbimg(t.row.thumb)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"costPrice",align:"center",label:"商品成本价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"originPrice",align:"center",label:"商品原价",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salePrice",align:"center",label:"销售价格",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleAmount",align:"center",label:"销量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",align:"center",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlebanner(t.row)}}},[e._v("轮播图")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"商品图片",visible:e.tbimgUrl,"modal-append-to-body":!1,width:"23.5%",center:""},on:{"update:visible":function(t){e.tbimgUrl=t}}},[a("img",{staticClass:"diaimg",attrs:{src:e.$GLOBAL.API+e.tbimgUrl,alt:""}})]),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建商品",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",top:"2%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:1==e.disval?"name":""}},[a("el-input",{attrs:{placeholder:"请输入商品名称",maxlength:"100",clearable:"",disabled:2==e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品子标题",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输商品子标题",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品分类"},model:{value:e.ruleForm.typeId,callback:function(t){e.$set(e.ruleForm,"typeId",t)},expression:"ruleForm.typeId"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品图片",prop:"files"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"#","before-upload":e.onBeforeUpload,"on-change":e.onchange,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,"list-type":"picture-card"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过150kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品成本价"}},[a("el-input",{attrs:{placeholder:"商品成本价",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.costPrice,callback:function(t){e.$set(e.ruleForm,"costPrice",t)},expression:"ruleForm.costPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品原价",prop:"originPrice"}},[a("el-input",{attrs:{placeholder:"商品原价",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.originPrice,callback:function(t){e.$set(e.ruleForm,"originPrice",t)},expression:"ruleForm.originPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销售价格",prop:"salePrice"}},[a("el-input",{attrs:{placeholder:"销售价格",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.salePrice,callback:function(t){e.$set(e.ruleForm,"salePrice",t)},expression:"ruleForm.salePrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销量"}},[a("el-input",{attrs:{placeholder:"销量",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.saleAmount,callback:function(t){e.$set(e.ruleForm,"saleAmount",t)},expression:"ruleForm.saleAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品简介"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入商品简介",clearable:""},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑商品",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",top:"2%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:1==e.disval?"name":""}},[a("el-input",{attrs:{placeholder:"请输入商品名称",maxlength:"100",clearable:"",disabled:2==e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品子标题",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输商品子标题",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品分类"},model:{value:e.ruleForm.typeId,callback:function(t){e.$set(e.ruleForm,"typeId",t)},expression:"ruleForm.typeId"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品图片",prop:"files"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"#","before-upload":e.onBeforeUpload,"on-change":e.onchange,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,"list-type":"picture-card"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过150kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品成本价"}},[a("el-input",{attrs:{placeholder:"商品成本价",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.costPrice,callback:function(t){e.$set(e.ruleForm,"costPrice",t)},expression:"ruleForm.costPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品原价",prop:"originPrice"}},[a("el-input",{attrs:{placeholder:"商品原价",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.originPrice,callback:function(t){e.$set(e.ruleForm,"originPrice",t)},expression:"ruleForm.originPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销售价格",prop:"salePrice"}},[a("el-input",{attrs:{placeholder:"销售价格",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.salePrice,callback:function(t){e.$set(e.ruleForm,"salePrice",t)},expression:"ruleForm.salePrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销量"}},[a("el-input",{attrs:{placeholder:"销量",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.saleAmount,callback:function(t){e.$set(e.ruleForm,"saleAmount",t)},expression:"ruleForm.saleAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品简介"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入商品简介",clearable:""},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),e.DialogVisiblebanner?a("el-dialog",{attrs:{title:"编辑轮播图",visible:e.DialogVisiblebanner,"modal-append-to-body":!1,width:"50%",top:"2%",center:""},on:{"update:visible":function(t){e.DialogVisiblebanner=t}}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.innerVisible=!0}}},[e._v("添加轮播图")]),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"添加轮播图",visible:e.innerVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"uploadForm",staticClass:"demo-ruleForm",attrs:{model:e.uploadForm,rules:e.uploadrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品图片",prop:"file"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"#","before-upload":e.onBeforeUpload,"on-change":e.onchange,"on-remove":e.handleRemove,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,"list-type":"picture-card"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("添加轮播图")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过150kb")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"序号",prop:"sort"}},[a("el-input",{attrs:{placeholder:"商品原价",type:"number",clearable:""},model:{value:e.uploadForm.sort,callback:function(t){e.$set(e.uploadForm,"sort",t)},expression:"uploadForm.sort"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("uploadForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.innerVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.bannerlist,border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"thumb",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticClass:"thumbimg",attrs:{src:e.$GLOBAL.API+t.row.bannerPath,alt:"商品图片"}})]}}],null,!1,4027907415)}),e._v(" "),a("el-table-column",{attrs:{prop:"originPrice",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id?"已上传":""))]}}],null,!1,3968544973)}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlelbdel(t.row)}}},[e._v("删除")])]}}],null,!1,4055123134)})],1)],1):e._e()],1)},staticRenderFns:[]};var G=a("VU/8")(X,K,!1,function(e){a("6XTv")},null,null).exports,Q=a("t4zo"),J=a.n(Q),ee=a("uXZL"),te=a.n(ee),ae=function(e,t,a){var l=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return a(new Error("邮箱不能为空"));setTimeout(function(){l.test(t)?a():a(new Error("请输入正确的邮箱格式"))},100)},le=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?t<0?a(new Error("请输入一个大于0的数字")):U()(t)?a():a(new Error("请输入一个正整数")):a(new Error("请输入一个数字"))},100)},re=function(e,t,a){(t*=1)||a(new Error("请输入销售价格")),setTimeout(function(){W()(t)?t<0?a(new Error("销售价格应该大于0")):U()(t)?a():-1!=(t+=" ").indexOf(".")&&(t.split(".")[1].length>3?a(new Error("价格最多有两位小数")):a()):a(new Error("销售价格应该是一个大于0的数字"))},100)},ie={name:"store_list",data:function(){var e;return{total:0,ptotal:0,disval:1,pageNum:1,pageSize:10,username:"",isdown:!1,loading:!1,centerDialogVisible:!1,term:(e={goodsId:"",hotelName:"",hotelId:"",goodsSku:""},j()(e,"goodsSku",""),j()(e,"typeId",""),j()(e,"areaId",""),e),actuserobj:{},ruleForm:{currentStock:"",goodsId:"",hotelId:"",id:"",remark:"",salePrice:"",securityStock:"",status:"",total:""},rules:{goodsId:[{required:!0,message:"请选择商品",trigger:"change"}],hotelId:[{required:!0,message:"请选择酒店",trigger:"change"}],salePrice:[{required:!0,validator:re,trigger:"blur"}],securityStock:[{required:!0,validator:le,trigger:"blur"}],currentStock:[{required:!0,validator:le,trigger:"blur"}],total:[{required:!0,validator:le,trigger:"blur"}],email:[{required:!0,validator:ae,trigger:"blur"}],status:[{required:!0,message:"请选择用户类型",trigger:"change"}]},downlist:[],rolelist:[],typelist:[{id:1,label:"有效"},{id:0,label:"无效"}],area:[],types:[],options:[],hotellist:[],goodsList:[],storelist:[]}},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible){for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("store/areaList").then(function(t){var a=[],l=[];for(var r in t.data){var i={},s={};i.value=t.data[r].id,i.label=t.data[r].name,s.value=t.data[r].id,s.id=t.data[r].id,s.name=t.data[r].name,i.children=[],a.push(i),l.push(s)}e.area=l,e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},handleItemChange1:function(e){this.getgoodsList(e[0])},gethotel:function(e){var t=this;this.$http.get("store/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},gettypes:function(){var e=this;this.types.length<1&&this.$http.get("store/type").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.types=a})},handlechange:function(e){this.centerDialogVisible?this.ruleForm.hotelId=e[1]:this.term.hotelId=e[1]},handlechange1:function(e){var t=this.types,a={};for(var l in t)if(t[l].value==e[0])for(var r in t[l].children)t[l].children[r].value==e[1]&&(a=t[l].children[r]);this.centerDialogVisible?(this.ruleForm.goodsId=e[1],this.ruleForm.salePrice=a.salePrice):this.term.goodsId=e[1]},handlechangesel:function(e){for(var t in this.ruleForm.goodsId=e,this.goodsList)e==this.goodsList[t].id&&(this.ruleForm.salePrice=this.goodsList[t].salePrice)},getgoodsList:function(e){var t=this;this.goodsList.length<1&&this.$http.get("store/goodsList?typeId="+e).then(function(a){var l=[];for(var r in t.types)if(e==t.types[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,s.salePrice=a.data[i].salePrice,l.push(s)}t.types[r].children=l}})},getstorelist:function(e){var t=this,a="",l=this;for(var r in 1==e?(this.pageNum=1,a="store?pageNum="+this.pageNum+"&pageSize="+this.pageSize):a="down"==e?"store?pageNum="+this.pageNum+"&pageSize=1000":"store?pageNum="+this.pageNum+"&pageSize="+this.pageSize,this.term)this.term[r]&&(a+="&"+r+"="+this.term[r]);this.loading=!0,this.$http.get(a).then(function(e){if(e.data.total<1)t.loading=!1,t.$message("没有查询到相关数据信息"),t.storelist=[];else{var a=e.data.data;if(t.isdown){var r=[].concat(w()(a));t.downlist=r,t.isdown=!t.isdown,setTimeout(function(){l.loading=!1,l.output()},150)}else{for(var i in t.total=e.data.total,a)1==a[i].status?a[i].status=!0:a[i].status=!1;t.storelist=a,t.loading=!1}}})},handleCurrentChange:function(e){this.pageNum=e,this.getstorelist()},handleSizeChange:function(e){this.pageSize=e,this.getstorelist()},openDialog:function(e){this.disval=e,this.centerDialogVisible=!this.centerDialogVisible},handleedit:function(e){this.getidinfo(e.id),this.openDialog(2),this.actuserobj=e},handledel:function(e){var t=this;console.log("obj:",e),this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete("store/"+e.id).then(function(e){console.log("res:",e),t.$message.success("修改成功"),t.getstorelist()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getidinfo:function(e){var t=this;this.$http.get("store/"+e).then(function(e){var a=e.data;for(var l in t.actuserobj.children=a,a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=2,this.$http.put("store/status",a).then(function(e){200==e.status&&t.$message.success("修改成功")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.remark="")},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("store",t).then(function(t){console.log("1",t),200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getstorelist())}):2==this.disval&&this.$http.put("store",t).then(function(t){console.log(e.disval,t),200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getstorelist())})},downloadTable:function(){this.isdown=!0,this.getstorelist("down")},output:function(){for(var e=this.downlist,t="<tr><td>商品名称</td><td>酒店名称</td><td>商品总数</td><td>当前库存</td><td>安全库存</td><td>成本价格</td><td>销售价格</td><td>总金额</td><td>当前状态</td><td>备注</td></tr>",a=0;a<e.length;a++)t+="<tr>",t+="<td>"+e[a].goodsName+"\t</td>",t+="<td>"+e[a].hotelName+"\t</td>",t+="<td>"+e[a].total+"\t</td>",t+="<td>"+e[a].currentStock+"\t</td>",t+="<td>"+e[a].securityStock+"\t</td>",t+="<td>"+(e[a].costPrice?e[a].costPrice:"\t")+"</td>",t+="<td>"+(e[a].salePrice?e[a].salePrice:"\t")+"</td>",t+="<td>"+(e[a].totalAmount?e[a].totalAmount:"\t")+"</td>",t+="<td>"+(1==e[a].status?"正常":"关闭\t")+"</td>",t+="<td>"+(e[a].remark?e[a].remark:"\t")+"</td>",t+="</tr>";var l='<html xmlns:o="urn:schemas-microsoft-com:office:office" \n      xmlns:x="urn:schemas-microsoft-com:office:excel" \n      xmlns="http://www.w3.org/TR/REC-html40">\n      <head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet>\n        <x:Name>商品库存</x:Name>\n        <x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet>\n        </x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e\n        </head><body><table>'+t+"</table></body></html>";window.location.href="data:application/vnd.ms-excel;base64,"+this.base64(l)},base64:function(e){return window.btoa(unescape(encodeURIComponent(e)))},output2:function(){document.querySelector("#mytable").cloneNode(!0);var e,t=document.querySelector(".el-table__fixed");t?(e=te.a.utils.table_to_book(document.querySelector("#mytable").removeChild(t)),document.querySelector("#mytable").appendChild(t)):e=te.a.utils.table_to_book(document.querySelector("#mytable"));var a="商品库存";this.dataEndDate&&(a+="("+this.dataEndDate+")");var l=te.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{J.a.saveAs(new Blob([l],{type:"application/octet-stream"}),a+".xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,l)}return l}},created:function(){this.getstorelist()}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"store_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getstorelist(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择区域"},on:{focus:e.getarea},model:{value:e.term.areaId,callback:function(t){e.$set(e.term,"areaId",t)},expression:"term.areaId"}},e._l(e.area,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-cascader",{attrs:{placeholder:"请选择类别商品","show-all-levels":!1,options:e.types,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange1,change:e.handlechange1,focus:e.gettypes}}),e._v(" "),a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getstorelist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadTable}},[e._v("导出表格")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建库存")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{id:"mytable",data:e.storelist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"currentStock",align:"center",label:"当前库存"}}),e._v(" "),a("el-table-column",{attrs:{prop:"securityStock",align:"center",label:"安全库存"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salePrice",align:"center",label:"销售价格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.handledel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":e.pageSize,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:1==e.disval?"创建库存":"编辑库存",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.disval||2==e.disval,expression:"disval==1 || disval==2"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"酒店名称",prop:"hotelId"}},[a("el-cascader",{attrs:{placeholder:e.actuserobj.hotelName,"show-all-levels":!1,options:e.options,filterable:"",clearable:"",disabled:1!=e.disval},on:{focus:e.getarea,"active-item-change":e.handleItemChange,change:e.handlechange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称",prop:"goodsId"}},[a("el-cascader",{attrs:{placeholder:e.actuserobj.goodsName?e.actuserobj.goodsName:"请选择类别商品","show-all-levels":!1,options:e.types,filterable:"",clearable:"",disabled:1!=e.disval},on:{"active-item-change":e.handleItemChange1,change:e.handlechange1,focus:e.gettypes}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销售价格",prop:"salePrice"}},[a("el-input",{attrs:{placeholder:"请输入销售价格",type:"number",oninput:"if(value.length>10)value=value.slice(0,10)",clearable:""},model:{value:e.ruleForm.salePrice,callback:function(t){e.$set(e.ruleForm,"salePrice",t)},expression:"ruleForm.salePrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前库存",prop:"currentStock"}},[a("el-input",{attrs:{placeholder:"请输入当前库存",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.currentStock,callback:function(t){e.$set(e.ruleForm,"currentStock",t)},expression:"ruleForm.currentStock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安全库存"}},[a("el-input",{attrs:{placeholder:"请输入安全库存",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.securityStock,callback:function(t){e.$set(e.ruleForm,"securityStock",t)},expression:"ruleForm.securityStock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",oninput:"if(value.length>500)value=value.slice(0,500)",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(ie,se,!1,function(e){a("2ZRu")},null,null).exports,ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getgoodslist(1)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getgoodslist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建类别")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.goodslist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",align:"center",label:"级别"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建商品类别",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择级别"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},e._l(e.levellist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑商品类别",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择级别"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},e._l(e.levellist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var ue=a("VU/8")({name:"category",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,loading:!1,isfirst:!1,centerDialogVisible:!1,name:"",goodslist:[],firstList:[],levellist:[{id:2,label:"二级"}],ruleForm:{firstName:"",id:"",level:"",name:"",parentId:"",remark:"",status:""},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],level:[{required:!0,message:"请选择级别",trigger:"change"}]}}},filters:{},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible)for(var e in this.ruleForm)this.ruleForm[e]=""}},methods:{getgoodslist:function(e){var t=this;1==e&&(this.pageNum=1);var a="goodsType?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.name&&(a+="&name="+this.name),this.$http.get(a).then(function(e){var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:2==a[l].status&&(a[l].status=!1);t.goodslist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getgoodslist()},handleSizeChange:function(e){this.pageSize=e,this.getgoodslist()},changestatus:function(e){var t,a=this;e.status=e.status?1:2,t={status:e.status,id:e.id},this.$http.put("goodsType/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getgoodslist())})},handleedit:function(e){var t=this;this.$http.get("goodsType/"+e.id).then(function(e){if(200==e.status){for(var a in t.ruleForm)t.ruleForm[a]="";for(var l in e.data)for(var r in t.ruleForm)l==r&&(t.ruleForm[r]=e.data[l]);for(var i in t.firstList)e.data.firstName==t.firstList[i].name&&(t.ruleForm.parentId=t.firstList[i].id);t.openDialog(2)}})},openDialog:function(e){this.disval=e,this.centerDialogVisible=!this.centerDialogVisible},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.savedata()})},resetForm:function(e){this.$refs[e].resetFields()},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);this.isfirst=!!t.parentId,1==this.disval?this.$http.post("goodsType",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getgoodslist())}):2==this.disval&&this.$http.put("goodsType",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getgoodslist())})}},created:function(){this.getgoodslist()}},ne,!1,function(e){a("Aa9d")},null,null).exports,ce={name:"storeloglist",data:function(){return{total:0,pageNum:1,pageSize:10,term:{goodsId:"",hotelName:"",hotelId:""},options:[],goodsList:[],storelist:[]}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("store/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("store/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},getgoodsList:function(){var e=this;this.goodsList.length<1&&this.$http.get("store/goodsList").then(function(t){e.goodsList=t.data})},getstorelist:function(e){var t=this;1==e&&(this.pageNum=1);var a="store/logList?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.storelist=[];else{var a=[].concat(w()(e.data.data));for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1,a[l].createTime="20"+a[l].createTime;t.storelist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getstorelist()},handleSizeChange:function(e){this.pageSize=e,this.getstorelist()}},created:function(){this.getstorelist()}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"storelog_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品"},on:{focus:e.getgoodsList},model:{value:e.term.goodsId,callback:function(t){e.$set(e.term,"goodsId",t)},expression:"term.goodsId"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getstorelist(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getstorelist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.storelist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",align:"center",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salePrice",align:"center",label:"价格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.status?"添加":"1"==t.row.status?"修改":"删除"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail",align:"center",label:"详情"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var de=a("VU/8")(ce,me,!1,function(e){a("n0XY")},null,null).exports,pe=function(e,t,a){var l=/^0\d{2,3}-?\d{7,8}$/,r=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;if(!t)return a(new Error("电话号码不能为空"));setTimeout(function(){U()(+t)?l.test(t)?a():r.test(t)?a():a(new Error("电话号码格式不正确")):a(new Error("请输入数字值"))},100)},he={name:"supplier_list",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,supplierName:"",centerDialogVisible:!1,actuserobj:{},ruleForm:{contactName:"",contactTel:"",id:"",name:"",remark:"",status:""},rules:{name:[{required:!0,message:"请输入区域名称",trigger:"blur"}],contactTel:[{required:!0,validator:pe,trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},supplylist:[],statuslist:[{id:1,label:"有效"},{id:2,label:"无效"}]}},filters:{fiterstatus:function(e){return 1==e?"有效":"无效"}},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible){for(var e in this.ruleForm)this.ruleForm[e]&&(this.ruleForm[e]="");this.actuserobj={}}}},methods:{getsupplylist:function(e){var t=this;1==e&&(this.pageNum=1);var a="supply?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.supplierName&&(a+="&name="+this.supplierName),this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,t.total=e.data.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.supplylist=[]):t.supplylist=e.data.data})},handleCurrentChange:function(e){this.pageNum=e,this.getsupplylist()},handleSizeChange:function(e){this.pageSize=e,this.getsupplylist()},openDialog:function(e){this.disval=e,this.centerDialogVisible=!0},handleedit:function(e){this.actuserobj=e,this.getidinfo(e.id),this.openDialog(2)},getidinfo:function(e){var t=this;this.$http.get("supply/"+e).then(function(e){var a=e.data;for(var l in a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):this.$refs[e].resetFields()},savedata:function(){var e=this,t={};for(var a in this.ruleForm)t[a]=this.ruleForm[a];1==this.disval?this.$http.post("supply",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getsupplylist())}):2==this.disval&&this.$http.put("supply",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getsupplylist())})}},created:function(){this.getsupplylist()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplier_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"供应商名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getsupplylist(1)}},model:{value:e.supplierName,callback:function(t){e.supplierName=t},expression:"supplierName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsupplylist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建供应商")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.supplylist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"供应商名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactName",align:"center",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactTel",align:"center",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:1==t.row.status?"":"info"}},[e._v(e._s(e._f("fiterstatus")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建供应商",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"供应商名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入供应商名称",maxlength:"100",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"contactName"}},[a("el-input",{attrs:{placeholder:"请输入联系人",maxlength:"10",clearable:""},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"contactTel"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.contactTel,callback:function(t){e.$set(e.ruleForm,"contactTel",t)},expression:"ruleForm.contactTel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑供应商",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"供应商名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入供应商名称",maxlength:"100",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"contactName"}},[a("el-input",{attrs:{placeholder:"请输入联系人",maxlength:"10",clearable:""},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"contactTel"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.contactTel,callback:function(t){e.$set(e.ruleForm,"contactTel",t)},expression:"ruleForm.contactTel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var fe=a("VU/8")(he,ge,!1,function(e){a("gaw3")},null,null).exports,be=a("MJLE"),ve=a.n(be),ye=a("2Pnh"),_e=a.n(ye),Fe={name:"equip_list",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,Indnum:0,loading:!1,ispostion:!1,DialogVisible:!1,innerVisible:!1,centerDialogVisible1:!1,centerDialogVisible2:!1,centerDialogVisible3:!1,userinfo:{},arealist:[],equiplist:[],hotelList:[],options:[],goodslist:[],optionstype:[],device:[{id:1,label:"1号机（10货道）"},{id:3,label:"3号机（3货道）"}],netlist:[{id:1,label:"物联卡"},{id:2,label:"wifi"}],powerlist:[{id:1,label:"电池"},{id:2,label:"插电"}],channstock:[{id:1,label:"1"},{id:0,label:"0"}],statuslist:[{id:1,label:"离线",disabled:!0},{id:2,label:"在线",disabled:!0},{id:4,label:"故障"}],voltagelist:[{id:1,label:">80%"},{id:2,label:"50%~80%"},{id:3,label:"15%~50%"},{id:4,label:"<15%"}],actuserobj:{},term:{serialNo:"",name:"",status:"",voltage:"",sku:"",hotelName:"",netType:"",powerType:"",startTime:"",endTime:"",areaId:""},channobj:{equipId:"",goodsId:"",id:"",serialNo:"",status:"",stock:"",roomNo:"",position:""},Formedit:{serialNo:"",name:""},ruleForm:{hotelId:"",id:"",name:"",remark:"",roomId:"",serialNo:"",status:"1",type:"",netType:"",powerType:"",channelList:[]},rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],serialNo:[{required:!0,message:"请输入设备编号",trigger:"blur"}],roomNo:[{required:!0,message:"请输入所在位置",trigger:"blur"}],roomId:[{required:!0,message:"请选择所在位置",trigger:"change"}],hotelId:[{required:!0,message:"请选择酒店名称",trigger:"change"}],status:[{required:!0,message:"请选择设备状态",trigger:"change"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],netType:[{required:!0,message:"请选择联网方式",trigger:"change"}],powerType:[{required:!0,message:"请选择供电方式",trigger:"change"}],goodsId:[{required:!0,message:"请选择货道商品",trigger:"change"}],channstatus:[{required:!0,message:"请选择货道状态",trigger:"change"}]},newrules:{cheackgoods:[{required:!0,message:"请选择货道商品",trigger:["blur","change"]}],cheackstock:[{required:!0,message:"请选择库存",trigger:["blur","change"]}]},props:{label:"label",value:"value"}}},watch:{centerDialogVisible1:function(){if(!this.centerDialogVisible1){for(var e in this.ruleForm)this.ruleForm[e]&&(this.ruleForm[e]="");this.ruleForm.channelList=[],this.goodslist=[],this.actuserobj={}}},centerDialogVisible2:function(){if(!this.centerDialogVisible2){for(var e in this.ruleForm)this.ruleForm[e]&&(this.ruleForm[e]="");this.ruleForm.channelList=[],this.goodslist=[],this.actuserobj={}}},DialogVisible:function(){if(!this.DialogVisible)for(var e in this.Formedit)this.Formedit[e]=""},innerVisible:function(){if(!this.DialogVisible)for(var e in this.Formedit)this.Formedit[e]=""},"ruleForm.type":{handler:function(e){e?this.centerDialogVisible1&&this.setchannelList(e):this.ruleForm.channelList=[]},deep:!0},"ruleForm.hotelId":{handler:function(e){this.ispostion=!!e}}},filters:{fitertype:function(e){return 1==e?"6货道":2==e?"8货道":3==e?"10货道":void 0},fiternet:function(e){return 1==e?"物联卡":2==e?"wifi":void 0},fiterpower:function(e){return 1==e?"电池":2==e?"插电":void 0},fiterstatus:function(e){return 1==e?"离线":2==e?"在线":3==e?"停用":4==e?"故障":5==e?"作废":void 0},flterserialno:function(e){if(e)return e.substring(e.length-8)},fitervoltage:function(e){return 1==e?">80%":2==e?"50%~80%":3==e?"15%~50%":4==e?"<15%":void 0}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("equip/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){var t=this;this.$http.get("equip/hotelList/"+e[0]).then(function(a){var l=[];for(var r in t.options)if(e[0]==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.centerDialogVisible1||this.centerDialogVisible2?this.ruleForm.hotelId=e[1]:this.term.hotelId=e[1]},getgoodstype:function(e){var t=this;this.Indnum=e,this.optionstype.length<1&&this.$http.get("equip/type").then(function(e){if(200==e.status){var a=[];for(var l in e.data){var r={};r.value=e.data[l].id,r.label=e.data[l].name,r.children=[],a.push(r)}t.optionstype=a}})},handleItemChangetype:function(e){var t=this;this.$http.get("equip/goods3?typeId="+e[0]).then(function(a){if(200==a.status){var l=[];for(var r in t.optionstype)if(e[0]==t.optionstype[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,s.salePrice=a.data[i].salePrice,l.push(s)}t.optionstype[r].children=l}}})},handlechangetype:function(e){this.ruleForm.channelList[this.Indnum].goodsId=e[1]},copygoods:function(e){var t=this;e?this.$http.get("equip/copyGoods?serialNo="+e).then(function(e){var a=[].concat(w()(e.data));for(var l in a)for(var r in t.ruleForm.channelList)Number(a[l].serialNo)==Number(t.ruleForm.channelList[r].serialNo)&&(t.ruleForm.channelList[r].goodsId=a[l].goodsId,t.ruleForm.channelList[r].goodsName=a[l].goodsName);t.innerVisible=!1}):this.innerVisible=!0},getgoods:function(e){var t=this;if(this.Indnum=e,this.ruleForm.hotelId){if(this.goodslist.length<1){var a="equip/goods?hotelId="+this.ruleForm.hotelId;this.$http.get(a).then(function(e){t.goodslist=e.data})}}else this.$message.error("请先选择酒店")},getequiplist:function(e){var t=this;1==e&&(this.pageNum=1);var a="equip?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term.startTime&&(this.term.startTime=this.Until.changDage(this.term.startTime)),this.term.endTime&&(this.term.endTime=this.Until.changDage(this.term.endTime)),this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.$http.get(a).then(function(e){if(200==e.status){var a=[].concat(w()(e.data.data));a.map(function(e){e.updateTime&&(e.updateTime="20"+e.updateTime)}),t.equiplist=a,t.total=e.data.total}})},handleCurrentChange:function(e){this.pageNum=e,this.getequiplist()},handleSizeChange:function(e){this.pageSize=e,this.getequiplist()},openDialog:function(e){var t=this;this.disval=e,1==e?this.centerDialogVisible1=!this.centerDialogVisible1:2==e?this.centerDialogVisible2=!this.centerDialogVisible2:3==e&&(this.centerDialogVisible3=!this.centerDialogVisible3),3==e&&setTimeout(function(){var e=document.getElementById("qrcode");new ve.a(e);document.getElementById("qrcode").innerHTML="",t.qrcode()},50)},handleedit:function(e){this.getidinfo(e.id),this.openDialog(2),this.actuserobj=e},handlecopy:function(e){this.actuserobj=e,this.DialogVisible=!0},handleqrcode:function(e){this.actuserobj=e,this.getidinfo(e.id),this.openDialog(3)},businessTypeChange:function(e){this.ruleForm.channelList[this.Indnum].goodsId=e},getidinfo:function(e){var t=this;this.$http.get("equip/"+e).then(function(e){var a=D()({},e.data);for(var l in t.actuserobj.children=a,a.type=Number(a.type),a.channelList)a.channelList[l].status=1==a.channelList[l].status,a.channelList[l].serialNo=Number(a.channelList[l].serialNo),a.channelList[l].stock=Number(a.channelList[l].stock);a.channelList.sort(function(e,t){return e.serialNo<t.serialNo?-1:e.serialNo>t.serialNo?1:0}),a.remark=a.remark?a.remark:"",t.ruleForm=JSON.parse(E()(a))})},submitForm:function(e){var t=this;this.ruleForm.roomNo&&(this.ruleForm.position=this.ruleForm.roomNo),!this.centerDialogVisible1||this.ruleForm.roomNo?this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"Formedit"==e?t.innerVisible?t.copygoods(t.Formedit.serialNo):t.savecopy():"ruleForm"==e&&t.savedata()}):this.$message.error("请输入所在位置")},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.remark="")},savecopy:function(){var e=this,t={};t={id:this.actuserobj.id,serialNo:this.Formedit.serialNo},this.Formedit.name&&(t.name=this.Formedit.name),this.$http.post("equip/copy",t).then(function(t){e.$message.success("操作成功"),e.getequiplist(),e.DialogVisible=!1})},savedata:function(){var e=this,t=[],a={};for(var l in console.log("ruleForm:",this.ruleForm),this.ruleForm)this.ruleForm[l]&&(a[l]=this.ruleForm[l]);if(1==this.disval)this.$http.post("equip",a).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible1=!e.centerDialogVisible1,e.getequiplist())});else if(2==this.disval){if(this.ruleForm.channelList.length>0){var r=this.ruleForm.channelList;for(var i in r){var s={id:r[i].id,goodsId:r[i].goodsId,stock:r[i].stock};t.push(s)}}a.channelList=t,this.$http.put("equip",a).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible2=!e.centerDialogVisible2,e.getequiplist())})}},changestatus:function(e){var t,a=this,l=this;e.status=e.status?1:2,t={status:e.status,id:e.id},this.$http.put("equip/channel/status",t).then(function(t){if(200==t.status){for(var r in l.ruleForm.channelList)e.id==l.ruleForm.channelList[r].id&&(l.ruleForm.channelList[r].status=1==e.status);a.$message.success("修改成功")}})},handlesave:function(e){var t=this,a={};e.goodsId?e.status?(a={goodsId:e.goodsId,id:e.id,status:e.status,stock:e.stock},this.$http.put("equip/channel",a).then(function(e){200==e.status&&t.$message.success("保存成功")})):this.$message.error("请选择状态"):this.$message.error("请选择商品")},proving:function(e){e.stock=e.stock.replace(/[^\.\d]/g,""),e.stock=e.stock.replace(".","")},setchannelList:function(e){var t=1==e?10:3;this.ruleForm.channelList=[];for(var a=0;a<t;a++){var l={goodsId:"",serialNo:Number(this.ruleForm.channelList.length)+1,stock:1==e?1:7};this.ruleForm.channelList.push(l)}},qrcode:function(){var e="";1==this.actuserobj.type?e=this.$GLOBAL.qrAPI+"index/"+this.actuserobj.serialNo:3==this.actuserobj.type&&(e=this.$GLOBAL.qrAPI+"index3.html?no="+this.actuserobj.serialNo);new ve.a("qrcode",{width:114,height:114,text:e})},downloadImg:function(){var e=this;_e()(document.querySelector("#imageWrapper")).then(function(t){var a=t.toDataURL("image/png"),l=document.createElement("a"),r=new MouseEvent("click");l.download=e.actuserobj.hotelName+"——"+e.actuserobj.roomNo,l.href=a,l.dispatchEvent(r)})},printqr:function(){var e=document.getElementById("imageWrapper").innerHTML,t=document.body.innerHTML;return document.body.innerHTML=e,document.title="",window.print(),window.location.reload(),document.body.innerHTML=t,!1}},created:function(){this.userinfo=this.$store.state.userInfo,this.getequiplist()}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equip_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入酒店编码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getequiplist(1)}},model:{value:e.term.sku,callback:function(t){e.$set(e.term,"sku",t)},expression:"term.sku"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getequiplist(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入设备编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getequiplist(1)}},model:{value:e.term.serialNo,callback:function(t){e.$set(e.term,"serialNo",t)},expression:"term.serialNo"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择电压量"},model:{value:e.term.voltage,callback:function(t){e.$set(e.term,"voltage",t)},expression:"term.voltage"}},e._l(e.voltagelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择联网方式"},model:{value:e.term.netType,callback:function(t){e.$set(e.term,"netType",t)},expression:"term.netType"}},e._l(e.netlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择供电方式"},model:{value:e.term.powerType,callback:function(t){e.$set(e.term,"powerType",t)},expression:"term.powerType"}},e._l(e.powerlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择区域"},on:{focus:e.getarea},model:{value:e.term.areaId,callback:function(t){e.$set(e.term,"areaId",t)},expression:"term.areaId"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择开始时间",align:"right"},model:{value:e.term.startTime,callback:function(t){e.$set(e.term,"startTime",t)},expression:"term.startTime"}}),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择结束时间",align:"right"},model:{value:e.term.endTime,callback:function(t){e.$set(e.term,"endTime",t)},expression:"term.endTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getequiplist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:"common_role"===e.userinfo.role},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建设备")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.equiplist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",align:"center",label:"所在区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"所在酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"所在位置",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"联网方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiternet")(t.row.netType)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"供电方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterpower")(t.row.powerType)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"设备电量",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:t.row.voltage,expression:"scope.row.voltage"}],staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium",type:4==t.row.voltage?"danger":""}},[e._v(e._s(e._f("fitervoltage")(t.row.voltage)))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"休眠",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.sleepFlag?"是":""))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"上次更新时间",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterstatus")(t.row.status)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-tickets",disabled:"common_role"===e.userinfo.role},on:{click:function(a){return e.handlecopy(t.row)}}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-menu"},on:{click:function(a){return e.handleqrcode(t.row)}}},[e._v("二维码")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible1?a("el-dialog",{attrs:{title:"创建设备",visible:e.centerDialogVisible1,top:"1%","modal-append-to-body":!1,width:"70%",center:"","append-to-body":""},on:{"update:visible":function(t){e.centerDialogVisible1=t}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:3!=e.disval,expression:"disval !=3"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",{staticStyle:{border:"1px solid pink"}},[a("legend",[e._v("设备信息")]),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",disabled:2==e.disval,oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.device,function(t){return a("el-option",{key:t.id,attrs:{disabled:2==e.disval,label:t.label,value:t.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.disval,expression:"disval == 2"}],attrs:{label:"设备状态"}},[a("el-select",{attrs:{placeholder:"请选择设备状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所在酒店",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"",prop:"hotelId"}},[a("el-cascader",{attrs:{placeholder:e.ruleForm.hotelName?e.ruleForm.hotelName:"选择所在酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"所在位置",prop:"roomNo"}},[a("el-input",{attrs:{placeholder:"请输入所在位置",clearable:""},model:{value:e.ruleForm.roomNo,callback:function(t){e.$set(e.ruleForm,"roomNo",t)},expression:"ruleForm.roomNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"供电方式"}},[a("el-select",{attrs:{placeholder:"请选择供电方式"},model:{value:e.ruleForm.powerType,callback:function(t){e.$set(e.ruleForm,"powerType",t)},expression:"ruleForm.powerType"}},e._l(e.powerlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联网方式"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择联网方式"},model:{value:e.ruleForm.netType,callback:function(t){e.$set(e.ruleForm,"netType",t)},expression:"ruleForm.netType"}},e._l(e.netlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.type,expression:"ruleForm.type"}],staticStyle:{border:"1px solid pink"}},[a("legend",[e._v("货道信息")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 33px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.copygoods()}}},[e._v("复制货道信息")]),e._v(" "),e._l(e.ruleForm.channelList,function(t,l){return a("el-form-item",{key:l,attrs:{label:"货道编号"}},[a("el-col",{attrs:{span:1==e.disval?6:3}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入设备编号",type:"number",disabled:!0,clearable:""},model:{value:t.serialNo,callback:function(a){e.$set(t,"serialNo",a)},expression:"item.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"货道商品",prop:"channelList["+l+"].goodsId",rules:e.newrules.cheackgoods}},[1==e.ruleForm.type?a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品"},on:{change:e.businessTypeChange,focus:function(t){return e.getgoods(l)}},model:{value:t.goodsName,callback:function(a){e.$set(t,"goodsName",a)},expression:"item.goodsName"}},e._l(e.goodslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),3==e.ruleForm.type?a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择类别商品","show-all-levels":!1,options:e.optionstype,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChangetype,change:e.handlechangetype,focus:function(t){return e.getgoodstype(l)}}}):e._e()],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:2==e.disval,expression:"disval == 2"}],attrs:{span:5}},[a("el-form-item",{attrs:{label:"货道状态"}},[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t)}},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1==e.disval?9:6}},[a("el-form-item",{attrs:{label:"货道库存",rules:e.newrules.cheackstock}},[a("el-input",{attrs:{placeholder:"请选择货道库存",clearable:""},nativeOn:{keyup:function(a){return e.proving(t)}},model:{value:t.stock,callback:function(a){e.$set(t,"stock",a)},expression:"item.stock"}})],1)],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.disval,expression:"disval == 1"}],on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"设备编号",center:"",visible:e.innerVisible,top:"2vh","append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"Formedit",staticClass:"demo-ruleForm",attrs:{model:e.Formedit,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.Formedit.serialNo,callback:function(t){e.$set(e.Formedit,"serialNo",t)},expression:"Formedit.serialNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("Formedit")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("Formedit")}}},[e._v("表单重置")])],1)],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible2?a("el-dialog",{attrs:{title:"编辑设备",visible:e.centerDialogVisible2,top:"1%","modal-append-to-body":!1,width:"70%",center:"","append-to-body":""},on:{"update:visible":function(t){e.centerDialogVisible2=t}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:3!=e.disval,expression:"disval !=3"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",{staticStyle:{border:"1px solid pink"}},[a("legend",[e._v("设备信息")]),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",disabled:2==e.disval,oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.device,function(t){return a("el-option",{key:t.id,attrs:{disabled:2==e.disval,label:t.label,value:t.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.disval,expression:"disval == 2"}],attrs:{label:"设备状态"}},[a("el-select",{attrs:{placeholder:"请选择设备状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所在酒店",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"",prop:"hotelId"}},[a("el-cascader",{attrs:{placeholder:e.ruleForm.hotelName?e.ruleForm.hotelName:"选择所在酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"所在位置"}},[a("el-input",{attrs:{placeholder:"请输入所在位置",clearable:""},model:{value:e.ruleForm.roomNo,callback:function(t){e.$set(e.ruleForm,"roomNo",t)},expression:"ruleForm.roomNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"供电方式"}},[a("el-select",{attrs:{placeholder:"请选择供电方式"},model:{value:e.ruleForm.powerType,callback:function(t){e.$set(e.ruleForm,"powerType",t)},expression:"ruleForm.powerType"}},e._l(e.powerlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联网方式"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择联网方式"},model:{value:e.ruleForm.netType,callback:function(t){e.$set(e.ruleForm,"netType",t)},expression:"ruleForm.netType"}},e._l(e.netlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.type,expression:"ruleForm.type"}],staticStyle:{border:"1px solid pink"}},[a("legend",[e._v("货道信息")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 33px"},attrs:{type:"primary",icon:"el-icon-plus",disabled:"common_role"===e.userinfo.role},on:{click:function(t){return e.copygoods()}}},[e._v("复制货道信息")]),e._v(" "),e._l(e.ruleForm.channelList,function(t,l){return a("el-form-item",{key:l,attrs:{label:"货道编号"}},[a("el-col",{attrs:{span:1==e.disval?6:3}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入设备编号",type:"number",disabled:!0,clearable:""},model:{value:t.serialNo,callback:function(a){e.$set(t,"serialNo",a)},expression:"item.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"货道商品",rules:e.newrules.cheackgoods,prop:"channelList."+l+".goodsId"}},[1==e.ruleForm.type?a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品"},on:{change:e.businessTypeChange,focus:function(t){return e.getgoods(l)}},model:{value:t.goodsName,callback:function(a){e.$set(t,"goodsName",a)},expression:"item.goodsName"}},e._l(e.goodslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),3==e.ruleForm.type?a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择类别商品","show-all-levels":!1,options:e.optionstype,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChangetype,change:e.handlechangetype,focus:function(t){return e.getgoodstype(l)}}}):e._e()],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:2==e.disval,expression:"disval == 2"}],attrs:{span:5}},[a("el-form-item",{attrs:{label:"货道状态"}},[a("el-switch",{attrs:{"active-text":"","inactive-text":"",disabled:"common_role"===e.userinfo.role},on:{change:function(a){return e.changestatus(t)}},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1==e.disval?9:6}},[a("el-form-item",{attrs:{label:"货道库存",rules:e.newrules.cheackstock,prop:"channelList."+l+".stock"}},[a("el-input",{attrs:{placeholder:"请选择货道库存",clearable:"",disabled:!0},nativeOn:{keyup:function(a){return e.proving(t)}},model:{value:t.stock,callback:function(a){e.$set(t,"stock",a)},expression:"item.stock"}})],1)],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:"common_role"===e.userinfo.role},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.disval,expression:"disval == 1"}],attrs:{disabled:"common_role"===e.userinfo.role},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"设备编号",center:"",visible:e.innerVisible,top:"2vh","append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"Formedit",staticClass:"demo-ruleForm",attrs:{model:e.Formedit,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.Formedit.serialNo,callback:function(t){e.$set(e.Formedit,"serialNo",t)},expression:"Formedit.serialNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("Formedit")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("Formedit")}}},[e._v("表单重置")])],1)],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"设备二维码",visible:e.centerDialogVisible3,top:"5%","modal-append-to-body":!1,width:"14%",center:""},on:{"update:visible":function(t){e.centerDialogVisible3=t}}},[a("div",[a("div",{ref:"imageWrapper",staticClass:"qrimg imageWrapper",attrs:{id:"imageWrapper"}},[a("div",{ref:"qrcode",attrs:{id:"qrcode"}}),e._v(" "),e._t("default",[e._v(e._s(e.actuserobj.serialNo))])],2),e._v(" "),a("el-button",{staticClass:"doloadbut",attrs:{type:"primary"},on:{click:e.downloadImg}},[e._v("下载二维码")]),e._v(" "),a("el-button",{staticClass:"doloadbut",attrs:{type:"primary"},on:{click:e.printqr}},[e._v("打印二维码")])],1)]),e._v(" "),e.DialogVisible?a("el-dialog",{attrs:{title:"请输入新设备，并确认保存",visible:e.DialogVisible,"modal-append-to-body":!1,top:"5%",width:"40%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[a("el-form",{ref:"Formedit",staticClass:"demo-ruleForm",attrs:{model:e.Formedit,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.Formedit.serialNo,callback:function(t){e.$set(e.Formedit,"serialNo",t)},expression:"Formedit.serialNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("Formedit")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("Formedit")}}},[e._v("表单重置")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var we=a("VU/8")(Fe,ke,!1,function(e){a("6GiJ")},null,null).exports,xe={name:"FirstEquipList",data:function(){return{total:0,pageNum:1,pageSize:15,loading:!1,innerVisible:!1,centerDialogVisible:!1,term:{name:"",serialNo:"",status:""},Formedit:{serialNo:"",name:""},ruleForm:{hotelId:"",id:"",name:"",remark:"",roomId:"",serialNo:"",status:"1",type:"",netType:"",powerType:"",channelList:[]},actuserobj:{},rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],serialNo:[{required:!0,message:"请输入设备编号",trigger:"blur"}],roomNo:[{required:!0,message:"请输入所在位置",trigger:"blur"}],roomId:[{required:!0,message:"请选择所在位置",trigger:"change"}],hotelId:[{required:!0,message:"请选择酒店名称",trigger:"change"}],status:[{required:!0,message:"请选择设备状态",trigger:"change"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],netType:[{required:!0,message:"请选择联网方式",trigger:"change"}],powerType:[{required:!0,message:"请选择供电方式",trigger:"change"}],goodsId:[{required:!0,message:"请选择货道商品",trigger:"change"}],channstatus:[{required:!0,message:"请选择货道状态",trigger:"change"}]},newrules:{cheackgoods:[{required:!0,message:"请选择货道商品",trigger:["blur","change"]}],cheackstock:[{required:!0,message:"请选择库存",trigger:["blur","change"]}]},netlist:[{id:1,label:"物联卡"},{id:2,label:"wifi"}],powerlist:[{id:1,label:"电池"},{id:2,label:"插电"}],device:[{id:1,label:"1号机（10货道）"},{id:3,label:"3号机（3货道）"}],equiplist:[],options:[],goodslist:[],optionstype:[],statuslist:[{id:1,label:"离线"},{id:2,label:"在线"},{id:3,label:"停用"}]}},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible2){for(var e in this.ruleForm)this.ruleForm[e]&&(this.ruleForm[e]="");this.ruleForm.channelList=[],this.goodslist=[],this.actuserobj={}}},innerVisible:function(){if(!this.DialogVisible)for(var e in this.Formedit)this.Formedit[e]=""},"ruleForm.type":{handler:function(e){e?this.centerDialogVisible1&&this.setchannelList(e):this.ruleForm.channelList=[]},deep:!0},"ruleForm.hotelId":{handler:function(e){this.ispostion=!!e}}},filters:{fiterstatus:function(e){return 1==e?"离线":2==e?"在线":3==e?"停用":void 0}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("equip/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){var t=this;this.$http.get("equip/hotelList/"+e[0]).then(function(a){var l=[];for(var r in t.options)if(e[0]==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},getgoods:function(e){var t=this;if(this.Indnum=e,this.ruleForm.hotelId){if(this.goodslist.length<1){var a="equip/goods?hotelId="+this.ruleForm.hotelId;this.$http.get(a).then(function(e){t.goodslist=e.data})}}else this.$message.error("请先选择酒店")},handlechange:function(e){this.ruleForm.hotelId=e[1],console.log("this.ruleForm.hotelId:",this.ruleForm.hotelId)},businessTypeChange:function(e){this.ruleForm.channelList[this.Indnum].goodsId=e},handleItemChangetype:function(e){var t=this;this.$http.get("equip/goods3?typeId="+e[0]).then(function(a){if(200==a.status){var l=[];for(var r in t.optionstype)if(e[0]==t.optionstype[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,s.salePrice=a.data[i].salePrice,l.push(s)}t.optionstype[r].children=l}}})},getequiplist:function(e){var t=this;1==e&&(this.pageNum=1);var a="equipInitial?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1;var a=[].concat(w()(e.data.data));a.map(function(e){e.updateTime=e.updateTime?"20"+e.updateTime:"",e.createTime=e.createTime?"20"+e.createTime:""}),t.equiplist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getequiplist()},handleSizeChange:function(e){this.pageSize=e,this.getequiplist()},openDialog:function(e){this.centerDialogVisible=!this.centerDialogVisible},handleedit:function(e){this.getidinfo(e.id),this.openDialog(),this.actuserobj=e},getidinfo:function(e){var t=this;this.$http.get("equip/"+e).then(function(e){var a=D()({},e.data);for(var l in t.actuserobj.children=a,a.type=Number(a.type),a.channelList)a.channelList[l].status=1==a.channelList[l].status,a.channelList[l].serialNo=Number(a.channelList[l].serialNo),a.channelList[l].stock=Number(a.channelList[l].stock);a.channelList.sort(function(e,t){return e.serialNo<t.serialNo?-1:e.serialNo>t.serialNo?1:0}),a.remark=a.remark?a.remark:"",t.ruleForm=JSON.parse(E()(a)),console.log("ruleForm:",t.ruleForm)})},changestatus:function(e){var t,a=this,l=this;e.status=e.status?1:2,t={status:e.status,id:e.id},this.$http.put("equip/channel/status",t).then(function(t){if(200==t.status){for(var r in l.ruleForm.channelList)e.id==l.ruleForm.channelList[r].id&&(l.ruleForm.channelList[r].status=1==e.status);a.$message.success("修改成功")}})},proving:function(e){e.stock=e.stock.replace(/[^\.\d]/g,""),e.stock=e.stock.replace(".","")},submitForm:function(e){var t=this;this.ruleForm.roomNo&&(this.ruleForm.position=this.ruleForm.roomNo),!this.centerDialogVisible1||this.ruleForm.roomNo?this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"Formedit"==e?t.innerVisible&&t.copygoods(t.Formedit.serialNo):"ruleForm"==e&&t.savedata()}):this.$message.error("请输入所在位置")},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.remark="")},savedata:function(){var e=this,t=[],a={};for(var l in this.ruleForm)this.ruleForm[l]&&(a[l]=this.ruleForm[l]);if(this.ruleForm.channelList.length>0){var r=this.ruleForm.channelList;for(var i in r){var s={id:r[i].id,goodsId:r[i].goodsId,stock:r[i].stock};t.push(s)}}a.channelList=t,this.$http.put("equip",a).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getequiplist())})},copygoods:function(e){var t=this;e?this.$http.get("equip/copyGoods?serialNo="+e).then(function(e){var a=[].concat(w()(e.data));for(var l in a)for(var r in t.ruleForm.channelList)Number(a[l].serialNo)==Number(t.ruleForm.channelList[r].serialNo)&&(t.ruleForm.channelList[r].goodsId=a[l].goodsId,t.ruleForm.channelList[r].goodsName=a[l].goodsName);t.innerVisible=!1}):this.innerVisible=!0}},created:function(){this.getequiplist()}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FirstEquipList mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入设备编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getequiplist(1)}},model:{value:e.term.serialNo,callback:function(t){e.$set(e.term,"serialNo",t)},expression:"term.serialNo"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getequiplist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.equiplist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"==t.row.type1?"1号机":"3"==t.row.type1?"号机":""))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterstatus")(t.row.status)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"注册时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"休眠"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"==t.row.sleepFlag?"是":""))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible?a("el-dialog",{attrs:{title:"编辑设备",visible:e.centerDialogVisible,top:"1%","modal-append-to-body":!1,width:"70%",center:"","append-to-body":""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",{staticStyle:{border:"1px solid pink"}},[a("legend",[e._v("设备信息")]),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.device,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"设备状态"}},[a("el-select",{attrs:{placeholder:"请选择设备状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所在酒店",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"",prop:"hotelId"}},[a("el-cascader",{attrs:{placeholder:e.ruleForm.hotelName?e.ruleForm.hotelName:"选择所在酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"所在位置"}},[a("el-input",{attrs:{placeholder:"请输入所在位置",clearable:""},model:{value:e.ruleForm.roomNo,callback:function(t){e.$set(e.ruleForm,"roomNo",t)},expression:"ruleForm.roomNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"供电方式"}},[a("el-select",{attrs:{placeholder:"请选择供电方式"},model:{value:e.ruleForm.powerType,callback:function(t){e.$set(e.ruleForm,"powerType",t)},expression:"ruleForm.powerType"}},e._l(e.powerlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联网方式"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择联网方式"},model:{value:e.ruleForm.netType,callback:function(t){e.$set(e.ruleForm,"netType",t)},expression:"ruleForm.netType"}},e._l(e.netlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.type,expression:"ruleForm.type"}],staticStyle:{border:"1px solid pink"}},[a("legend",[e._v("货道信息")]),e._v(" "),a("el-button",{staticStyle:{margin:"10px 33px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.copygoods()}}},[e._v("复制货道信息")]),e._v(" "),e._l(e.ruleForm.channelList,function(t,l){return a("el-form-item",{key:l,attrs:{label:"货道编号"}},[a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入设备编号",type:"number",disabled:!0,clearable:""},model:{value:t.serialNo,callback:function(a){e.$set(t,"serialNo",a)},expression:"item.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"货道商品",rules:e.newrules.cheackgoods,prop:"channelList."+l+".goodsId"}},[1==e.ruleForm.type?a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择商品"},on:{change:e.businessTypeChange,focus:function(t){return e.getgoods(l)}},model:{value:t.goodsName,callback:function(a){e.$set(t,"goodsName",a)},expression:"item.goodsName"}},e._l(e.goodslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),3==e.ruleForm.type?a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择类别商品","show-all-levels":!1,options:e.optionstype,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChangetype,change:e.handlechangetype,focus:function(t){return e.getgoodstype(l)}}}):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"货道状态"}},[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t)}},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"货道库存",rules:e.newrules.cheackstock,prop:"channelList."+l+".stock"}},[a("el-input",{attrs:{placeholder:"请选择货道库存",clearable:""},nativeOn:{keyup:function(a){return e.proving(t)}},model:{value:t.stock,callback:function(a){e.$set(t,"stock",a)},expression:"item.stock"}})],1)],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"设备编号",center:"",visible:e.innerVisible,top:"2vh","append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"Formedit",staticClass:"demo-ruleForm",attrs:{model:e.Formedit,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入设备编号",oninput:"if(value.length>64)value=value.slice(0,64)",clearable:""},model:{value:e.Formedit.serialNo,callback:function(t){e.$set(e.Formedit,"serialNo",t)},expression:"Formedit.serialNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("Formedit")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("Formedit")}}},[e._v("表单重置")])],1)],1)],1)],1):e._e()],1)},staticRenderFns:[]};var Ne=a("VU/8")(xe,$e,!1,function(e){a("uVuR")},null,null).exports,Ce=function(e,t,a){(t*=1)||a(new Error("请输入房间面积")),setTimeout(function(){W()(t)?t<0?a(new Error("房间面积不应该小于0")):U()(t)?a():-1!=(t+=" ").indexOf(".")&&(t.split(".")[1].length>3?a(new Error("房间面积最多有两位小数")):a()):a(new Error("房间面积应该是一个大于数的数字"))},100)},De={name:"room_list",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,loading:!1,centerDialogVisible:!1,options:[],roomlist:[],hotellist:[],proobj:{},statuslist:[{id:1,label:"有效"},{id:2,label:"作废"}],typelist:[{id:1,label:"单人间"},{id:2,label:"标准间"},{id:3,label:"大床间"},{id:4,label:"三人间"},{id:5,label:"套间"}],actuserobj:{},term:{type:"",serialNo:"",hotelId:""},ruleForm:{area:"",hotelId:"",id:"",remark:"",serialNo:"",status:"",type:""},rules:{serialNo:[{required:!0,message:"请选择房间编号",trigger:"blur"}],area:[{required:!0,validator:Ce,trigger:"blur"}],type:[{required:!0,message:"请选择房间类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}},filters:{fiterstatus:function(e){return 1==e?"有效":"无效"},fitertype:function(e){return 1==e?"单人间":2==e?"标准间":3==e?"大床间":4==e?"三人间":5==e?"套间":"其它"}},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible){for(var e in this.ruleForm)this.ruleForm[e]="";this.actuserobj={}}}},methods:{toback:function(){this.$router.push({path:"/hotel/list",query:{}})},getarea:function(){var e=this;this.options.length<1&&this.$http.get("room/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("room/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.centerDialogVisible?this.ruleForm.hotelId=e[1]:this.term.hotelId=e[1]},getroomlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="room?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.$http.get(a).then(function(e){var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1;t.roomlist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getroomlist()},handleSizeChange:function(e){this.pageSize=e,this.getroomlist()},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=0,this.$http.put("room/status",a).then(function(e){200==e.status&&t.$message.success("修改成功")})},openDialog:function(e){this.disval=e,this.centerDialogVisible=!this.centerDialogVisible,this.ruleForm.hotelId=this.proobj.id},handleedit:function(e){this.getidinfo(e.id),this.openDialog(2),this.actuserobj=e},getidinfo:function(e){var t=this;this.$http.get("room/"+e).then(function(e){var a=e.data;for(var l in t.actuserobj.children=a,a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.remark="")},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("room",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getroomlist())}):2==this.disval&&this.$http.put("room",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getroomlist())})}},created:function(){this.$route.query&&this.$route.query.id&&(this.term.hotelId=this.$route.query.id,this.proobj=this.$route.query,console.log("proobj:",this.proobj)),this.getroomlist()}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"room_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-button",{attrs:{icon:"el-icon-d-arrow-left",circle:""},on:{click:e.toback}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入房间编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getroomlist(1)}},model:{value:e.term.serialNo,callback:function(t){e.$set(e.term,"serialNo",t)},expression:"term.serialNo"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类型"},model:{value:e.term.type,callback:function(t){e.$set(e.term,"type",t)},expression:"term.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-cascader",{attrs:{placeholder:e.$route.query.name?e.$route.query.name:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{focus:e.getarea,"active-item-change":e.handleItemChange,change:e.handlechange}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getroomlist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建房间")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roomlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"所属酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"房间编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"房间类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"area",align:"center",label:"房间面积（m2）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建房间",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"酒店名称",prop:"hotelId"}},[a("el-cascader",{attrs:{disabled:"",placeholder:e.proobj.name,"show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{focus:e.getarea,"active-item-change":e.handleItemChange,change:e.handlechange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间编号",prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入房间编号",oninput:"if(value.length>50)value=value.slice(0,50)",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间面积",prop:"area"}},[a("el-input",{attrs:{placeholder:"请输入房间面积（m2）",type:"number",oninput:"if(value.length>16)value=value.slice(0,16)",clearable:""},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择房间类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑房间",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"酒店名称",prop:"hotelId"}},[a("el-cascader",{attrs:{disabled:"",placeholder:e.proobj.name,"show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{focus:e.getarea,"active-item-change":e.handleItemChange,change:e.handlechange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间编号",prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入房间编号",oninput:"if(value.length>50)value=value.slice(0,50)",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间面积",prop:"area"}},[a("el-input",{attrs:{placeholder:"请输入房间面积（m2）",type:"number",oninput:"if(value.length>16)value=value.slice(0,16)",clearable:""},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择房间类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var Ve=a("VU/8")(De,Ie,!1,function(e){a("lV6F")},null,null).exports,ze=function(e,t,a){(t*=1)||a(new Error("请输入房间数")),setTimeout(function(){W()(t)?t<0?a(new Error("房间数不应该是小于0")):U()(t)?a():a(new Error("房间数应该是一个正整数")):a(new Error("房间数应该是一个正整数"))},100)},Se=function(e,t,a){var l=/^0\d{2,3}-?\d{7,8}$/,r=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;if(!t)return a(new Error("电话号码不能为空"));setTimeout(function(){U()(+t)?l.test(t)?a():r.test(t)?a():a(new Error("电话号码格式不正确")):a(new Error("请输入数字值"))},100)},Te={name:"hotel_list",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,loading:!1,centerDialogVisible:!1,term:{type:"",name:"",status:"",sku:""},arealist:[],hotellist:[],citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}],statuslist:[{id:1,label:"有效"},{id:2,label:"作废"}],oldlist:[{id:1,label:"是"}],typelist:[{id:1,label:"学生"},{id:2,label:"商务"},{id:3,label:"情趣"},{id:4,label:"主题"}],ruleForm:{address:"",areaId:"",contactName:"",contactTel:"",id:"",name:"",remark:"",roomNo:"",status:"",cityId:"",type:""},rules:{name:[{required:!0,message:"请输入酒店名称",trigger:"blur"}],address:[{required:!0,message:"请输入酒店地址",trigger:"blur"}],roomNo:[{required:!0,validator:ze,trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactTel:[{required:!0,validator:Se,trigger:"blur"}],cityId:[{required:!0,message:"请选择所在城市",trigger:"change"}],areaId:[{required:!0,message:"请选择所属区域",trigger:"change"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}},watch:{centerDialogVisible:function(){if(this.centerDialogVisible)this.getarealist();else{for(var e in this.ruleForm)this.ruleForm[e]&&(this.ruleForm[e]="");this.actuserobj={}}}},filters:{fiterstatus:function(e){return 1==e?"有效":"无效"},fitertype:function(e){return 1==e?"学生":2==e?"商务":3==e?"情趣":4==e?"主题":"其它"}},methods:{getarealist:function(){var e=this;this.arealist.length<1&&this.$http.get("hotel/area").then(function(t){e.arealist=t.data})},gethotellist:function(e){var t=this;1==e&&(this.pageNum=1);var a="hotel?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.$http.get(a).then(function(e){var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1,a[l].bonusStatus?a[l].bonusStatus=!0:a[l].bonusStatus=!1,a[l].freeStatus?a[l].freeStatus=!0:a[l].freeStatus=!1,a[l].universityFlag?a[l].universityFlag=!0:a[l].universityFlag=!1;t.hotellist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.gethotellist()},handleSizeChange:function(e){this.pageSize=e,this.gethotellist()},changesfree:function(e){var t=this,a={status:"",id:e.id};a.status=e.freeStatus?1:0,this.$http.put("hotel/freeStatus",a).then(function(e){200==e.status&&(t.$message.success("修改成功"),t.gethotellist())})},changeschool:function(e){var t=this,a={status:"",id:e.id};a.status=e.universityFlag?1:0,this.$http.put("hotel/universityFlag",a).then(function(e){200==e.status&&(t.$message.success("修改成功"),t.gethotellist())})},changesbonus:function(e){var t=this,a={status:"",id:e.id};a.status=e.bonusStatus?1:0,this.$http.put("hotel/bonusStatus",a).then(function(e){200==e.status&&(t.$message.success("修改成功"),t.gethotellist())})},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=0,this.$http.put("hotel/status",a).then(function(e){200==e.status&&(t.$message.success("修改成功"),t.gethotellist())})},openDialog:function(e){this.disval=e,this.centerDialogVisible=!this.centerDialogVisible},handleedit:function(e){this.getidinfo(e.id),this.openDialog(2),this.actuserobj=e},handleroom:function(e){this.$router.push({path:"/hotel/room/list",query:e})},getidinfo:function(e){var t=this;this.$http.get("hotel/"+e).then(function(e){var a=e.data;for(var l in a.type=Number(a.type),a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):(this.$refs[e].resetFields(),this.ruleForm.remark="")},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("hotel",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.gethotellist())}):2==this.disval&&this.$http.put("hotel",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.gethotellist())})}},created:function(){this.gethotellist()}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hotel_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.gethotellist(1)}},model:{value:e.term.name,callback:function(t){e.$set(e.term,"name",t)},expression:"term.name"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类型"},model:{value:e.term.type,callback:function(t){e.$set(e.term,"type",t)},expression:"term.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类型"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.name,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.gethotellist(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建酒店")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.hotellist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",align:"center",label:"酒店地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactName",align:"center",label:"联系人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactTel",align:"center",label:"联系电话",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),"manager_role"==e.$store.state.userInfo.role?a("el-table-column",{attrs:{align:"center",label:"高校",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changeschool(t.row)}},model:{value:t.row.universityFlag,callback:function(a){e.$set(t.row,"universityFlag",a)},expression:"scope.row.universityFlag"}})]}}],null,!1,4062545961)}):e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"红包",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changesbonus(t.row)}},model:{value:t.row.bonusStatus,callback:function(a){e.$set(t.row,"bonusStatus",a)},expression:"scope.row.bonusStatus"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建酒店",visible:e.centerDialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"酒店名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入酒店名称",maxlength:"100",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店地址",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入酒店地址",maxlength:"200",clearable:""},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间数"}},[a("el-input",{attrs:{placeholder:"请输入房间数",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.roomNo,callback:function(t){e.$set(e.ruleForm,"roomNo",t)},expression:"ruleForm.roomNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{attrs:{placeholder:"请输入联系人",maxlength:"10",clearable:""},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.contactTel,callback:function(t){e.$set(e.ruleForm,"contactTel",t)},expression:"ruleForm.contactTel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在城市",prop:"cityId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择所在城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域",prop:"areaId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择所属区域"},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择酒店类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑酒店",visible:e.centerDialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"酒店名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入酒店名称",maxlength:"100",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店地址",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入酒店地址",maxlength:"200",clearable:""},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间数"}},[a("el-input",{attrs:{placeholder:"请输入房间数",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.roomNo,callback:function(t){e.$set(e.ruleForm,"roomNo",t)},expression:"ruleForm.roomNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{attrs:{placeholder:"请输入联系人",maxlength:"10",clearable:""},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)",clearable:""},model:{value:e.ruleForm.contactTel,callback:function(t){e.$set(e.ruleForm,"contactTel",t)},expression:"ruleForm.contactTel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在城市",prop:"cityId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择所在城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域",prop:"areaId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择所属区域"},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择酒店类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var Ee=a("VU/8")(Te,qe,!1,function(e){a("YxEw")},null,null).exports,Le={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mainboss"},[t("img",{attrs:{src:a("BbT8"),alt:""}})])}]},je=a("VU/8")(null,Le,!1,null,null,null).exports,Oe={name:"replenish_list",data:function(){return{userinfo:{},total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,centerDialogVisible:!1,term:{goodsId:"",hotelId:"",hotelName:""},dialist:[],options:[],goodstype:[],goodslist:[],orderlist:[]}},watch:{centerDialogVisible:function(){this.centerDialogVisible||(this.dialist=[])}},filters:{filterhour:function(e){return parseInt(e/24)+"天 "+parseInt(e%24)+"小时"}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("replenishOrder/areaList").then(function(t){if(200==t.status){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a}})},handleItemChange:function(e){var t=this;this.$http.get("replenishOrder/hotelList/"+e[0]).then(function(a){var l=[];for(var r in t.options)if(e[0]==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},getgoodstype:function(){var e=this;this.goodstype.length<1&&this.$http.get("replenishOrder/type").then(function(t){if(200==t.status){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.goodstype=a}console.log("goodstype:",e.goodstype)})},handletypeChange:function(e){var t=this;this.$http.get("replenishOrder/goods?typeId="+e[0]).then(function(a){var l=[];for(var r in t.goodstype)if(e[0]==t.goodstype[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.goodstype[r].children=l}})},handlechangetype:function(e){this.term.goodsId=e[1]},getreplenishOrder:function(e){var t=this;1==e&&(this.pageNum=1);var a="replenishOrder?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,t.total=e.data.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.orderlist=[]):t.orderlist=e.data.data})},handleCurrentChange:function(e){this.pageNum=e,this.getreplenishOrder()},handleSizeChange:function(e){this.pageSize=e,this.getreplenishOrder()},orderDetail:function(e){var t=this,a="replenishOrder/"+e.hotelId+"/"+e.goodsId;this.$http.get(a).then(function(e){t.centerDialogVisible=!t.centerDialogVisible,t.dialist=e.data})}},created:function(){this.userinfo=this.$store.state.userInfo,this.getreplenishOrder()}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"replenish_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},["1"==e.userinfo.type?a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}):e._e(),e._v(" "),a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenishOrder(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-cascader",{attrs:{placeholder:"请选择商品","show-all-levels":!1,options:e.goodstype,filterable:"",clearable:""},on:{"active-item-change":e.handletypeChange,change:e.handlechangetype,focus:e.getgoodstype}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getreplenishOrder(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orderlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsNo",align:"center",label:"待补货数量"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.orderDetail(t.row)}}},[e._v("补货单详情")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"酒店补货单详情",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"70%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dialist,border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"货柜设备编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"待补货货道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"待补货商品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salePrice",align:"center",label:"商品价格（单位：元）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"累计缺货时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterhour")(t.row.hour)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"缺货起始时间"}})],1)],1)],1)},staticRenderFns:[]};var Ae=a("VU/8")(Oe,He,!1,function(e){a("sV1e")},"data-v-5839759c",null).exports,Re={name:"queryOrderSummary",data:function(){return{userinfo:{},total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{cityId:"",areaId:"",hotelName:"",startTime:"",endTime:"",payway:""},options:[],arealist:[],saleslist:[],citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}],paywaylist:[{id:3,label:"微信支付"},{id:2,label:"支付宝支付"}]}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("sales/areaList").then(function(t){var a=[];for(var l in e.arealist=t.data,t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("sales/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},searchBlur:function(e){this.term.payway=e.target.value},getsales:function(e){var t=this,a={},l="",r=this;if(1==e&&(this.pageNum=1),this.term.startTime&&this.term.endTime){var i=Number(this.term.startTime.getTime()),s=Number(this.term.endTime.getTime());if(i>s)return this.term.endTime="",void this.$message.error("开始时间不得大于结束时间");if(s-i>7776e6)return this.term.endTime="",void this.$message.error("开始时间与结束时间间隔不得大于90天");for(var o in a=D()({},this.term),this.term.startTime&&(a.startTime=this.Until.changDage(this.term.startTime)),this.term.endTime&&(a.endTime=this.Until.changDage(this.term.endTime)),l="sales?",a)a[o]&&(l+="&"+o+"="+a[o]);this.loading=!0,this.$http.get(l).then(function(e){t.loading=!1,200==e.status&&(e.data.length>0?(t.total=e.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.saleslist=[]):(e.data[0].name="本页合计",setTimeout(function(){r.saleslist=e.data},200))):(t.$message("没有查询到相关数据信息"),t.saleslist=[]))})}else this.$message("请选择时间")},handleCurrentChange:function(e){this.pageNum=e,this.getsales()},handleSizeChange:function(e){this.pageSize=e,this.getsales()}},created:function(){this.userinfo=this.$store.state.userInfo;var e=new Date,t=this.Until.changDage(new Date).split(" ")[0].split("-"),a=t[0]+"-"+t[1]+"-1 00:00:00";e.setTime(new Date(a).getTime()),this.term.startTime=e;var l=new Date;l.setTime(l.getTime()),this.term.endTime=l,this.getsales()}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"queryOrderSummary mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.term.cityId,callback:function(t){e.$set(e.term,"cityId",t)},expression:"term.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),"1"==e.userinfo.type?a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择区域"},on:{focus:e.getarea},model:{value:e.term.areaId,callback:function(t){e.$set(e.term,"areaId",t)},expression:"term.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),"1"==e.userinfo.type?a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getsales(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}):e._e(),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择支付方式"},on:{blur:e.searchBlur},model:{value:e.term.payway,callback:function(t){e.$set(e.term,"payway",t)},expression:"term.payway"}},e._l(e.paywaylist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-date-picker",{class:"2"==e.userinfo.type?"jd-input":"",attrs:{type:"datetime",placeholder:"开始时间",align:"right"},model:{value:e.term.startTime,callback:function(t){e.$set(e.term,"startTime",t)},expression:"term.startTime"}}),e._v(" "),a("el-date-picker",{class:"2"==e.userinfo.type?"jd-input":"",attrs:{type:"datetime",placeholder:"结束时间",align:"right"},model:{value:e.term.endTime,callback:function(t){e.$set(e.term,"endTime",t)},expression:"term.endTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.saleslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"销售额(元)"}})],1)],1)},staticRenderFns:[]};var Be=a("VU/8")(Re,Pe,!1,function(e){a("9e5F")},null,null).exports,Ue={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mainboss"},[t("img",{attrs:{src:a("BbT8"),alt:""}})])}]},Me=a("VU/8")(null,Ue,!1,null,null,null).exports,We={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mainboss"},[t("img",{attrs:{src:a("BbT8"),alt:""}})])}]},Ye=a("VU/8")(null,We,!1,null,null,null).exports,Ze={name:"order_list",data:function(){return{total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,centerDialogVisible:!1,term:{hotelName:"",hotelId:"",status:"",payway:""},options:[],dialist:[],statuslist:[{id:1,label:"待支付"},{id:2,label:"已支付"},{id:3,label:"作废"}],paywaylist:[{id:3,label:"微信支付"},{id:2,label:"支付宝支付"}],orderlist:[]}},watch:{centerDialogVisible:function(){this.centerDialogVisible||(this.dialist=[])}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("order/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("order/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},searchBlur:function(e){this.term.payway=e.target.value},handlechange:function(e){this.term.hotelId=e[1]},getorderlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="order?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.orderlist=[];else{var a=[].concat(w()(e.data.data));t.orderlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getorderlist()},handleSizeChange:function(e){this.pageSize=e,this.getorderlist()},orderDetail:function(e){var t=this;this.$http.get("order/"+e.id).then(function(e){t.centerDialogVisible=!t.centerDialogVisible,t.dialist=e.data})}},created:function(){this.getorderlist()}},Xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getorderlist(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.statuslist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择支付方式"},on:{blur:e.searchBlur},model:{value:e.term.payway,callback:function(t){e.$set(e.term,"payway",t)},expression:"term.payway"}},e._l(e.paywaylist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getorderlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orderlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"销售设备"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTime",align:"center",label:"下单时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"1"===t.row.payway||"4"===t.row.payway||"3"===t.row.payway?"success":"","disable-transitions":""}},[e._v(e._s("1"===t.row.payway||"4"===t.row.payway||"3"===t.row.payway?"微信支付":"支付宝支付"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"优惠名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.activityName))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payTime",align:"center",label:"支付时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.status?"待支付":"2"===t.row.status?"已支付":"作废"))]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.orderDetail(t.row)}}},[e._v("订单明细")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"订单详情",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dialist,border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salePrice",align:"center",label:"销售价格"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"销售货道"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("货道"+e._s(t.row.channelNo))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"num",align:"center",label:"销售数量"}})],1)],1)],1)},staticRenderFns:[]};var Ke=a("VU/8")(Ze,Xe,!1,function(e){a("AK5F")},null,null).exports,Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"record mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-cascader",{attrs:{placeholder:"选择类别商品","show-all-levels":!1,options:e.types,filterable:"",clearable:""},on:{"active-item-change":e.handlegoodsChange,change:e.handlegoods,focus:e.gettype}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择支付方式"},on:{blur:e.searchBlur},model:{value:e.term.payway,callback:function(t){e.$set(e.term,"payway",t)},expression:"term.payway"}},e._l(e.paywaylist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getrecord(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.recordlist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",align:"center",label:"所在位置"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"销售时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("20"+e._s(t.row.createTime))]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Qe=a("VU/8")({name:"record",data:function(){return{total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{goodsId:"",payway:"",hotelId:""},types:[],options:[],recordlist:[],paywaylist:[{id:3,label:"微信支付"},{id:2,label:"支付宝支付"}]}},methods:{searchBlur:function(e){this.term.payway=e.target.value},getarea:function(){var e=this;this.options.length<1&&this.$http.get("orderDetail/area").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){var t=this;this.$http.get("orderDetail/hotel?areaId="+e[0]).then(function(a){var l=[];for(var r in t.options)if(e[0]==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},gettype:function(){var e=this;this.types.length<1&&this.$http.get("orderDetail/type").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.types=a})},handlegoodsChange:function(e){var t=this;this.$http.get("orderDetail/goods?typeId="+e[0]).then(function(a){var l=[];for(var r in t.types)if(e[0]==t.types[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.types[r].children=l}})},handlegoods:function(e){this.term.goodsId=e[1]},getrecord:function(e){var t=this;1==e&&(this.pageNum=1);var a="orderDetail?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,200==e.status&&(t.total=e.data.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.recordlist=[]):t.recordlist=e.data.data)})},handleCurrentChange:function(e){this.pageNum=e,this.getrecord()},handleSizeChange:function(e){this.pageSize=e,this.getrecord()}},created:function(){this.getrecord()}},Ge,!1,function(e){a("dhi4")},null,null).exports,Je={name:"storeloglist",data:function(){return{total:0,pageNum:1,pageSize:10,term:{equipNo:"",hotelName:"",status:""},status:[{id:1,label:"成功"},{id:2,label:"失败"},{id:3,label:"离线"},{id:4,label:"异常"},{id:6,label:"已开"}],loglist:[]}},filters:{fiterstatus:function(e){return 1==e?"成功":2==e?"失败":3==e?"离线":4==e?"异常":6==e?"已开":void 0},fitertype:function(e){return 1==e?"开门":11==e?"重试1":12==e?"重试2":13==e?"重试3":14==e?"重试4":void 0}},methods:{getloglist:function(e){var t=this;1==e&&(this.pageNum=1);var a="openLog?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.loglist=[];else{var a=[].concat(w()(e.data.data));a.map(function(e){e.createTime="20"+e.createTime}),t.loglist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getloglist()},handleSizeChange:function(e){this.pageSize=e,this.getloglist()}},created:function(){this.getloglist()}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"door mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入设备编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.equipNo,callback:function(t){e.$set(e.term,"equipNo",t)},expression:"term.equipNo"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.status,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getloglist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.loglist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"货道号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterstatus")(t.row.status)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作时间"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var tt=a("VU/8")(Je,et,!1,function(e){a("q9Y/")},null,null).exports,at={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{attrs:{src:a("BbT8"),alt:""}})])}]},lt=a("VU/8")(null,at,!1,null,null,null).exports,rt={name:"apply_list",data:function(){return{total:0,pageNum:1,pageSize:10,supplierName:"",centerDialogVisible:!1,ruleForm:{hotelId:""},rules:{hotelId:[{required:!0,message:"请选择酒店",trigger:"change"}]},term:{hotelId:"",trueName:"",userNmae:"",status:0},replenisherlist:[],options:[],seloptions:[],hotellist:[]}},watch:{centerDialogVisible:function(){this.centerDialogVisible||(this.seloptions=[],this.ruleForm.hotelId="")}},methods:{getarea:function(){var e=this;this.options.length<1?this.$http.get("store/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a,e.seloptions=a}):this.seloptions=this.options},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("replenisher/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.centerDialogVisible?this.ruleForm.hotelId=e[1]:this.term.hotelId=e[1]},getreplenisherlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="/replenisher/apply?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,200==e.status)if(t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.replenisherlist=[];else{var a=[].concat(w()(e.data.data));a.map(function(e){e.createTime="20"+e.createTime}),t.replenisherlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getreplenisherlist()},handleSizeChange:function(e){this.pageSize=e,this.getreplenisherlist()},openDialog:function(e){this.centerDialogVisible=!0},handlebut:function(e){for(var t in e)this.ruleForm[t]=e[t];this.ruleForm.hotelId="",this.centerDialogVisible=!0},handleby:function(){var e=this;if(this.ruleForm.hotelId){var t={id:this.ruleForm.id,hotelId:this.ruleForm.hotelId};this.$http.put("replenisher/update",t).then(function(t){e.$message.success("操作成功"),e.getreplenisherlist(),e.centerDialogVisible=!1})}else this.$message.error("请选择酒店绑定")},handlerefuse:function(){var e=this;this.$confirm("拒绝审批会删除未通过的数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("replenisher/"+e.ruleForm.id).then(function(t){e.$message.success("操作成功"),e.getreplenisherlist(),e.centerDialogVisible=!1})}).catch(function(){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.handleby()})},resetForm:function(e){this.ruleForm.hotelId=""}},created:function(){this.getreplenisherlist()}},it={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apply_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入联系方式",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.username,callback:function(t){e.$set(e.term,"username",t)},expression:"term.username"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getreplenisherlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.replenisherlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"!=t.row.status,expression:"scope.row.status!='1'"}],attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlebut(t.row)}}},[e._v("审批")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"审批",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.trueName,callback:function(t){e.$set(e.ruleForm,"trueName",t)},expression:"ruleForm.trueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定酒店"}},[a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.seloptions,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleby}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.handlerefuse}},[e._v("拒绝")])],1)],1)],1)],1)},staticRenderFns:[]};var st=a("VU/8")(rt,it,!1,function(e){a("rWkr")},null,null).exports,ot={name:"apply_part",data:function(){return{total:0,pageNum:1,pageSize:10,supplierName:"",centerDialogVisible:!1,ruleForm:{hotelId:""},rules:{hotelId:[{required:!0,message:"请选择酒店",trigger:"change"}]},term:{hotelId:"",username:"",trueName:"",status:"1"},replenisherlist:[],options:[],hotellist:[]}},watch:{centerDialogVisible:function(){this.centerDialogVisible||(this.ruleForm.hotelId="")}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("store/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("store/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.centerDialogVisible?this.ruleForm.hotelId=e[1]:this.term.hotelId=e[1]},getreplenisherlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="/replenisher?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到数据信息"),t.replenisherlist=[];else{var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1,a[l].createTime="20"+a[l].createTime;t.replenisherlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getreplenisherlist()},handleSizeChange:function(e){this.pageSize=e,this.getreplenisherlist()},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=0,this.$http.put("replenisher/status",a).then(function(e){200==e.status&&t.$message.success("操作成功")})},openDialog:function(e){this.centerDialogVisible=!0},handlebut:function(e){for(var t in e)this.ruleForm[t]=e[t];this.centerDialogVisible=!0},handleby:function(){var e=this,t={id:this.ruleForm.id};this.ruleForm.hotelId&&(t.hotelId=this.ruleForm.hotelId),this.$http.put("replenisher/update",t).then(function(t){e.$message.success("操作成功"),e.getreplenisherlist(),e.centerDialogVisible=!1})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.handleby()})},resetForm:function(e){this.ruleForm.hotelId=""}},created:function(){this.getreplenisherlist()}},nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apply_part mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入联系方式",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.username,callback:function(t){e.$set(e.term,"username",t)},expression:"term.username"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getreplenisherlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.replenisherlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlebut(t.row)}}},[e._v("酒店分配")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"分配酒店",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.trueName,callback:function(t){e.$set(e.ruleForm,"trueName",t)},expression:"ruleForm.trueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.hotelName,expression:"ruleForm.hotelName"}],attrs:{label:"酒店名称"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.hotelName,callback:function(t){e.$set(e.ruleForm,"hotelName",t)},expression:"ruleForm.hotelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新绑定酒店",prop:"hotelId"}},[a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1)],1)},staticRenderFns:[]};var ut=a("VU/8")(ot,nt,!1,function(e){a("0R78")},null,null).exports,ct={name:"apply_log",data:function(){return{pageNum:1,pageSize:10,total:0,loading:!1,loglist:[],status:[{id:1,label:"成功"},{id:2,label:"失败"},{id:3,label:"离线"},{id:4,label:"异常"},{id:6,label:"已开"}],term:{equipNo:"",username:"",trueName:"",status:""}}},filters:{fiterstatus:function(e){return 1==e?"成功":2==e?"失败":3==e?"离线":4==e?"异常":6==e?"已开":void 0},fitertype:function(e){return 1==e?"开门":2==e?"补货":11==e?"重试1":12==e?"重试2":13==e?"重试3":14==e?"重试4":void 0}},methods:{getloglist:function(e){var t=this;1==e&&(this.pageNum=1);var a="/replenishLog?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,200==e.status)if(t.total=e.data.total,e.data.data.length>0){var a=[].concat(w()(e.data.data));a.map(function(e){e.createTime="20"+e.createTime}),t.loglist=a}else t.loglist=[]})},handleCurrentChange:function(e){this.pageNum=e,this.getloglist()},handleSizeChange:function(e){this.pageSize=e,this.getloglist()}},created:function(){this.getloglist()}},mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apply_log mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入设备编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.equipNo,callback:function(t){e.$set(e.term,"equipNo",t)},expression:"term.equipNo"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入操作人姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-input",{attrs:{type:"number",placeholder:"请输入操作人手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.username,callback:function(t){e.$set(e.term,"username",t)},expression:"term.username"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.status,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getloglist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.loglist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"货道号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterstatus")(t.row.status)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var dt=a("VU/8")(ct,mt,!1,function(e){a("25XN")},null,null).exports,pt={name:"apply_warning",data:function(){return{total:0,pageNum:1,pageSize:10,centerDialogVisible:!1,term:{hotelId:""},options:[],detailslist:[],replenisherlist:[]}},filters:{fiterdate:function(e){var t=parseInt(e/24),a=parseInt(e%24);return t?t+"天"+a+"小时":a+"小时"}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("replenishWarn/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("replenishWarn/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},getreplenishWarn:function(e){var t=this;1==e&&(this.pageNum=1);var a="/replenishWarn/list?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到数据信息"),t.replenisherlist=[];else{var a=e.data.data;t.replenisherlist=a}})},getdetails:function(e){var t=this;this.$http.get("replenishWarn/details?equipId="+e).then(function(e){var a=e.data;t.detailslist=a})},handleCurrentChange:function(e){this.pageNum=e,this.getreplenishWarn()},handleSizeChange:function(e){this.pageSize=e,this.getreplenishWarn()},openDialog:function(e){this.centerDialogVisible=!0},handlebut:function(e){this.getdetails(e.equipId),this.centerDialogVisible=!0}},created:function(){this.getreplenishWarn()}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apply_warning mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getreplenishWarn(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.replenisherlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomeNo",align:"center",label:"房间号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"缺货时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterdate")(t.row.hour)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-menu"},on:{click:function(a){return e.handlebut(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"预警详情",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.detailslist,border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"货道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"缺货时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterdate")(t.row.hour)))]}}])})],1)],1)],1)},staticRenderFns:[]};var gt=a("VU/8")(pt,ht,!1,function(e){a("JiAK")},null,null).exports,ft={name:"operation_list",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,supplierName:"",isarea:!0,isrole:!0,centerDialogVisible:!1,ruleForm:{areaId:"",roleId:""},rules:{areaId:[{required:!0,message:"请选择酒店",trigger:"change"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}]},term:{trueName:"",userNmae:"",areaId:"",status:0},rolelist:[],arealist:[],types:[{id:1,label:"运营"},{id:2,label:"厂商"}],statuslist:[{id:1,label:"已审批"},{id:0,label:"未审批"}],operatorlist:[]}},filters:{fitercityId:function(e){return 1==e?"武汉":2==e?"长沙":void 0}},watch:{"ruleForm.roleId":function(){"9"===this.ruleForm.roleId||"10"===this.ruleForm.roleId?(this.isarea=!0,this.isrole=!0):(this.isarea=!1,this.isrole=!1,this.ruleForm.areaId="")},"ruleForm.areaId":function(e){this.ruleForm.areaId?this.isarea=!1:this.isrole?this.isarea=!0:this.isarea=!1},centerDialogVisible:function(){this.centerDialogVisible||(this.ruleForm.areaId="")}},methods:{getarealist:function(){var e=this;this.arealist.length<1&&this.$http.get("operator/hotelList").then(function(t){e.arealist=t.data})},getrolelist:function(){var e=this;this.rolelist.length<1&&this.$http.get("operator/role").then(function(t){e.rolelist=t.data})},getoperatorlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="operator/apply?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.operatorlist=[];else{var a=[].concat(w()(e.data.data));a.map(function(e){e.createTime=e.createTime?"20"+e.createTime:""}),t.operatorlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getoperatorlist()},handleSizeChange:function(e){this.pageSize=e,this.getoperatorlist()},openDialog:function(e){this.disval=e,this.centerDialogVisible=!0},handlebut:function(e,t){for(var a in this.disval=t,e)this.ruleForm[a]=e[a];this.getarealist(),this.getrolelist(),2==t&&(this.ruleForm.areaId=""),this.centerDialogVisible=!0},handleby:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);this.isarea?this.$message.error("请选择绑定区域"):this.$http.put("operator/update",t).then(function(t){e.$message.success("操作成功"),e.getoperatorlist(),e.centerDialogVisible=!1})},handlerefuse:function(){var e=this;this.$confirm("拒绝审批通过会删除未通过的数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("operator/"+e.ruleForm.id).then(function(t){e.$message.success("操作成功"),e.getoperatorlist(),e.centerDialogVisible=!1})}).catch(function(){})},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1})},resetForm:function(e){this.ruleForm.areaId=""}},created:function(){this.getoperatorlist()}},bt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation_list mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入申请人姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-input",{attrs:{type:"number",placeholder:"请输入申请人手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.username,callback:function(t){e.$set(e.term,"username",t)},expression:"term.username"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getoperatorlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.operatorlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{align:"center",label:"城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitercityId")(t.row.cityId)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlebut(t.row,1)}}},[e._v("审批")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"审批",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.trueName,callback:function(t){e.$set(e.ruleForm,"trueName",t)},expression:"ruleForm.trueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定角色",prop:"roleId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择角色"},model:{value:e.ruleForm.roleId,callback:function(t){e.$set(e.ruleForm,"roleId",t)},expression:"ruleForm.roleId"}},e._l(e.rolelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定区域",prop:e.isarea?"areaId":""}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择酒店",disabled:!e.isrole},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleby}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.handlerefuse}},[e._v("拒绝")])],1)],1)],1)],1)},staticRenderFns:[]};var vt=a("VU/8")(ft,bt,!1,function(e){a("QBu0")},null,null).exports,yt={name:"operation_part",data:function(){return{total:0,pageNum:1,pageSize:10,supplierName:"",isarea:!0,isrole:!0,centerDialogVisible:!1,ruleForm:{areaId:"",roleId:""},rules:{areaId:[{required:!0,message:"请选择区域",trigger:"change"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}]},term:{trueName:"",username:"",areaId:""},operatorlist:[],rolelist:[],arealist:[]}},filters:{fitercityId:function(e){return 1==e?"武汉":2==e?"长沙":void 0}},watch:{"ruleForm.roleId":function(){"9"===this.ruleForm.roleId||"10"===this.ruleForm.roleId?(this.isarea=!0,this.isrole=!0):(this.isarea=!1,this.isrole=!1,this.ruleForm.areaId="")},"ruleForm.areaId":function(e){console.log("val:",e),this.ruleForm.areaId?this.isarea=!1:this.isrole?this.isarea=!0:this.isarea=!1},centerDialogVisible:function(){this.centerDialogVisible||(this.ruleForm.areaId="",this.ruleForm.roleId="")}},methods:{getarealist:function(){var e=this;this.arealist.length<1&&this.$http.get("operator/hotelList").then(function(t){e.arealist=t.data})},getrolelist:function(){var e=this;this.rolelist.length<1&&this.$http.get("operator/role").then(function(t){e.rolelist=t.data})},getoperatorlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="operator?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.operatorlist=[];else{var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1,a[l].createTime="20"+a[l].createTime;t.operatorlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getoperatorlist()},handleSizeChange:function(e){this.pageSize=e,this.getoperatorlist()},changestatus:function(e){var t=this,a={status:"",id:e.id};e.status?a.status=1:a.status=2,this.$http.put("operator/status",a).then(function(e){200==e.status&&t.$message.success("操作成功")})},openDialog:function(e){this.centerDialogVisible=!0},handlebut:function(e){var t=this;for(var a in this.getarealist(),this.getrolelist(),e)this.ruleForm[a]=e[a];this.arealist.length>1?(this.fparea(e),this.fprole(e)):setTimeout(function(){t.fparea(e),t.fprole(e)},500)},fparea:function(e){for(var t in this.arealist)e.areaName==this.arealist[t].name&&(this.ruleForm.areaId=this.arealist[t].id);this.centerDialogVisible=!0},fprole:function(e){for(var t in this.rolelist)e.roleName==this.rolelist[t].name&&(this.ruleForm.roleId=this.rolelist[t].id);this.centerDialogVisible=!0},handleby:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);this.isarea?this.$message.error("请选择绑定区域"):this.$http.put("operator/update",t).then(function(t){e.$message.success("操作成功"),e.getoperatorlist(),e.centerDialogVisible=!1})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.handleby()})},resetForm:function(e){}},created:function(){this.getoperatorlist()}},_t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation_part mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择区域"},on:{focus:e.getarealist},model:{value:e.term.areaId,callback:function(t){e.$set(e.term,"areaId",t)},expression:"term.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入联系方式",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.username,callback:function(t){e.$set(e.term,"username",t)},expression:"term.username"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getoperatorlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.operatorlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{align:"center",label:"城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitercityId")(t.row.cityId)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",align:"center",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",align:"center",label:"所属区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.status,type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlebut(t.row)}}},[e._v("修改")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"分配区域",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.trueName,callback:function(t){e.$set(e.ruleForm,"trueName",t)},expression:"ruleForm.trueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定角色",prop:"roleId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择角色"},model:{value:e.ruleForm.roleId,callback:function(t){e.$set(e.ruleForm,"roleId",t)},expression:"ruleForm.roleId"}},e._l(e.rolelist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定区域",prop:e.isarea?"areaId":""}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择酒店",disabled:!e.isrole},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1)],1)},staticRenderFns:[]};var Ft=a("VU/8")(yt,_t,!1,function(e){a("bHAc")},null,null).exports,kt={name:"operation_log",data:function(){return{pageNum:1,pageSize:10,total:0,loading:!1,loglist:[],term:{equipNo:"",username:"",trueName:"",type:"",status:""},status:[{id:1,label:"成功"},{id:2,label:"失败"},{id:3,label:"离线"},{id:4,label:"异常"},{id:6,label:"已开"}],types:[{id:1,label:"开门"},{id:0,label:"初次补货"},{id:2,label:"补货"}]}},filters:{fiterstatus:function(e){return 1==e?"成功":2==e?"失败":3==e?"离线":4==e?"异常":6==e?"已开":void 0},fitertype:function(e){return 1==e?"开门":0==e?"初次补货":2==e?"补货":void 0}},methods:{getloglist:function(e){var t=this;1==e&&(this.pageNum=1);var a="/operationLog?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,200==e.status)if(t.total=e.data.total,e.data.data.length>0){var a=[].concat(w()(e.data.data));a.map(function(e){e.createTime="20"+e.createTime}),t.loglist=a}else t.loglist=[]})},handleCurrentChange:function(e){this.pageNum=e,this.getloglist()},handleSizeChange:function(e){this.pageSize=e,this.getloglist()}},created:function(){this.getloglist()}},wt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation_log mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入设备编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.equipNo,callback:function(t){e.$set(e.term,"equipNo",t)},expression:"term.equipNo"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入操作人姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入操作人手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.username,callback:function(t){e.$set(e.term,"username",t)},expression:"term.username"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类型"},model:{value:e.term.type,callback:function(t){e.$set(e.term,"type",t)},expression:"term.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择状态"},model:{value:e.term.status,callback:function(t){e.$set(e.term,"status",t)},expression:"term.status"}},e._l(e.status,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getloglist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.loglist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"货道号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterstatus")(t.row.status)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话",width:"170"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var xt=a("VU/8")(kt,wt,!1,function(e){a("IRxy")},null,null).exports,$t={name:"operation_role",data:function(){return{rolelist:[],menulist:[],disval:1,total:0,pageNum:1,pageSize:10,loading:!1,DialogVisible:!1,centerDialogVisible:!1,actuserobj:{},ruleForm:{id:"",name:"",remark:"",code:"",status:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],code:[{required:!0,message:"请输入角色id",trigger:"blur"}],remark:[{required:!0,message:"请输入角色说明",trigger:"blur"}]}}},methods:{getlist:function(){var e=this,t="operatorRole?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.loading=!0,this.$http.get(t).then(function(t){if(e.loading=!1,e.total=t.data.total,t.data.total<1)e.$message("没有查询到相关数据信息"),e.rolelist=[];else{var a=[].concat(w()(t.data.data));for(var l in a)1==a[l].status?a[l].status=!0:2==a[l].status&&(a[l].status=!1);e.rolelist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},openDialog:function(e){if(1==e)for(var t in this.actuserobj={},this.ruleForm)this.ruleForm[t]="";this.disval=e||"",this.centerDialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):this.$refs[e].resetFields()},changestatus:function(e){var t,a=this;t={status:e.status?1:2,id:e.id},this.$http.put("operatorRole/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},savedata:function(){var e=this,t={};for(var a in this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("operatorRole",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getlist())}):2==this.disval&&this.$http.put("operatorRole",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getlist())})},handleedit:function(e){this.actuserobj=e,this.getidinfo(e.id)},handlemenu:function(e){this.DialogVisible=!0,this.actuserobj=e,this.getrolemenu(e)},getidinfo:function(e){var t=this;this.$http.get("operatorRole/"+e).then(function(e){if(200==e.status){t.openDialog(2);var a=D()({},e.data);for(var l in a.remark=a.remark?a.remark:"",a.code=a.code?a.code:"",a)t.ruleForm[l]=a[l]}})},getrolemenu:function(e){var t=this;this.$http.get("operatorRole/permission?id="+e.id).then(function(e){if(200==e.status){var a=[].concat(w()(e.data));for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1;t.menulist=a}})},saverole:function(){var e=this,t=[];for(var a in this.menulist)this.menulist[a].status&&t.push(this.menulist[a].id);if(t.length<1)this.$message.error("请至少选择一个选项");else{var l={roleId:this.actuserobj.id,permission:t};this.$http.put("operatorRole/permission",l).then(function(t){e.$message.success("保存成功"),e.DialogVisible=!e.DialogVisible})}}},created:function(){this.getlist()}},Nt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation_role mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建角色")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rolelist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"角色状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"角色说明"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",align:"center",label:"角色code"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){return e.handlemenu(t.row)}}},[e._v("菜单")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible?a("el-dialog",{attrs:{title:1==e.disval?"创建角色":"编辑角色",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色说明",prop:"remark"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色code",prop:"code"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"分配权限",visible:e.DialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[a("ul",{staticClass:"diaul"},[e._l(e.menulist,function(t){return a("li",{key:t.id},[a("el-checkbox",{attrs:{label:t.status},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v(e._s(t.name))])],1)}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saverole}},[e._v("保存")])],2)])],1)},staticRenderFns:[]};var Ct=a("VU/8")($t,Nt,!1,function(e){a("Rxqz")},"data-v-a3e56570",null).exports,Dt={name:"operation_permission",data:function(){return{permissionlist:[],disval:1,total:0,pageNum:1,pageSize:10,loading:!1,centerDialogVisible:!1,ruleForm:{id:"",icon:"",name:"",sort:"",code:"",url:""},rules:{name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],code:[{required:!0,message:"请输入权限code",trigger:"blur"}],sort:[{required:!0,message:"请输入权限sort",trigger:"blur"}],url:[{required:!0,message:"请输入权限url",trigger:"blur"}],icon:[{required:!0,message:"请输入权限icon",trigger:"blur"}]}}},methods:{getlist:function(){var e=this,t="operatorPermission?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.loading=!0,this.$http.get(t).then(function(t){if(e.loading=!1,e.total=t.data.total,t.data.total<1)e.$message("没有查询到相关数据信息"),e.permissionlist=[];else{var a=[].concat(w()(t.data.data));for(var l in a.sort(e.Until.compare("score",2)),a)1==a[l].status?a[l].status=!0:2==a[l].status&&(a[l].status=!1);e.permissionlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},openDialog:function(e){if(1==e)for(var t in this.actuserobj={},this.ruleForm)this.ruleForm[t]="";this.disval=e||"",this.centerDialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},resetForm:function(e){this.actuserobj&&this.actuserobj.id?this.getidinfo(this.actuserobj.id):this.$refs[e].resetFields()},savedata:function(){var e=this,t="operatorPermission",a={};for(var l in this.ruleForm)this.ruleForm[l]&&(a[l]=this.ruleForm[l]);1==this.disval?this.$http.post(t,a).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getlist())}):2==this.disval&&this.$http.put(t,a).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getlist())})},changestatus:function(e){var t,a=this;t={status:e.status?1:2,id:e.id},this.$http.put("operatorPermission/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},handleedit:function(e){this.actuserobj=e,this.getidinfo(e.id)},getidinfo:function(e){var t=this;this.$http.get("operatorPermission/"+e).then(function(e){if(200==e.status){t.openDialog(2);var a=D()({},e.data);for(var l in a.remark=a.remark?a.remark:"",a)t.ruleForm[l]=a[l]}})}},created:function(){this.getlist()}},It={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation_permission mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建权限")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.permissionlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"权限名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",align:"center",label:"权限序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",align:"center",label:"权限code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"icon",align:"center",label:"权限图标"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",align:"center",label:"权限url"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"权限状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible?a("el-dialog",{attrs:{title:1==e.disval?"创建权限":"编辑权限",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限icon",prop:"icon"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.icon,callback:function(t){e.$set(e.ruleForm,"icon",t)},expression:"ruleForm.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限sort",prop:"sort"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限code",prop:"code"}},[a("el-input",{attrs:{maxlength:"255",clearable:"",disabled:1!=e.disval},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限url"}},[a("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var Vt=a("VU/8")(Dt,It,!1,function(e){a("dxLs")},null,null).exports,zt=function(e,t,a){(t*=1)||a(new Error("请输入评分")),setTimeout(function(){W()(t)?U()(t)?a():a(new Error("评分应该是一个整数")):a(new Error("请输入评分"))},100)},St={name:"score",data:function(){return{loading:!1,DialogVisible:!1,centerDialogVisible:!1,term:{startTime:"",endTime:""},newterm:{},detailslist:[],scorelist:[],score:{less24:"",less48:"",less72:"",less96:"",less120:"",more120:""},rules:{less24:[{required:!0,validator:zt,trigger:"blur"}],less48:[{required:!0,validator:zt,trigger:"blur"}],less72:[{required:!0,validator:zt,trigger:"blur"}],less96:[{required:!0,validator:zt,trigger:"blur"}],less120:[{required:!0,validator:zt,trigger:"blur"}],more120:[{required:!0,validator:zt,trigger:"blur"}]}}},methods:{tableRowClassName:function(e){e.row;if(e.rowIndex%2==0)return"gray"},getsales:function(e){var t=this,a={},l="";if(1==e&&(this.pageNum=1),this.term.startTime&&this.term.endTime){var r=Number(this.term.startTime.getTime()),i=Number(this.term.endTime.getTime());if(r>i)return this.term.endTime="",void this.$message.error("开始时间不得大于结束时间");if(i-r>7776e6)return this.term.endTime="",void this.$message.error("开始时间与结束时间间隔不得大于90天");this.term.startTime&&(a.startTime=this.Until.changDage(this.term.startTime)),this.term.endTime&&(a.endTime=this.Until.changDage(this.term.endTime)),this.newterm=a,l="OperationScore?";var s="";for(var o in a)a[o]&&(l+="&"+o+"="+a[o]);l+=s=s.substr(1),this.loading=!0,this.$http.get(l).then(function(e){t.loading=!1,200==e.status&&(t.scorelist=e.data)})}else this.$message("请选择时间")},handlebut:function(e){var t=this,a="OperationScore/hotel?";this.newterm.id=e.id;var l="";for(var r in this.newterm)this.newterm[r]&&(a+="&"+r+"="+this.newterm[r]);a+=l=l.substr(1),this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,200==e.status&&(t.centerDialogVisible=!0,t.detailslist=e.data)})},openDialog:function(){this.DialogVisible=!this.DialogVisible,this.getscore()},getscore:function(){var e=this;this.$http("OperationScore/get").then(function(t){e.score=D()({},t.data),console.log(e.score)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=D()({},t.score);t.$http.put("OperationScore",a).then(function(e){200==e.status&&(t.$message({message:"操作成功！",type:"success"}),t.DialogVisible=!t.DialogVisible)})}),console.log("submit!")}},created:function(){var e=new Date;e.setTime(e.getTime()-6048e5+60),this.term.startTime=e;var t=new Date;t.setTime(t.getTime()),this.term.endTime=t,this.getsales()}},Tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"score mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间",align:"right"},model:{value:e.term.startTime,callback:function(t){e.$set(e.term,"startTime",t)},expression:"term.startTime"}}),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间",align:"right"},model:{value:e.term.endTime,callback:function(t){e.$set(e.term,"endTime",t)},expression:"term.endTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("评价标准")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.scorelist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","row-class-name":e.tableRowClassName,"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"center",label:"补货数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",align:"center",label:"得分"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-menu"},on:{click:function(a){return e.handlebut(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"考核详情",visible:e.centerDialogVisible,"modal-append-to-body":!1,height:this.$store.state.tableHeight,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.detailslist,border:"",height:"500","row-class-name":e.tableRowClassName,"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"center",label:"补货数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",align:"center",label:"得分"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"考核标准",visible:e.DialogVisible,"modal-append-to-body":!1,height:this.$store.state.tableHeight,width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.score,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"24小时以内",prop:"less24"}},[a("el-input",{attrs:{type:"number"},model:{value:e.score.less24,callback:function(t){e.$set(e.score,"less24",e._n(t))},expression:"score.less24"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"48小时以内",prop:"less48"}},[a("el-input",{attrs:{type:"number"},model:{value:e.score.less48,callback:function(t){e.$set(e.score,"less48",e._n(t))},expression:"score.less48"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"72小时以内",prop:"less72"}},[a("el-input",{attrs:{type:"number"},model:{value:e.score.less72,callback:function(t){e.$set(e.score,"less72",e._n(t))},expression:"score.less72"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"96小时以内",prop:"less96"}},[a("el-input",{attrs:{type:"number"},model:{value:e.score.less96,callback:function(t){e.$set(e.score,"less96",e._n(t))},expression:"score.less96"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"120小时以内",prop:"less120"}},[a("el-input",{attrs:{type:"number"},model:{value:e.score.less120,callback:function(t){e.$set(e.score,"less120",e._n(t))},expression:"score.less120"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"120小时以上",prop:"more120"}},[a("el-input",{attrs:{type:"number"},model:{value:e.score.more120,callback:function(t){e.$set(e.score,"more120",e._n(t))},expression:"score.more120"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交修改")])],1)],1)],1)],1)},staticRenderFns:[]};var qt=a("VU/8")(St,Tt,!1,function(e){a("OJ6j")},null,null).exports,Et={name:"region",data:function(){return{arealist:[],hotellist:[],regionlist:[],pageNum:1,pageSize:10,loading:!1,outerVisible:!1,innerVisible:!1,citys:[{id:1,name:"武汉"},{id:2,name:"长沙"}],term:{cityId:"",month:""}}},filters:{fiterid:function(e){return 1==e?"武汉":2==e?"长沙":void 0}},created:function(){this.term.month=new Date,this.getlist()},methods:{getlist:function(e){var t,a=this,l="avgCount/city?",r="";if(this.term&&this.term.month){var i=this.term.month.getMonth()+1,s=i<10?"0"+i:i;r=String(this.term.month.getFullYear())+String(s)}for(var o in t={cityId:this.term.cityId,month:r})t[o]&&(l+=o+"="+t[o]+"&");l=l.substr(0,l.length-1),this.loading=!0,this.$http.get(l).then(function(e){a.loading=!1,a.regionlist=e.data})},handleDetails:function(e){var t,a=this,l="avgCount/area?",r="";if(this.term&&this.term.month){var i=this.term.month.getMonth()+1,s=i<10?"0"+i:i;r=String(this.term.month.getFullYear())+String(s)}for(var o in t={cityId:this.term.cityId,month:r,areaId:e.id})t[o]&&(l+=o+"="+t[o]+"&");l=l.substr(0,l.length-1),this.$http.get(l).then(function(e){a.outerVisible=!0,a.arealist=e.data})},handlehotel:function(e){var t,a=this,l="avgCount/hotel?",r="";if(this.term&&this.term.month){var i=this.term.month.getMonth()+1,s=i<10?"0"+i:i;r=String(this.term.month.getFullYear())+String(s)}for(var o in t={cityId:this.term.cityId,month:r,areaId:e.id})t[o]&&(l+=o+"="+t[o]+"&");l=l.substr(0,l.length-1),this.$http.get(l).then(function(e){a.innerVisible=!0,a.hotellist=e.data})}}},Lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"region mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.term.cityId,callback:function(t){e.$set(e.term,"cityId",t)},expression:"term.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:e.term.month,callback:function(t){e.$set(e.term,"month",t)},expression:"term.month"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.regionlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{align:"center",label:"城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterid")(t.row.id)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelQuantity",align:"center",label:"酒店数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipQuantity",align:"center",label:"设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"总销售额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgAmount",align:"center",label:"台均销售"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgDayAmount",align:"center",label:"日台均销售"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleDetails(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"区域列表",visible:e.outerVisible,width:"90%",top:"5vh",center:"","append-to-body":"","modal-append-to-body":!1},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.arealist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelQuantity",align:"center",label:"酒店数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipQuantity",align:"center",label:"设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"总销售额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgAmount",align:"center",label:"台均销售"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgDayAmount",align:"center",label:"日台均销售"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handlehotel(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{width:"80%",title:"酒店列表",center:"",visible:e.innerVisible,top:"2vh","append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.hotellist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipQuantity",align:"center",label:"设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"总销售额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgAmount",align:"center",label:"台均销售"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgDayAmount",align:"center",label:"日台均销售"}})],1)],1)],1)],1)},staticRenderFns:[]};var jt=a("VU/8")(Et,Lt,!1,function(e){a("6A8z")},null,null).exports,Ot={name:"operation_log",data:function(){return{pageNum:1,pageSize:10,total:0,loading:!1,superloglist:[]}},filters:{fiterstatus:function(e){return 1==e?"成功":2==e?"失败":3==e?"离线":4==e?"异常":6==e?"已开":void 0}},methods:{getsuperloglist:function(){var e=this,t="superLog?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.loading=!0,this.$http.get(t).then(function(t){if(e.loading=!1,200==t.status){var a=[].concat(w()(t.data.data));a.map(function(e){e.createTime="20"+e.createTime}),e.superloglist=a,e.total=t.data.total}})},handleCurrentChange:function(e){this.pageNum=e,this.getsuperloglist()},handleSizeChange:function(e){this.pageSize=e,this.getsuperloglist()}},created:function(){this.getsuperloglist()}},Ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"superLog mainboss"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.superloglist,height:this.$store.state.tableHeight2,border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"货道号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fiterstatus")(t.row.status)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"操作人"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},At=a("VU/8")(Ot,Ht,!1,null,null,null).exports,Rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplement mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.goodsName,callback:function(t){e.$set(e.term,"goodsName",t)},expression:"term.goodsName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入操作人姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getreplenisherlist(1)}},model:{value:e.term.operator,callback:function(t){e.$set(e.term,"operator",t)},expression:"term.operator"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getoperatorlist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.operatorlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNO",align:"center",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",align:"center",label:"货道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",align:"center",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",align:"center",label:"位置"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"时间"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Pt=a("VU/8")({name:"supplement",data:function(){return{total:0,pageNum:1,pageSize:10,supplierName:"",ruleForm:{areaId:""},term:{goodsName:"",operator:""},operatorlist:[],arealist:[]}},filters:{fiterroleId:function(e){return 1==e?"运营":2==e?"厂商":void 0}},methods:{getoperatorlist:function(e){var t=this;1==e&&(this.pageNum=1);var a="operationLog3?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)(this.term[l]||"0"==this.term[l])&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,t.total=e.data.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.operatorlist=[];else{var a=e.data.data;for(var l in a)1==a[l].status?a[l].status=!0:a[l].status=!1,a[l].createTime="20"+a[l].createTime;t.operatorlist=a}})},handleCurrentChange:function(e){this.pageNum=e,this.getoperatorlist()},handleSizeChange:function(e){this.pageSize=e,this.getoperatorlist()}},created:function(){this.getoperatorlist()}},Rt,!1,function(e){a("GuXo")},null,null).exports,Bt={name:"money_log",data:function(){return{pageNum:1,pageSize:10,total:0,loading:!1,loglist:[],options:[],term:{trueName:"",hotelId:""}}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("bonusLog/areaList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("bonusLog/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){console.log("val:",e),this.term.hotelId=e[1]},getloglist:function(e){var t=this;1==e&&(this.pageNum=1);var a="/bonusLog?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,200==e.status){var a=[].concat(w()(e.data.data));a.map(function(e){e.createTime="20"+e.createTime}),t.loglist=a,t.total=e.data.total}})},handleCurrentChange:function(e){this.pageNum=e,this.getloglist()},handleSizeChange:function(e){this.pageSize=e,this.getloglist()}},created:function(){this.getloglist()}},Ut={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"money_log mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入操作人姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.trueName,callback:function(t){e.$set(e.term,"trueName",t)},expression:"term.trueName"}}),e._v(" "),a("el-cascader",{attrs:{placeholder:"选择区域酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getloglist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.loglist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"红包金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"trueName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"center",label:"联系电话"}})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Mt=a("VU/8")(Bt,Ut,!1,function(e){a("HbKL")},null,null).exports,Wt={name:"freeroom",data:function(){return{pageNum:1,pageSize:10,total:0,loading:!1,loglist:[],options:[],term:{hotelName:""}}},methods:{getloglist:function(e){var t=this;1==e&&(this.pageNum=1);var a="/freeRoom?pageNum="+this.pageNum+"&pageSize="+this.pageSize;for(var l in this.term)this.term[l]&&(a+="&"+l+"="+this.term[l]);this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1;var a=[].concat(w()(e.data.data));for(var l in a)1==a[l].status?a[l].status=!0:0==a[l].status&&(a[l].status=!1),a[l].createTime="20"+a[l].createTime;t.loglist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getloglist()},handleSizeChange:function(e){this.pageSize=e,this.getloglist()},changestatus:function(e){var t,a=this;e.status=e.status?1:0,t={status:e.status,id:e.id},this.$http.put("freeRoom",t).then(function(e){console.log("res:",e),200==e.status&&(a.$message.success("修改成功"),a.getloglist())})}},created:function(){this.getloglist()}},Yt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"freeroom mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getloglist(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getloglist(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.loglist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomNo",align:"center",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"equipNo",align:"center",label:"设备号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"抽奖时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"已兑奖"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:t.row.status,"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Zt=a("VU/8")(Wt,Yt,!1,function(e){a("MbV9")},null,null).exports,Xt={name:"money",data:function(){return{total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{areaId:"",hotelName:"",startDate:"",endDate:""},options:[],arealist:[],saleslist:[]}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("bonusCount/areaList").then(function(t){var a=[];for(var l in e.arealist=t.data,t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},getsales:function(e){var t=this,a={},l="",r=this;if(1==e&&(this.pageNum=1),this.term.startDate&&this.term.endDate){var i=Number(this.term.startDate.getTime()),s=Number(this.term.endDate.getTime());if(i>s)return this.term.endDate="",void this.$message.error("开始时间不得大于结束时间");if(s-i>7776e6)return this.term.endDate="",void this.$message.error("开始时间与结束时间间隔不得大于90天");this.term.startDate&&(a.startTime=this.Until.changDage(this.term.startDate)),this.term.endDate&&(a.endTime=this.Until.changDage(this.term.endDate)),a.areaId=this.term.areaId,a.hotelName=this.term.hotelName,l="bonusCount?";var o="";for(var n in a)a[n]&&(l+="&"+n+"="+a[n]);l+=o=o.substr(1),this.loading=!0,this.$http.get(l).then(function(e){t.loading=!1,t.total=e.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.saleslist=[]):(e.data[0].hotelName="本页合计",setTimeout(function(){r.saleslist=e.data},200))})}else this.$message("请选择时间")},handleCurrentChange:function(e){this.pageNum=e,this.getsales()},handleSizeChange:function(e){this.pageSize=e,this.getsales()}},created:function(){var e=new Date;e.setTime(e.getTime()-7776e6+60),this.term.startDate=e;var t=new Date;t.setTime(t.getTime()),this.term.endDate=t,this.getsales()}},Kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"money mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择区域"},on:{focus:e.getarea},model:{value:e.term.areaId,callback:function(t){e.$set(e.term,"areaId",t)},expression:"term.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getsales(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间",align:"right"},model:{value:e.term.startDate,callback:function(t){e.$set(e.term,"startDate",t)},expression:"term.startDate"}}),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间",align:"right"},model:{value:e.term.endDate,callback:function(t){e.$set(e.term,"endDate",t)},expression:"term.endDate"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.saleslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"金额(元)"}})],1)],1)},staticRenderFns:[]};var Gt=a("VU/8")(Xt,Kt,!1,function(e){a("+Lof")},null,null).exports,Qt={name:"performance",data:function(){return{userinfo:{},total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{startTime:"",endTime:""},options:[],arealist:[],saleslist:[]}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("sales/areaList").then(function(t){var a=[];for(var l in e.arealist=t.data,t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("sales/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},getsales:function(e){var t=this,a={},l="",r=this;if(1==e&&(this.pageNum=1),this.term.startTime&&this.term.endTime){var i=Number(this.term.startTime.getTime()),s=Number(this.term.endTime.getTime());if(i>s)return this.term.endTime="",void this.$message.error("开始时间不得大于结束时间");if(s-i>7776e6)return this.term.endTime="",void this.$message.error("开始时间与结束时间间隔不得大于90天");this.term.startTime&&(a.startTime=this.Until.changDage(this.term.startTime)),this.term.endTime&&(a.endTime=this.Until.changDage(this.term.endTime)),a.areaId=this.term.areaId,a.hotelName=this.term.hotelName,l="brushCount?";var o="";for(var n in a)a[n]&&(o+="&"+n+"="+a[n]);l+=o=o.substr(1),this.loading=!0,this.$http.get(l).then(function(e){if(t.loading=!1,t.total=e.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.saleslist=[];else{for(var a={amount:0,name:"本页合计",quantity:0},l=0;l<e.data.length;l++)a.amount=a.amount+100*e.data[l].amount,a.quantity+=e.data[l].quantity;a.amount=a.amount/100,setTimeout(function(){e.data.unshift(a),r.saleslist=e.data},200)}})}else this.$message("请选择时间")},handleCurrentChange:function(e){this.pageNum=e,this.getsales()},handleSizeChange:function(e){this.pageSize=e,this.getsales()}},created:function(){this.userinfo=this.$store.state.userInfo;var e=new Date;e.setTime(e.getTime()-7776e6+60),this.term.startTime=e;var t=new Date;t.setTime(t.getTime()),this.term.endTime=t,this.getsales()}},Jt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"performance mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-date-picker",{class:"2"==e.userinfo.type?"jd-input":"",attrs:{type:"datetime",placeholder:"开始时间",align:"right"},model:{value:e.term.startTime,callback:function(t){e.$set(e.term,"startTime",t)},expression:"term.startTime"}}),e._v(" "),a("el-date-picker",{class:"2"==e.userinfo.type?"jd-input":"",attrs:{type:"datetime",placeholder:"结束时间",align:"right"},model:{value:e.term.endTime,callback:function(t){e.$set(e.term,"endTime",t)},expression:"term.endTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.saleslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"业绩(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"联系电话"}})],1)],1)},staticRenderFns:[]};var ea=a("VU/8")(Qt,Jt,!1,function(e){a("kGhB")},null,null).exports,ta={name:"depot",data:function(){return{disval:1,total:0,pageNum:1,pageSize:10,loading:!1,centerDialogVisible:!1,name:"",goodslist:[],citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}],ruleForm:{cityId:"",address:"",id:"",name:"",remark:"",status:""},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],address:[{required:!0,message:"请输入位置",trigger:"blur"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}},filters:{},watch:{centerDialogVisible:function(){if(!this.centerDialogVisible)for(var e in this.ruleForm)this.ruleForm[e]=""}},methods:{getgoodslist:function(e){var t=this;1==e&&(this.pageNum=1);var a="depot?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.name&&(a+="&name="+this.name),this.$http.get(a).then(function(e){var a=e.data.data;for(var l in a)0==a[l].status?a[l].status=!1:1==a[l].status&&(a[l].status=!0);t.goodslist=a,t.total=e.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getgoodslist()},handleSizeChange:function(e){this.pageSize=e,this.getgoodslist()},changestatusf:function(){console.log("changestatusf",this.ruleForm.status)},changestatus:function(e){var t=this;console.log(e);var a;e.status=e.status?1:0,a={status:e.status,id:e.id},this.$http.put("depot/status",a).then(function(e){200==e.status&&(t.$message.success("修改成功"),t.getgoodslist())})},handleedit:function(e){var t=this;this.$http.get("depot/"+e.id).then(function(e){if(200==e.status){for(var a in t.ruleForm)t.ruleForm[a]="";for(var l in e.data)for(var r in t.ruleForm)l==r&&(t.ruleForm[r]=e.data[l]);console.log("ruleForm:",t.ruleForm),t.openDialog(2)}})},openDialog:function(e){this.disval=e,this.centerDialogVisible=!this.centerDialogVisible},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.savedata()})},resetForm:function(e){this.$refs[e].resetFields()},savedata:function(){var e=this,t={};for(var a in this.ruleForm.status=this.ruleForm.status?0:1,this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);1==this.disval?this.$http.post("depot",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getgoodslist())}):2==this.disval&&this.$http.put("depot",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.centerDialogVisible=!e.centerDialogVisible,e.getgoodslist())})}},created:function(){this.getgoodslist()}},aa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"depot mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[e._e(),e._v(" "),e._e()],1),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建库存")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.goodslist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{align:"center",label:"城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.cityId?"武汉":"长沙"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"仓库名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",align:"center",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.centerDialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建库存数据",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1):e._e(),e._v(" "),e.centerDialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑库存数据",visible:e.centerDialogVisible,"modal-append-to-body":!1,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"仓库名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var la=a("VU/8")(ta,aa,!1,function(e){a("jW5J")},null,null).exports,ra=a("lHA8"),ia=a.n(ra),sa=a("c/Tr"),oa=a.n(sa),na=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?a():a(new Error("请输入一个数字"))},100)},ua={name:"storeIn",data:function(){return{inds:"",disval:1,total:0,pageNum:1,pageSize:10,loading:!1,DialogVisible:!1,ruleForm:{depotId:"",goodsList:[],id:"",remark:"",serialNo:"",time:"",operatorId:"",status:"",type:"",userId:""},rules:{depotId:[{required:!0,message:"请选择仓库",trigger:"change"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],goodsId:[{required:!0,message:"请选择商品",trigger:"change"}],time:[{required:!0,message:"请选择入库时间",trigger:"change"}],amount:[{required:!0,validator:na,trigger:"blur"}],serialNo:[{required:!0,message:"请输入设备号",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]},depots:[],types:[{id:1,label:"采购入库"},{id:2,label:"撤机入库"},{id:3,label:"换货入库"},{id:4,label:"其他"}],goodsid:[],operatorlist:[],storelist:[],moregoods:[]}},watch:{DialogVisible:function(){if(this.DialogVisible)this.getdepots(),this.getoperatorlist();else{for(var e in this.ruleForm)this.ruleForm[e]="";this.ruleForm.goodsList=[]}}},filters:{fitertype:function(e){return 1==e?"采购入库":2==e?"撤机入库":3==e?"换货入库":4==e?"其他":void 0}},methods:{getdepots:function(){var e=this;this.depots.length<1&&this.$http.get("storeIn/depot").then(function(t){if(200==t.status){for(var a in t.data)t.data[a].id=Number(t.data[a].id);e.depots=t.data}})},getoperatorlist:function(){var e=this;this.operatorlist.length<1&&this.$http.get("storeIn/operator").then(function(t){if(200==t.status){for(var a in t.data)t.data[a].id=Number(t.data[a].id);e.operatorlist=t.data}})},getlist:function(){var e=this,t="storeIn?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.$http.get(t).then(function(t){var a=t.data.data;for(var l in a)a[l].time="20"+a[l].time,0==a[l].status?a[l].status=!1:1==a[l].status&&(a[l].status=!0);e.storelist=a,e.total=t.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},handleedit:function(e){var t=this;this.DialogVisible=!0,this.disval=2;var a="storeIn/"+e.id;this.$http.get(a).then(function(e){if(200==e.status)for(var a in e.data.time=new Date(e.data.time),e.data)e.data[a]&&(t.ruleForm[a]=e.data[a])})},changestatus:function(e){var t,a=this;e.status=e.status?1:0,t={status:e.status,id:e.id},this.$http.put("storeIn/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},openDialog:function(e){if(this.disval=e,this.ruleForm.goodsList&&0==this.ruleForm.goodsList.length)for(var t=0;t<3;t++)this.addpurdetails();this.DialogVisible=!0},getgoodsType:function(e){var t=this;this.inds=e||0;this.moregoods.length<1&&this.$http.get("storeIn/goodsType").then(function(e){for(var a in e.data)e.data[a].value=e.data[a].id,e.data[a].label=e.data[a].name,e.data[a].children=[];t.moregoods=e.data})},handlechange:function(e){var t=this,a=this;this.inds;setTimeout(function(){var l=[];for(var r in t.moregoods)if(e[0]==t.moregoods[r].id)for(var i in t.moregoods[r].children)e[1]==t.moregoods[r].children[i].value&&(l=t.moregoods[r].children[i]);a.ruleForm.goodsList[a.inds].goodsId=l.value,a.ruleForm.goodsList[a.inds].goodsName=l.label},500)},handleItemChange:function(e){this.getgoods(e[0],2)},getgoods:function(e,t,a){var l=this,r="storeIn/goods";this.inds=a,1==t?r+="?sku="+e:2==t&&(r+="?typeId="+e),this.$http.get(r).then(function(r){if(1==t){var i=[],s=!1;for(var o in i.push(r.data.id),r.data.label=r.data.name,r.data.value=r.data.id,l.moregoods)s=l.moregoods[o].id!=r.data.id;s&&l.moregoods.push(r.data),l.ruleForm.goodsList[a].goodsId=r.data.id,l.ruleForm.goodsList[a].goodsid=i}else if(2==t){var n=[];for(var u in l.moregoods)if(e==l.moregoods[u].id){for(var c in r.data){var m={};m.value=r.data[c].id,m.label=r.data[c].name,n.push(m)}n=l.unique(n),l.moregoods[u].children=n}}})},unique:function(e){return oa()(new ia.a(e))},addpurdetails:function(){this.ruleForm.goodsList.push({amount:"",goodsId:"",goodsName:"",storeId:""})},lesspurdetails:function(e){var t=this.ruleForm.goodsList;for(var a in t)e==a&&t.splice(a,1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},savedata:function(){var e=this,t={},a={},l=[],r=this.ruleForm.goodsList;if(a=D()({},this.ruleForm),2!=this.ruleForm.type&&4!=this.ruleForm.type||this.ruleForm.operatorId){for(var i in a.time&&(a.time=this.Until.changDage(a.time)),a)a[i]&&(t[i]=a[i]);for(var s in r)if(r[s].amount){var o={};o.amount=r[s].amount,o.goodsId=r[s].goodsId,o.goodsName=r[s].goodsName,o.storeId=r[s].storeId,l.push(o)}t.goodsList=l,0==l.length?this.$message("请输入商品详情信息"):t.id?this.$http.put("storeIn",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())}):this.$http.post("storeIn",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())})}else this.$message("请选择负责人")},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.getlist()}},ca={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"storeIn mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建入库单")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.storelist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"depotName",align:"center",label:"仓库名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"单号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"入库类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"time",align:"center",label:"入库时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",align:"center",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),1==e.disval?a("el-dialog",{attrs:{title:"创建入库单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",[a("legend",[e._v("表单信息")]),e._v(" "),a("el-form-item",{attrs:{label:"仓库",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"depotId"}},[a("el-select",{attrs:{placeholder:"请选择仓库",clearable:""},on:{focus:e.getdepots},model:{value:e.ruleForm.depotId,callback:function(t){e.$set(e.ruleForm,"depotId",t)},expression:"ruleForm.depotId"}},e._l(e.depots,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择入库类型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",maxlength:"256",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",required:2==e.ruleForm.type||3==e.ruleForm.type}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:""},on:{focus:e.getoperatorlist},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"入库时间",align:"right"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("商品详情信息")]),e._v(" "),a("el-button",{staticClass:"addbut",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addpurdetails}},[e._v("添加商品")]),e._v(" "),e._l(e.ruleForm.goodsList,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.goodsList.length>0,expression:"ruleForm.goodsList.length>0"}],key:l,attrs:{label:"选择商品",rules:e.rules.goodsId}},[a("el-col",{attrs:{span:9}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择商品","show-all-levels":!1,options:e.moregoods,filterable:"",clearable:""},on:{focus:function(t){return e.getgoodsType(l)},"active-item-change":e.handleItemChange,change:e.handlechange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"数量",rules:e.rules.amount,prop:"goodsList."+l+".amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",maxlength:"256",clearable:"",type:"number"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.lesspurdetails(l)}}},[e._v("删除")])],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),1!=e.disval?a("el-dialog",{attrs:{title:"入库单详情",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",[a("legend",[e._v("表单信息")]),e._v(" "),a("el-form-item",{attrs:{label:"仓库",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"depotId"}},[a("el-select",{attrs:{placeholder:"请选择仓库",clearable:"",disabled:!0},on:{focus:e.getdepots},model:{value:e.ruleForm.depotId,callback:function(t){e.$set(e.ruleForm,"depotId",t)},expression:"ruleForm.depotId"}},e._l(e.depots,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择入库类型",clearable:"",disabled:!0},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",maxlength:"256",clearable:"",disabled:!0},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:"",disabled:!0},on:{focus:e.getoperatorlist},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetime",disabled:!0,placeholder:"入库时间",align:"right"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,disabled:!0,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("商品详情信息")]),e._v(" "),e._l(e.ruleForm.goodsList,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.goodsList.length>0,expression:"ruleForm.goodsList.length>0"}],key:l,attrs:{label:"选择商品",rules:e.rules.goodsId}},[a("el-col",{attrs:{span:9}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择商品","show-all-levels":!1,options:e.moregoods,filterable:"",clearable:"",disabled:!0},on:{focus:function(t){return e.getgoodsType(l)},"active-item-change":e.handleItemChange,change:e.handlechange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"数量",rules:e.rules.amount}},[a("el-input",{attrs:{disabled:!0,placeholder:"请输入数量",maxlength:"256",clearable:"",type:"number"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1)],1)],1)})],2)]):e._e()],1):e._e()],1)},staticRenderFns:[]};var ma=a("VU/8")(ua,ca,!1,function(e){a("MTXi")},null,null).exports,da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"damage mainboss"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","row-class-name":e.tableRowClassName,"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"depotName",align:"center",label:"仓库"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lossValue",align:"center",label:"损耗额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 20"+e._s(t.row.time))]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},pa=a("VU/8")({name:"damage",data:function(){return{total:0,pageNum:1,pageSize:10,loading:!1,list:[]}},methods:{getlist:function(){var e=this,t="loss?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.$http.get(t).then(function(t){e.list=t.data.data,e.total=t.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},tableRowClassName:function(e){if(e.row,e.rowIndex%2==0)return"gray"}},created:function(){this.getlist()}},da,!1,null,null,null).exports,ha={name:"goodsCheck",data:function(){return{total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{startDate:"",endDate:""},options:[],arealist:[],saleslist:[]}},methods:{getsales:function(e){var t=this,a={},l="",r=this;if(1==e&&(this.pageNum=1),this.term.startDate&&this.term.endDate){var i=Number(this.term.startDate.getTime()),s=Number(this.term.endDate.getTime());if(i>s)return this.term.endDate="",void this.$message.error("开始时间不得大于结束时间");if(s-i>7776e6)return this.term.endDate="",void this.$message.error("开始时间与结束时间间隔不得大于90天");this.term.startDate&&(a.startTime=this.Until.changDage(this.term.startDate)),this.term.endDate&&(a.endTime=this.Until.changDage(this.term.endDate)),l="replenishVerify?";var o="";for(var n in a)a[n]&&(l+="&"+n+"="+a[n]);l+=o=o.substr(1),this.loading=!0,this.$http.get(l).then(function(e){console.log(e),t.loading=!1,t.total=e.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.saleslist=[]):setTimeout(function(){r.saleslist=e.data},200)})}else this.$message("请选择时间")},handleCurrentChange:function(e){this.pageNum=e,this.getsales()},handleSizeChange:function(e){this.pageSize=e,this.getsales()}},created:function(){var e=new Date;e.setTime(e.getTime()-6048e5+60),this.term.startDate=e;var t=new Date;t.setTime(t.getTime()),this.term.endDate=t,this.getsales()}},ga={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goodsCheck mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间",align:"right"},model:{value:e.term.startDate,callback:function(t){e.$set(e.term,"startDate",t)},expression:"term.startDate"}}),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间",align:"right"},model:{value:e.term.endDate,callback:function(t){e.$set(e.term,"endDate",t)},expression:"term.endDate"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.saleslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"operator",align:"center",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outNum",align:"center",label:"领货量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"replenishNum",align:"center",label:"补货量"}})],1)],1)},staticRenderFns:[]};var fa=a("VU/8")(ha,ga,!1,function(e){a("A2YN")},null,null).exports,ba=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?a():a(new Error("请输入一个数字"))},100)},va={name:"storeOut",data:function(){return{inds:"",disval:1,total:0,pageNum:1,pageSize:10,loading:!1,DialogVisible:!1,ruleForm:{depotId:"",goodsList:[],id:"",remark:"",serialNo:"",time:"",operatorId:"",status:"",type:"",userId:""},rules:{depotId:[{required:!0,message:"请选择仓库",trigger:"change"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],goodsId:[{required:!0,message:"请选择商品",trigger:"change"}],time:[{required:!0,message:"请选择出库时间",trigger:"change"}],amount:[{required:!0,validator:ba,trigger:"blur"}],serialNo:[{required:!0,message:"请输入设备号",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]},depots:[],types:[{id:1,label:"酒店补货"},{id:3,label:"换货出库"},{id:4,label:"其他"},{id:5,label:" 损耗"}],goodsid:[],operatorlist:[],storelist:[],moregoods:[]}},watch:{DialogVisible:function(){if(this.DialogVisible)this.getdepots(),this.getoperatorlist();else{for(var e in this.ruleForm)this.ruleForm[e]="";this.ruleForm.goodsList=[]}}},filters:{fitertype:function(e){return 1==e?"酒店补货":2==e?"初次布货":3==e?"换货出库":4==e?"其他":5==e?"损耗":void 0}},methods:{getdepots:function(){var e=this;this.depots.length<1&&this.$http.get("storeOut/depot").then(function(t){if(200==t.status){for(var a in t.data)t.data[a].id=Number(t.data[a].id);e.depots=t.data}})},getoperatorlist:function(){var e=this;this.operatorlist.length<1&&this.$http.get("storeOut/operator").then(function(t){if(200==t.status){for(var a in t.data)t.data[a].id=Number(t.data[a].id);e.operatorlist=t.data}})},getlist:function(){var e=this,t="storeOut?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.$http.get(t).then(function(t){var a=t.data.data;for(var l in a)a[l].time&&(a[l].time="20"+a[l].time),0==a[l].status?a[l].status=!1:1==a[l].status&&(a[l].status=!0);e.storelist=a,e.total=t.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},handleedit:function(e){var t=this;this.DialogVisible=!0,this.disval=2;var a="storeOut/"+e.id;this.$http.get(a).then(function(e){if(200==e.status)for(var a in e.data.time=new Date(e.data.time),e.data)e.data[a]&&(t.ruleForm[a]=e.data[a])})},changestatus:function(e){var t,a=this;e.status=e.status?1:0,t={status:e.status,id:e.id},this.$http.put("storeOut/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},openDialog:function(e){if(this.disval=e,!this.ruleForm.goodsList.length)for(var t=0;t<3;t++)this.addpurdetails();this.DialogVisible=!0},getgoodsType:function(e){var t=this;this.inds=e||0;this.moregoods.length<1&&this.$http.get("storeOut/goodsType").then(function(e){for(var a in e.data)e.data[a].value=e.data[a].id,e.data[a].label=e.data[a].name,e.data[a].children=[];t.moregoods=e.data})},handlechange:function(e){var t=this,a=this;this.inds;setTimeout(function(){var l=[];for(var r in t.moregoods)if(e[0]==t.moregoods[r].id)for(var i in t.moregoods[r].children)e[1]==t.moregoods[r].children[i].value&&(l=t.moregoods[r].children[i]);a.ruleForm.goodsList[a.inds].goodsId=l.value,a.ruleForm.goodsList[a.inds].goodsName=l.label},500)},handleItemChange:function(e){this.getgoods(e[0],2)},getgoods:function(e,t,a){var l=this,r="storeOut/goods";this.inds=a,1==t?r+="?sku="+e:2==t&&(r+="?typeId="+e),this.$http.get(r).then(function(r){if(1==t){var i=[],s=!1;for(var o in i.push(r.data.id),r.data.label=r.data.name,r.data.value=r.data.id,l.moregoods)s=l.moregoods[o].id!=r.data.id;s&&l.moregoods.push(r.data),l.ruleForm.goodsList[a].goodsId=r.data.id,l.ruleForm.goodsList[a].goodsid=i}else if(2==t){var n=[];for(var u in l.moregoods)if(e==l.moregoods[u].id){for(var c in r.data){var m={};m.value=r.data[c].id,m.label=r.data[c].name,n.push(m)}n=l.unique(n),l.moregoods[u].children=n}}})},unique:function(e){return oa()(new ia.a(e))},addpurdetails:function(){this.ruleForm.goodsList.push({amount:"",goodsId:"",goodsName:"",storeId:""})},lesspurdetails:function(e){var t=this.ruleForm.goodsList;for(var a in t)e==a&&t.splice(a,1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.savedata()})},savedata:function(){var e=this,t={},a={},l=[],r=this.ruleForm.goodsList;if(a=D()({},this.ruleForm),4==this.ruleForm.type||this.ruleForm.operatorId){for(var i in a.time&&(a.time=this.Until.changDage(a.time)),a)a[i]&&(t[i]=a[i]);for(var s in r)if(r[s].amount){var o={};o.amount=r[s].amount,o.goodsId=r[s].goodsId,o.goodsName=r[s].goodsName,o.storeId=r[s].storeId,l.push(o)}t.goodsList=l,0==l.length?this.$message("请输入商品详情信息"):t.id?this.$http.put("storeOut",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())}):this.$http.post("storeOut",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())})}else this.$message("请选择负责人")},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.getlist()}},ya={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"storeOut mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建出库单")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.storelist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"depotName",align:"center",label:"仓库名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"单号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"出库类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"time",align:"center",label:"出库时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",align:"center",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),1==e.disval?a("el-dialog",{attrs:{title:"创建出库单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",[a("legend",[e._v("表单信息")]),e._v(" "),a("el-form-item",{attrs:{label:"仓库",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"depotId"}},[a("el-select",{attrs:{placeholder:"请选择仓库",clearable:""},on:{focus:e.getdepots},model:{value:e.ruleForm.depotId,callback:function(t){e.$set(e.ruleForm,"depotId",t)},expression:"ruleForm.depotId"}},e._l(e.depots,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择出库类型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",maxlength:"256",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",required:4!=e.ruleForm.type}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:""},on:{focus:e.getoperatorlist},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"出库时间",align:"right"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("商品详情信息")]),e._v(" "),a("el-button",{staticClass:"addbut",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addpurdetails}},[e._v("添加商品")]),e._v(" "),e._l(e.ruleForm.goodsList,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.goodsList.length>0,expression:"ruleForm.goodsList.length>0"}],key:l,attrs:{label:"选择商品",rules:e.rules.goodsId}},[a("el-col",{attrs:{span:9}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择商品","show-all-levels":!1,options:e.moregoods,filterable:"",clearable:""},on:{focus:function(t){return e.getgoodsType(l)},"active-item-change":e.handleItemChange,change:e.handlechange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"数量",rules:e.rules.amount,prop:"goodsList."+l+".amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",maxlength:"256",clearable:"",type:"number"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.lesspurdetails(l)}}},[e._v("删除")])],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),1!=e.disval?a("el-dialog",{attrs:{title:"出库单详情",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",[a("legend",[e._v("表单信息")]),e._v(" "),a("el-form-item",{attrs:{label:"仓库",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"depotId"}},[a("el-select",{attrs:{placeholder:"请选择仓库",clearable:"",disabled:!0},on:{focus:e.getdepots},model:{value:e.ruleForm.depotId,callback:function(t){e.$set(e.ruleForm,"depotId",t)},expression:"ruleForm.depotId"}},e._l(e.depots,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择出库类型",clearable:"",disabled:!0},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",maxlength:"256",clearable:"",disabled:!0},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:"",disabled:!0},on:{focus:e.getoperatorlist},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetime",disabled:!0,placeholder:"出库时间",align:"right"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,disabled:!0,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("商品详情信息")]),e._v(" "),e._l(e.ruleForm.goodsList,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.goodsList.length>0,expression:"ruleForm.goodsList.length>0"}],key:l,attrs:{label:"选择商品",rules:e.rules.goodsId}},[a("el-col",{attrs:{span:9}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择商品","show-all-levels":!1,options:e.moregoods,filterable:"",clearable:"",disabled:!0},on:{focus:function(t){return e.getgoodsType(l)},"active-item-change":e.handleItemChange,change:e.handlechange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"数量",rules:e.rules.amount}},[a("el-input",{attrs:{placeholder:"请输入数量",maxlength:"256",clearable:"",disabled:!0,type:"number"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1)],1)],1)})],2)]):e._e()],1):e._e()],1)},staticRenderFns:[]};var _a=a("VU/8")(va,ya,!1,function(e){a("pG5Q")},null,null).exports,Fa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stock mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.term.cityId,callback:function(t){e.$set(e.term,"cityId",t)},expression:"term.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-input",{attrs:{placeholder:"请输入商品编码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getgoodslist(1)}},model:{value:e.term.sku,callback:function(t){e.$set(e.term,"sku",t)},expression:"term.sku"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getgoodslist(1)}},model:{value:e.term.name,callback:function(t){e.$set(e.term,"name",t)},expression:"term.name"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类别"},on:{focus:e.gettype},model:{value:e.term.typeId,callback:function(t){e.$set(e.term,"typeId",t)},expression:"term.typeId"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.saleslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"酒品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",align:"center",label:"种类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"库存"}})],1)],1)},staticRenderFns:[]};var ka=a("VU/8")({name:"stock",data:function(){return{total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{name:"",sku:"",cityId:"",typeId:""},citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}],types:[],arealist:[],saleslist:[]}},methods:{gettype:function(){var e=this;this.types.length<1&&this.$http.get("storeCount/type").then(function(t){200==t.status&&(e.types=t.data)})},getsales:function(e){var t=this,a="storeCount?",l=this;for(var r in 1==e&&(this.pageNum=1),this.term)this.term[r]&&(a+=r+"="+this.term[r]+"&");a=a.substr(0,a.length-1),this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,t.total=e.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.saleslist=[]):l.saleslist=e.data.data})},handleCurrentChange:function(e){this.pageNum=e,this.getsales()},handleSizeChange:function(e){this.pageSize=e,this.getsales()}},created:function(){this.getsales()}},Fa,!1,function(e){a("hVMu")},null,null).exports,wa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"access mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getaccess(1)}},model:{value:e.term.goodsName,callback:function(t){e.$set(e.term,"goodsName",t)},expression:"term.goodsName"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择仓库"},on:{focus:e.getdepot},model:{value:e.term.depotId,callback:function(t){e.$set(e.term,"depotId",t)},expression:"term.depotId"}},e._l(e.depot,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类型"},model:{value:e.term.type,callback:function(t){e.$set(e.term,"type",t)},expression:"term.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getaccess(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.accesslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.type?"入库":"出库"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"depotName",align:"center",label:"仓库"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",align:"center",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operationName",align:"center",label:"负责人"}})],1)],1)},staticRenderFns:[]};var xa=a("VU/8")({name:"access",data:function(){return{total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{depotId:"",goodsName:"",type:""},types:[{id:1,label:"入库"},{id:2,label:"出库"}],depot:[],accesslist:[]}},methods:{getdepot:function(){var e=this;this.depot.length<1&&this.$http.get("storeDetail/depot").then(function(t){200==t.status&&(e.depot=t.data)})},getaccess:function(e){var t=this,a="storeDetail?",l=this;for(var r in 1==e&&(this.pageNum=1),this.term)this.term[r]&&(a+=r+"="+this.term[r]+"&");a=a.substr(0,a.length-1),this.loading=!0,this.$http.get(a).then(function(e){if(t.loading=!1,200==e.status)if(t.total=e.total,e.data.total<1)t.$message("没有查询到相关数据信息"),t.accesslist=[];else{for(var a in e.data.data)e.data.data[a].time&&(e.data.data[a].time="20"+e.data.data[a].time);l.accesslist=e.data.data}})},handleCurrentChange:function(e){this.pageNum=e,this.getaccess()},handleSizeChange:function(e){this.pageSize=e,this.getaccess()}},created:function(){this.getaccess()}},wa,!1,function(e){a("kKnC")},null,null).exports,$a={name:"lack",data:function(){return{loading:!1,centerDialogVisible:!1,term:{startTime:"",endTime:""},newterm:{},detailslist:[],scorelist:[]}},methods:{tableRowClassName:function(e){e.row;if(e.rowIndex%2==0)return"gray"},getsales:function(e){var t=this,a={},l="";if(1==e&&(this.pageNum=1),this.term.startTime&&this.term.endTime){var r=Number(this.term.startTime.getTime()),i=Number(this.term.endTime.getTime());if(r>i)return this.term.endTime="",void this.$message.error("开始时间不得大于结束时间");if(i-r>7776e6)return this.term.endTime="",void this.$message.error("开始时间与结束时间间隔不得大于90天");this.term.startTime&&(a.startTime=this.Until.changDage(this.term.startTime)),this.term.endTime&&(a.endTime=this.Until.changDage(this.term.endTime)),this.newterm=a,l="replenishCount?";var s="";for(var o in a)a[o]&&(l+="&"+o+"="+a[o]);l+=s=s.substr(1),this.loading=!0,this.$http.get(l).then(function(e){t.loading=!1,200==e.status&&(t.scorelist=e.data)})}else this.$message("请选择时间")},handlebut:function(e){var t=this,a="replenishCount/hotel?";this.newterm.id=e.id;var l="";for(var r in this.newterm)this.newterm[r]&&(a+="&"+r+"="+this.newterm[r]);a+=l=l.substr(1),this.loading=!0,this.$http.get(a).then(function(e){t.loading=!1,200==e.status&&(t.centerDialogVisible=!0,t.detailslist=e.data)})}},created:function(){var e=new Date;e.setTime(e.getTime()-6048e5+60),this.term.startTime=e;var t=new Date;t.setTime(t.getTime()),this.term.endTime=t,this.getsales()}},Na={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lack mainboss"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.scorelist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","row-class-name":e.tableRowClassName,"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"center",label:"缺货数量"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-menu"},on:{click:function(a){return e.handlebut(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"缺货详情",visible:e.centerDialogVisible,"modal-append-to-body":!1,height:this.$store.state.tableHeight,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.detailslist,border:"",height:"500","row-class-name":e.tableRowClassName,"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"酒店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"center",label:"缺货数量"}})],1)],1)],1)},staticRenderFns:[]};var Ca=a("VU/8")($a,Na,!1,function(e){a("ZZqw")},null,null).exports,Da={name:"sales",data:function(){return{userinfo:{},total:0,ptotal:0,pageNum:1,pageSize:10,loading:!1,term:{cityId:"",areaId:"",hotelName:"",startTime:"",payway:"",endTime:""},options:[],arealist:[],saleslist:[],citys:[{id:1,label:"武汉"},{id:2,label:"长沙"}],paywaylist:[{id:3,label:"微信支付"},{id:2,label:"支付宝支付"}]}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("goodsQuantity/areaList").then(function(t){var a=[];for(var l in e.arealist=t.data,t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("sales/hotelList/"+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.term.hotelId=e[1]},searchBlur:function(e){this.term.payway=e.target.value},getsales:function(e){var t=this,a={},l="",r=this;if(1==e&&(this.pageNum=1),this.term.startTime&&this.term.endTime){var i=Number(this.term.startTime.getTime()),s=Number(this.term.endTime.getTime());if(i>s)return this.term.endTime="",void this.$message.error("开始时间不得大于结束时间");if(s-i>7776e6)return this.term.endTime="",void this.$message.error("开始时间与结束时间间隔不得大于90天");for(var o in a=D()({},this.term),this.term.startTime&&(a.startTime=this.Until.changDage(this.term.startTime)),this.term.endTime&&(a.endTime=this.Until.changDage(this.term.endTime)),l="goodsQuantity?",a)a[o]&&(l+="&"+o+"="+a[o]);this.loading=!0,this.$http.get(l).then(function(e){t.loading=!1,200==e.status&&(e.data.length>0?(t.total=e.total,e.data.total<1?(t.$message("没有查询到相关数据信息"),t.saleslist=[]):(e.data[0].name="本页合计",setTimeout(function(){r.saleslist=e.data},200))):(t.$message("没有查询到相关数据信息"),t.saleslist=[]))})}else this.$message("请选择时间")},handleCurrentChange:function(e){this.pageNum=e,this.getsales()},handleSizeChange:function(e){this.pageSize=e,this.getsales()}},created:function(){this.userinfo=this.$store.state.userInfo;var e=new Date,t=this.Until.changDage(new Date).split(" ")[0].split("-"),a=t[0]+"-"+t[1]+"-1 00:00:00";e.setTime(new Date(a).getTime()),this.term.startTime=e;var l=new Date;l.setTime(l.getTime()),this.term.endTime=l,this.getsales()}},Ia={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择城市"},model:{value:e.term.cityId,callback:function(t){e.$set(e.term,"cityId",t)},expression:"term.cityId"}},e._l(e.citys,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),"1"==e.userinfo.type?a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择区域"},on:{focus:e.getarea},model:{value:e.term.areaId,callback:function(t){e.$set(e.term,"areaId",t)},expression:"term.areaId"}},e._l(e.arealist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1):e._e(),e._v(" "),"1"==e.userinfo.type?a("el-input",{attrs:{placeholder:"请输入酒店名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getsales(1)}},model:{value:e.term.hotelName,callback:function(t){e.$set(e.term,"hotelName",t)},expression:"term.hotelName"}}):e._e(),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择支付方式"},on:{blur:e.searchBlur},model:{value:e.term.payway,callback:function(t){e.$set(e.term,"payway",t)},expression:"term.payway"}},e._l(e.paywaylist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-date-picker",{class:"2"==e.userinfo.type?"jd-input":"",attrs:{type:"datetime",placeholder:"开始时间",align:"right"},model:{value:e.term.startTime,callback:function(t){e.$set(e.term,"startTime",t)},expression:"term.startTime"}}),e._v(" "),a("el-date-picker",{class:"2"==e.userinfo.type?"jd-input":"",attrs:{type:"datetime",placeholder:"结束时间",align:"right"},model:{value:e.term.endTime,callback:function(t){e.$set(e.term,"endTime",t)},expression:"term.endTime"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getsales(1)}}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.saleslist,height:this.$store.state.tableHeight,resizable:"",border:"",stripe:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"center",label:"销售数量"}})],1)],1)},staticRenderFns:[]};var Va=a("VU/8")(Da,Ia,!1,function(e){a("oZTE")},null,null).exports,za=function(e,t,a){(t*=1)||a(new Error("请输入金额")),setTimeout(function(){W()(t)?t<0?a(new Error("金额不应该小于0")):U()(t)?a():-1!=(t+=" ").indexOf(".")&&(t.split(".")[1].length>3?a(new Error("金额最多有两位小数")):a()):a(new Error("金额应该是一个大于数的数字"))},100)},Sa=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?t<0?a(new Error("请输入一个大于0的数字")):U()(t)?a():a(new Error("请输入一个正整数")):a(new Error("请输入一个数字"))},100)},Ta={name:"inventory",data:function(){return{inds:"",disval:1,total:0,pageNum:1,pageSize:10,loading:!1,DialogVisible:!1,ruleForm:{serialNo:"",fare:"",totalAmount:"",remark:"",detaileList:[]},rules:{serialNo:[{required:!0,message:"请输入采购单号",trigger:"blur"}],fare:[{required:!0,validator:za,trigger:"blur"}],totalAmount:[{required:!0,validator:za,trigger:"blur"}],goodsid:[{required:!0,message:"请选择商品",trigger:["blur","change"]}],amount:[{required:!0,validator:Sa,trigger:"blur"}],unitPrice:[{required:!0,validator:za,trigger:"blur"}]},goodsid:[],invenlist:[],moregoods:[]}},watch:{DialogVisible:function(){if(!this.DialogVisible){for(var e in this.ruleForm)this.ruleForm[e]="";this.ruleForm.detaileList=[]}}},methods:{getlist:function(){var e=this,t="purchase?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.$http.get(t).then(function(t){var a=[].concat(w()(t.data.data));for(var l in a)0==a[l].status?a[l].status=!1:1==a[l].status&&(a[l].status=!0),a[l].updateTime="20"+a[l].updateTime;e.invenlist=a,e.total=t.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},handleedit:function(e){var t=this;this.DialogVisible=!0,this.disval=2;var a="purchase/"+e.id;this.$http.get(a).then(function(e){if(200==e.status)for(var a in e.data)e.data[a]&&(t.ruleForm[a]=e.data[a])})},changestatus:function(e){var t,a=this;e.status=e.status?1:0,t={status:e.status,id:e.id},this.$http.put("purchase/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},openDialog:function(e){if(this.disval=e,this.ruleForm.detaileList&&0==this.ruleForm.detaileList.length){this.ruleForm.detaileList.push({sku:"",goodsId:"",amount:"",goodsid:[],unitPrice:""})}this.DialogVisible=!0},getgoodsType:function(e){var t=this;this.inds=e||0;this.moregoods.length<1&&this.$http.get("purchase/goodsType").then(function(e){for(var a in e.data)e.data[a].value=e.data[a].id,e.data[a].label=e.data[a].name,e.data[a].children=[];t.moregoods=e.data})},handlechange:function(e){var t=this;this.inds;setTimeout(function(){var a=[];e[1]?(t.ruleForm.detaileList[t.inds].goodsId=e[1],a=e):(t.ruleForm.detaileList[t.inds].goodsId=e[0],a=e),t.ruleForm.detaileList[t.inds].goodsid=a},500)},handleItemChange:function(e){this.getgoods(e[0],2)},getgoods:function(e,t,a){var l=this,r="purchase/goods";this.inds=a,1==t?r+="?sku="+e:2==t&&(r+="?typeId="+e),this.$http.get(r).then(function(r){if(1==t){var i=[],s=!1;for(var o in i.push(r.data.id),r.data.label=r.data.name,r.data.value=r.data.id,l.moregoods)s=l.moregoods[o].id!=r.data.id;s&&l.moregoods.push(r.data),l.ruleForm.detaileList[a].goodsId=r.data.id,l.ruleForm.detaileList[a].goodsid=i}else if(2==t){var n=[];for(var u in l.moregoods)if(e==l.moregoods[u].id){for(var c in r.data){var m={};m.value=r.data[c].id,m.label=r.data[c].name,n.push(m)}n=l.unique(n),l.moregoods[u].children=n}}})},unique:function(e){return oa()(new ia.a(e))},addpurdetails:function(){this.ruleForm.detaileList.push({sku:"",goodsId:"",amount:"",goodsid:[],unitPrice:""})},lesspurdetails:function(e){var t=this.ruleForm.detaileList;for(var a in t)e==a&&t.splice(a,1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("success",t.ruleForm),t.savedata()})},savedata:function(){var e=this,t={},a=[],l=this.ruleForm.detaileList;for(var r in this.ruleForm)this.ruleForm[r]&&(t[r]=this.ruleForm[r]);for(var i in l)if(l[i].amount){var s={};s.amount=l[i].amount,s.unitPrice=l[i].unitPrice,s.goodsId=l[i].goodsId,a.push(s)}t.detaileList=a,0==a.length?this.$message("请输入商品详情信息"):t.id?this.$http.put("purchase",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())}):this.$http.post("purchase",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())})},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.getlist()}},qa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inventory mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建采购单")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.invenlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"采购单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fare",align:"center",label:"运费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalAmount",align:"center",label:"总金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"操作员"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.DialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建采购单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"70%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",[a("legend",[e._v("订单信息")]),e._v(" "),a("el-form-item",{attrs:{label:"单号",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入采购单号",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"运费",prop:"fare"}},[a("el-input",{attrs:{placeholder:"请输入运费",maxlength:"256",clearable:"",type:"number"},model:{value:e.ruleForm.fare,callback:function(t){e.$set(e.ruleForm,"fare",t)},expression:"ruleForm.fare"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"采购金额",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入采购金额",maxlength:"256",clearable:"",type:"number"},model:{value:e.ruleForm.totalAmount,callback:function(t){e.$set(e.ruleForm,"totalAmount",t)},expression:"ruleForm.totalAmount"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("商品详情信息")]),e._v(" "),a("el-button",{staticClass:"addbut",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addpurdetails}}),e._v(" "),e._l(e.ruleForm.detaileList,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.detaileList.length>0,expression:"ruleForm.detaileList.length>0"}],key:l,attrs:{label:"商品编号"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入商品编号",clearable:""},on:{blur:function(a){return e.getgoods(t.sku,1,l)}},model:{value:t.sku,callback:function(a){e.$set(t,"sku",a)},expression:"item.sku"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选择商品",rules:e.rules.goodsid}},[a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择商品","show-all-levels":!1,options:e.moregoods,filterable:"",clearable:""},on:{focus:function(t){return e.getgoodsType(l)},"active-item-change":e.handleItemChange,change:e.handlechange},model:{value:t.goodsid,callback:function(a){e.$set(t,"goodsid",a)},expression:"item.goodsid"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"数量",rules:e.rules.amount,prop:"detaileList."+l+".amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",maxlength:"256",clearable:"",type:"number"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单价",rules:e.rules.unitPrice,prop:"detaileList."+l+".unitPrice"}},[a("el-input",{attrs:{placeholder:"请输入单价",maxlength:"256",clearable:"",type:"number"},model:{value:t.unitPrice,callback:function(a){e.$set(t,"unitPrice",a)},expression:"item.unitPrice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:.5}},[e._v("--")]),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-minus"},on:{click:function(t){return e.lesspurdetails(l)}}})],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),e.DialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑采购单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"70%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("fieldset",[a("legend",[e._v("订单信息")]),e._v(" "),a("el-form-item",{attrs:{label:"单号",required:""}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"serialNo"}},[a("el-input",{attrs:{placeholder:"请输入采购单号",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"运费",prop:"fare"}},[a("el-input",{attrs:{placeholder:"请输入运费",maxlength:"256",clearable:"",type:"number"},model:{value:e.ruleForm.fare,callback:function(t){e.$set(e.ruleForm,"fare",t)},expression:"ruleForm.fare"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"采购金额",prop:"totalAmount"}},[a("el-input",{attrs:{placeholder:"请输入采购金额",maxlength:"256",clearable:"",type:"number"},model:{value:e.ruleForm.totalAmount,callback:function(t){e.$set(e.ruleForm,"totalAmount",t)},expression:"ruleForm.totalAmount"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"500",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),e._v(" "),a("fieldset",[a("legend",[e._v("商品详情信息")]),e._v(" "),a("el-button",{staticClass:"addbut",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addpurdetails}}),e._v(" "),e._l(e.ruleForm.detaileList,function(t,l){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.ruleForm.detaileList.length>0,expression:"ruleForm.detaileList.length>0"}],key:l,attrs:{label:"商品编号"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入商品编号",clearable:""},on:{blur:function(a){return e.getgoods(t.sku,1,l)}},model:{value:t.sku,callback:function(a){e.$set(t,"sku",a)},expression:"item.sku"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选择商品",rules:e.rules.goodsid}},[a("el-cascader",{attrs:{placeholder:t.goodsName?t.goodsName:"请选择商品","show-all-levels":!1,options:e.moregoods,filterable:"",clearable:""},on:{focus:function(t){return e.getgoodsType(l)},"active-item-change":e.handleItemChange,change:e.handlechange},model:{value:t.goodsid,callback:function(a){e.$set(t,"goodsid",a)},expression:"item.goodsid"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"数量",rules:e.rules.amount,prop:"detaileList."+l+".amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",maxlength:"256",clearable:"",type:"number"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"item.amount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单价",rules:e.rules.unitPrice,prop:"detaileList."+l+".unitPrice"}},[a("el-input",{attrs:{placeholder:"请输入单价",maxlength:"256",clearable:"",type:"number"},model:{value:t.unitPrice,callback:function(a){e.$set(t,"unitPrice",a)},expression:"item.unitPrice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:.5}},[e._v("--")]),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-minus"},on:{click:function(t){return e.lesspurdetails(l)}}})],1)],1)})],2),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var Ea=a("VU/8")(Ta,qa,!1,function(e){a("v00g")},null,null).exports,La=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?t<0?a(new Error("请输入一个大于0的数字")):U()(t)?a():a(new Error("请输入一个正整数")):a(new Error("请输入一个数字"))},100)},ja={name:"installed",data:function(){return{inds:"",disval:1,total:0,pageNum:1,pageSize:10,loading:!1,DialogVisible:!1,ruleForm:{sku:"",amount:"",hotelId:"",id:"",operatorId:"",remark:"",serialNo:"",status:"",type:"",updateTime:"",userId:""},types:[{id:1,label:"一代机"},{id:2,label:"二代机"},{id:3,label:"三代机"}],rules:{serialNo:[{required:!0,message:"请输入采购单号",trigger:"blur"}],remark:[{required:!0,message:"请输入撤机理由",trigger:"blur"}],type:[{required:!0,message:"请选择机型",trigger:"change"}],operatorId:[{required:!0,message:"请选择负责人",trigger:"change"}],hotelId:[{required:!0,message:"请选择酒店",trigger:"change"}],amount:[{required:!0,validator:La,trigger:"blur"}]},options:[],goodsid:[],invenlist:[],moregoods:[],operatorlist:[]}},watch:{DialogVisible:function(){if(!this.DialogVisible)for(var e in this.ruleForm)this.ruleForm[e]=""}},filters:{fitertype:function(e){return 1==e?"一代机":2==e?"二代机":3==e?"三代机":void 0}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("deviceOut/area").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("deviceOut/hotel?areaId="+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.ruleForm.hotelId=e[1]},getoperator:function(){var e=this;this.operatorlist.length<1&&this.$http.get("deviceOut/operatorList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.id=t.data[l].id,r.label=t.data[l].name,a.push(r)}e.operatorlist=a})},getlist:function(){var e=this,t="deviceOut?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.$http.get(t).then(function(t){var a=t.data.data;for(var l in a)0==a[l].status?a[l].status=!1:1==a[l].status&&(a[l].status=!0);e.invenlist=a,e.total=t.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},handleedit:function(e){var t=this;this.DialogVisible=!0,this.disval=2;var a="deviceOut/"+e.id;this.$http.get(a).then(function(a){if(200==a.status)for(var l in t.ruleForm.id=e.id,a.data)a.data[l]&&(t.ruleForm[l]=a.data[l])})},changestatus:function(e){var t,a=this;e.status=e.status?1:0,t={status:e.status,id:e.id},this.$http.put("deviceOut/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},openDialog:function(e){this.disval=e,this.DialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("success",t.ruleForm),t.savedata()})},savedata:function(){var e=this,t={};for(var a in this.ruleForm.userId=this.$store.state.userInfo.id,this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);t.id?this.$http.put("deviceOut",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())}):this.$http.post("deviceOut",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())})},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.getlist()}},Oa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"installed mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建撤机单")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.invenlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",align:"center",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"机型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.DialogVisible&&1==e.disval?a("el-dialog",{attrs:{title:"创建撤机单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店名称",prop:"hotelId"}},[e.DialogVisible?a("el-cascader",{attrs:{placeholder:e.ruleForm.hotelName?e.ruleForm.hotelName:"请选择酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"机型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择机型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"operatorId"}},[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:""},on:{focus:e.getoperator},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",clearable:""},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"撤机理由",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入撤机理由",maxlength:"100",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e(),e._v(" "),e.DialogVisible&&2==e.disval?a("el-dialog",{attrs:{title:"编辑撤机单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店名称",prop:"hotelId"}},[e.DialogVisible?a("el-cascader",{attrs:{placeholder:e.ruleForm.hotelName?e.ruleForm.hotelName:"请选择酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"机型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择机型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"operatorId"}},[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:""},on:{focus:e.getoperator},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",clearable:""},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"撤机理由",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入撤机理由",maxlength:"100",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var Ha=a("VU/8")(ja,Oa,!1,function(e){a("Fo3S")},null,null).exports,Aa=function(e,t,a){(t*=1)||a(new Error("请输入一个数字")),setTimeout(function(){W()(t)?t<0?a(new Error("请输入一个大于0的数字")):U()(t)?a():a(new Error("请输入一个正整数")):a(new Error("请输入一个数字"))},100)},Ra={name:"installed",data:function(){return{inds:"",disval:1,total:0,pageNum:1,pageSize:10,loading:!1,DialogVisible:!1,ruleForm:{sku:"",amount:"",hotelId:"",id:"",operatorId:"",remark:"",serialNo:"",status:"",type:"",updateTime:"",userId:""},types:[{id:1,label:"一代机"},{id:2,label:"二代机"},{id:3,label:"三代机"}],rules:{serialNo:[{required:!0,message:"请输入采购单号",trigger:"blur"}],type:[{required:!0,message:"请选择机型",trigger:"change"}],operatorId:[{required:!0,message:"请选择负责人",trigger:"change"}],hotelId:[{required:!0,message:"请选择酒店",trigger:"change"}],amount:[{required:!0,validator:Aa,trigger:"blur"}]},options:[],goodsid:[],invenlist:[],moregoods:[],operatorlist:[]}},watch:{DialogVisible:function(){if(!this.DialogVisible)for(var e in this.ruleForm)this.ruleForm[e]=""}},filters:{fitertype:function(e){return 1==e?"一代机":2==e?"二代机":3==e?"三代机":void 0}},methods:{getarea:function(){var e=this;this.options.length<1&&this.$http.get("deviceIn/area").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.label=t.data[l].name,r.children=[],a.push(r)}e.options=a})},handleItemChange:function(e){this.gethotel(e[0])},gethotel:function(e){var t=this;this.$http.get("deviceIn/hotel?areaId="+e).then(function(a){var l=[];for(var r in t.options)if(e==t.options[r].value){for(var i in a.data){var s={};s.value=a.data[i].id,s.label=a.data[i].name,l.push(s)}t.options[r].children=l}})},handlechange:function(e){this.ruleForm.hotelId=e[1]},getoperator:function(){var e=this;this.operatorlist.length<1&&this.$http.get("deviceIn/operatorList").then(function(t){var a=[];for(var l in t.data){var r={};r.value=t.data[l].id,r.id=t.data[l].id,r.label=t.data[l].name,a.push(r)}e.operatorlist=a})},getlist:function(){var e=this,t="deviceIn?pageNum="+this.pageNum+"&pageSize="+this.pageSize;this.$http.get(t).then(function(t){var a=t.data.data;for(var l in a)0==a[l].status?a[l].status=!1:1==a[l].status&&(a[l].status=!0);e.invenlist=a,e.total=t.data.total})},handleCurrentChange:function(e){this.pageNum=e,this.getlist()},handleSizeChange:function(e){this.pageSize=e,this.getlist()},handleedit:function(e){var t=this;this.DialogVisible=!0,this.disval=2;var a="deviceIn/"+e.id;this.$http.get(a).then(function(a){if(200==a.status)for(var l in t.ruleForm.id=e.id,a.data)a.data[l]&&(t.ruleForm[l]=a.data[l])})},changestatus:function(e){var t,a=this;e.status=e.status?1:0,t={status:e.status,id:e.id},this.$http.put("deviceIn/status",t).then(function(e){200==e.status&&(a.$message.success("修改成功"),a.getlist())})},openDialog:function(e){this.disval=e,this.DialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("success",t.ruleForm),t.savedata()})},savedata:function(){var e=this,t={};for(var a in this.ruleForm.userId=this.$store.state.userInfo.id,this.ruleForm)this.ruleForm[a]&&(t[a]=this.ruleForm[a]);t.id?this.$http.put("deviceIn",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())}):this.$http.post("deviceIn",t).then(function(t){200==t.status&&(e.$message.success("保存成功"),e.DialogVisible=!1,e.getlist())})},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){this.getlist()}},Pa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"installed mainboss"},[a("div",{staticClass:"martop"},[a("div",{staticClass:"topleft"}),e._v(" "),a("div",{staticClass:"topright"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openDialog(1)}}},[e._v("创建装机单")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.invenlist,height:this.$store.state.tableHeight,resizable:"",border:"","element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"数据正在加载中"}},[a("el-table-column",{attrs:{prop:"serialNo",align:"center",label:"单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hotelName",align:"center",label:"酒店名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",align:"center",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",align:"center",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"机型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("fitertype")(t.row.type)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(a){return e.changestatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.handleedit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("span",{staticClass:"pagein"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,30,50,100],"page-size":10,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:1==e.disval?"创建装机单":"编辑装机单",visible:e.DialogVisible,"modal-append-to-body":!1,top:"3%",width:"50%",center:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[e.DialogVisible?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"单号"}},[a("el-input",{attrs:{placeholder:"请输入单号",clearable:""},model:{value:e.ruleForm.serialNo,callback:function(t){e.$set(e.ruleForm,"serialNo",t)},expression:"ruleForm.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"酒店名称",prop:"hotelId"}},[e.DialogVisible?a("el-cascader",{attrs:{placeholder:e.ruleForm.hotelName?e.ruleForm.hotelName:"请选择酒店","show-all-levels":!1,options:e.options,filterable:"",clearable:""},on:{"active-item-change":e.handleItemChange,change:e.handlechange,focus:e.getarea}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"机型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择机型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"operatorId"}},[a("el-select",{attrs:{placeholder:"请选择负责人",clearable:""},on:{focus:e.getoperator},model:{value:e.ruleForm.operatorId,callback:function(t){e.$set(e.ruleForm,"operatorId",t)},expression:"ruleForm.operatorId"}},e._l(e.operatorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount"}},[a("el-input",{attrs:{placeholder:"请输入数量",clearable:""},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注",maxlength:"100",clearable:""},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("表单重置")])],1)],1):e._e()],1)],1)},staticRenderFns:[]};var Ba=a("VU/8")(Ra,Pa,!1,function(e){a("YT4f")},null,null).exports,Ua={name:"shenzhen",data:function(){return{equipNO:"",isqrcode:!1,centerDialogVisible:!1}},watch:{equipNO:function(){0==this.equipNO.length&&(this.isqrcode=!1,this.centerDialogVisible=!1)}},methods:{handequip:function(){console.log("equipNO:",this.equipNO);var e=this;this.equipNO?(this.isqrcode=!0,this.centerDialogVisible=!0,setTimeout(function(){var t=document.getElementById("qrcode");new ve.a(t);document.getElementById("qrcode").innerHTML="",e.qrcode()},50)):this.$message("请输入设备编号")},qrcode:function(){var e;e=this.$GLOBAL.qrAPI+"index3.html?no="+this.equipNO+"&type=test";new ve.a("qrcode",{width:114,height:114,text:e})},downloadImg:function(){var e=this;_e()(document.querySelector("#imageWrapper")).then(function(t){var a=t.toDataURL("image/png"),l=document.createElement("a"),r=new MouseEvent("click");l.download=e.equipNO,l.href=a,l.dispatchEvent(r)})},printqr:function(){var e=document.getElementById("imageWrapper").innerHTML,t=document.body.innerHTML;return document.body.innerHTML=e,document.title="",window.print(),window.location.reload(),document.body.innerHTML=t,!1},remove_ie_header_and_footer:function(){var e;e="HKEY_CURRENT_USER\\Software\\Microsoft\\Internet Explorer\\PageSetup\\";try{var t=new ActiveXObject("WScript.Shell");t.RegWrite(e+"header",""),t.RegWrite(e+"footer","")}catch(e){}}},components:{}},Ma={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shenzhen mainboss"},[a("div",{staticClass:"equipNOinput"},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:" 设备编号："}},[a("el-input",{attrs:{placeholder:"请输入设备编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handequip(t)}},model:{value:e.equipNO,callback:function(t){e.equipNO=t},expression:"equipNO"}})],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handequip}},[e._v("生成二维码")]),e._v(" "),e.centerDialogVisible?a("el-dialog",{attrs:{title:"设备二维码",visible:e.centerDialogVisible,"modal-append-to-body":!1,top:"3%",width:"20%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isqrcode,expression:"isqrcode"}],staticClass:"qrbox"},[a("div",{ref:"imageWrapper",staticClass:"qrimg imageWrapper",attrs:{id:"imageWrapper"}},[a("div",{ref:"qrcode",attrs:{id:"qrcode"},on:{contextmenu:function(t){return t.preventDefault(),e.printqr()}}}),e._v(" "),e._t("default",[e._v(e._s(e.equipNO))])],2),e._v(" "),a("el-button",{staticClass:"doloadbut",attrs:{type:"primary"},on:{click:e.downloadImg}},[e._v("下载二维码")]),e._v(" "),a("el-button",{staticClass:"doloadbut",attrs:{type:"primary"},on:{click:e.printqr}},[e._v("打印二维码")])],1)]):e._e()],1)])},staticRenderFns:[]};var Wa=a("VU/8")(Ua,Ma,!1,function(e){a("kAvg")},null,null).exports;l.default.use(u.a);var Ya=new u.a({routes:[{path:"/",name:"Login",component:h},{path:"/Home",name:"Home",component:b,children:[{path:"/",component:v.default},{path:"/role/list",component:F},{path:"/permission/list",component:N},{path:"/user/list",component:T},{path:"/hotel/area/list",component:A},{path:"/goods/list",component:G},{path:"/goods/store/list",component:oe},{path:"/goods/category",component:ue},{path:"/goods/storelog/list",component:de},{path:"/goods/supplier/list",component:fe},{path:"/goods/equip/list",component:we},{path:"/goods/equip/FirstEquipList",component:Ne},{path:"/hotel/room/list",component:Ve},{path:"/hotel/list",component:Ee},{path:"/order/stock/list",component:je},{path:"/apply/replenish/list",component:Ae},{path:"/order/door",component:tt},{path:"/order/goods/queryOrderSummary",component:Be},{path:"/order/supply/list",component:Me},{path:"/order/stock/goods",component:Ye},{path:"/order/goods/list",component:Ke},{path:"/order/goods/record",component:Qe},{path:"/activity/getActivityList",component:lt},{path:"/apply/list",component:st},{path:"/apply/part",component:ut},{path:"/apply/log",component:dt},{path:"/apply/warning",component:gt},{path:"/operation/list",component:vt},{path:"/operation/part",component:Ft},{path:"/operation/log",component:xt},{path:"/operation/role",component:Ct},{path:"/operation/permission",component:Vt},{path:"/statistical/score",component:qt},{path:"/statistical/region",component:jt},{path:"/operation/superLog",component:At},{path:"/operation/supplement",component:Pt},{path:"/activityMoney/log",component:Mt},{path:"/activityMoney/free",component:Zt},{path:"/statistical/money",component:Gt},{path:"/statistical/performance",component:ea},{path:"/inventory/depot",component:la},{path:"/inventory/goodsCheck",component:fa},{path:"/inventory/damage",component:pa},{path:"/inventory/storeIn",component:ma},{path:"/inventory/storeOut",component:_a},{path:"/inventory/stock",component:ka},{path:"/inventory/access",component:xa},{path:"/inventory/lack",component:Ca},{path:"/inventory/sales",component:Va},{path:"/purchase/installed",component:Ba},{path:"/purchase/weaning",component:Ha},{path:"/purchase/inventory",component:Ea},{path:"/factory/Shenzhen",component:Wa}]}]}),Za=a("NYxO");l.default.use(Za.a);var Xa={setToken:function(e,t){e.token=t},setUserInfo:function(e,t){e.userInfo=t,sessionStorage.setItem("userInfo",E()(t))},setshopInfo:function(e,t){e.shopInfo=t,sessionStorage.setItem("shopInfo",E()(t))},setClientHeight:function(e,t){e.clientHeight=t,sessionStorage.setItem("clientHeight",t)},setMainHeight:function(e,t){e.mainHeight=t,sessionStorage.setItem("mainHeight",t)},setTableHeight:function(e,t){e.tableHeight=t,sessionStorage.setItem("tableHeight",t)},setTableHeight2:function(e,t){e.tableHeight2=t,sessionStorage.setItem("tableHeight2",t)},setTableHeight3:function(e,t){e.tableHeight3=t,sessionStorage.setItem("tableHeight3",t)}},Ka=new Za.a.Store({state:{token:"",userInfo:{},shopInfo:{},clientHeight:"",tableHeight2:"",tableHeight3:"",mainHeight:"",tableHeight:""},mutations:Xa}),Ga=a("mw3O"),Qa=a.n(Ga),Ja=a("zL8q"),el=a.n(Ja),tl=(a("tvR6"),a("991W"),a("//Fk")),al=a.n(tl);a("hKoQ").polyfill();var ll=1,rl=m.a.create({baseURL:"http://dev.byn-kj.com/admin/"});rl.interceptors.request.use(function(e){return e.url.indexOf("login")>-1?(e.data=Qa.a.stringify(e.data),e.headers={"Content-Type":"application/x-www-form-urlencoded"}):"post"===e.method||"put"===e.method?e.headers={"Content-Type":"application/json"}:e.headers={"Content-Type":"application/json;charset=UTF-8"},localStorage.getItem("TOKEN")&&(e.headers.Authorization=localStorage.getItem("TOKEN")),e},function(e){return alert("错误的传参","fail"),al.a.reject(e)}),rl.interceptors.response.use(function(e){if(200==e.status)return e},function(e){if(1==ll&&(ll=2,setTimeout(function(){ll=1},500)),401===e.response.status?(Object(Ja.Message)({duration:5e3,showClose:!0,message:"请重新登录",type:"error"}),Ya.push({name:"Login"})):403===e.response.status?(Object(Ja.Message)({duration:5e3,showClose:!0,message:e.response.data,type:"error"}),Ya.push({name:"Login"})):404===e.response.status?Ya.push({name:"Login"}):400===e.response.status?Object(Ja.Message)({duration:5e3,showClose:!0,message:e.response.data,type:"error"}):500===e.response.status&&Object(Ja.Message)({duration:5e3,showClose:!0,message:"系统异常，稍后重试",type:"error"}),502!==e.response.status&&503!==e.response.status&&504!==e.response.status)return e;Object(Ja.Message)({duration:5e3,showClose:!0,message:"系统正在维护中",type:"error"}),Ya.push({name:"Login"})});var il={install:function(e){Object.defineProperty(e.prototype,"$http",{value:rl})}},sl=a("pFYg"),ol=a.n(sl),nl={compare:function(e,t){return function(a,l){var r=a[e],i=l[e];return 1==t?r-i:2==t?i-r:void 0}},changDage:function(e){return e?"object"==(void 0===e?"undefined":ol()(e))?e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds():void 0:(-1!=e.indexOf("-")||-1!=e.indexOf("/")||e.indexOf(":"),e)}},ul={API:"http://dev.byn-kj.com",qrAPI:"http://dev.byn-kj.com/mobile/"},cl=a("G0J2"),ml=a.n(cl);a("3f40"),a("4qOc"),a("+cgv");l.default.use(el.a),l.default.use(il),l.default.prototype.Until=nl,l.default.prototype.$GLOBAL=ul,l.default.use(ml.a),l.default.config.productionTip=!1,l.default.prototype.$store=Ka,l.default.prototype.$axios=m.a,new l.default({el:"#app",router:Ya,components:{App:n},template:"<App/>"})},OJ6j:function(e,t){},PjBU:function(e,t){},QBu0:function(e,t){},RRc7:function(e,t){},Rxqz:function(e,t){},YDde:function(e,t){},YT4f:function(e,t){},YxEw:function(e,t){},ZZqw:function(e,t){},bHAc:function(e,t){},dhi4:function(e,t){},dxLs:function(e,t){},gaw3:function(e,t){},hVMu:function(e,t){},hpgx:function(e,t,a){"use strict";var l=a("2YW8"),r=a.n(l),i=a("BjQB");var s=function(e){a("RRc7")},o=a("VU/8")(r.a,i.a,!1,s,null,null);t.default=o.exports},iQH9:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAAAjCAYAAAD/nmRNAAAXU0lEQVR4nO2debxbVbXHvyf3FkuZWqxYLg00N4gMMiiIpUxlEkQoIH1QUKEoMpRSmZRQXKWwKA0FBQeGh4pYHsjYB06FKlAtoEXBIvOQGyQQGfqkQqHQ3pvz/lj73Jx77klyklz88N7H3+eTz0n2nOT89l57rbXX8fiA4pfdczd/F84f7bPXR/E+sgF0ArwD/qv4K1/2ePw1/Mun98y8ZSj7TWd1NHAUsD/wSWBjwLOueRa4H7ilVJAlQ9nvUEBEdgc+DPxOVd+IyT8a+CywSFVvjMk/E9gWuFlVF7YxjmuAjYCbVPWmGmWyrq8XVfWRVvuqM4YlwHpATlXvcmmbA+sCT6rq6qHuMwk6220gndVOYArwOWAT4C3spvxxqSDLm23v7szcTSpwxza+t1Pc4EaAl8FbL+OzC3i7bJOZe/VfPP+UM3pm/qzN77FeGu/qMv4RffG/ywhgB/eans7qI8DppYL8vtm+ypl8CjgMmARsipF5KfDjrmLu5Za/BOwOzAHOBL4Tk78zcCywAhhEOOAYYDvgl22MAYzUmwHL6pQ5GLgM+Ckwtc3+4rAtsAEwJpR2InAWMAP4fq2KIrIuMHkIx7I6mODaIlw6q1sCtwNbR7IOAr6VzurxpYLcnLS9G7ovmrqZ7/1w/SbG9XG8UR/zvRs37L7oS1N7Zn4+ab0wTuqeM2kplZtL+MObqPYp4HfprM4DZpYK0pekUjmT3wy4DdgpknUgcE45k/96VzF3TRPjCOM64ELgy8QTriZEZC0g6z4+2GL/HyT8EyNcGDdghDuROoQDRgM/GeKx3AgmKrWEdFbHAI9gIlc9TCsV5KpG7RUy+clrwS0dbYzpAc9//Cn87Wf1zKwkrTOte84pv/Uq31/VRr/ATcCxpYLUFVPKmfzmwGJMEqiHY7uKufmtDERElmIrWbdLuiyUva1L7wEeC6WfDmwD/KJB88ep6nWun/WAjhrl/gqkgYuBfI0yJwMXAT8DpkUzVXVF8F5E/AbjAsio6guhOi9gq2z/mF366xih0qr6UlxDIjIOKAbtJui7FiYDlwD/VNWR0N4KN4fGZAO4Mp1V6pGunMl/EZhPezc9u/reJzyPxy7ovmjbJKQ7tXvOjIVe5bvvtdOpYQqwTjqrk2uRrgmyAXy3nMnf2VXM/bOFsSzBCLcv8FuXNhrYFXgFuDOmjgec497PA56q0fb9kX62bzCWs92rHo5yr7gxBTiuTv0fYcRfE0kPfruRkfTFwH7AeEzSqIswiZuFyOAtVUuES2d1OHaTJcWV6ayuWyrIJdGMENlSrYwligm+tzUJSHdm95wz7/Qqlw4B2QIcDNwWR7pyJr8tsJBkZAO7SQ7F9jfN4jfYzPoJVf0hcKiITATuA5aq6qHRCiJyNjDBjTGnqklWlEuAj9TIm42Jc7+iSvo9se/0BnBB0i/j8ACwDlBU1f5JSERGURX9XovUiZ2sVPU/mux7SNHqCpfBlAjNYF46qx2lgvSLGENFNh94Bp8XPZ+1gazvbY3n1SRdmGwdQKLNVzIMIp0j273YKtMMovvihhCR4ZjyZYukWjgRORgT+34FHJmQbKjqDXXanO3e/lZVL3dpYIR7M0hrAvNc3eOBH4fSx7rrq8AmIlKMVgQuE5HLYtID/E1VxzUagIjcDHw82XA5UlWfictolXCJ/pQYzHXiZb6cyR+DzU4tk+11fG70Kiz0KgzQgXuwDd7W3b53Zzqrk0qF6h4g1z1nxjuQn+t3srXvMcqlv4LPI57PnV6FZS1/PcBItyCd1SOWVoZlaY1srWIfTMN4FQP3RcPq1Bnlyu4FPOGIEYdrVbXZlakVkTgOwc0bveHT7lrGNK/nh/KOArYA7mGgKBzFijp5YZSBDzUoc4i71izXKuGKwNvYMt8s5n65e854/P7BNY0KcKNX4Rqvj1oi4RP4POH5BwHXpLN6UqkgfeVMfv83fC4eFfO9x+BxoO9xoJ/iQc9njtfH8taJ9/l14L5VkF3b7GKt4LHGRQZhEfA6cJSInKGq77r04H/aMrT6BLhaVV8RkQ0w80QUBwAfxexXDeG0neu7j28lHbiIHAPsDZRVdWYkOyDcFpH0rdz1JadkmR1qL+vKP6yqs2kTqnp6vXwR2Zgq4V6oVa4lwpUK8l46qzcCX2ul/mKvcshVwMl+LSVXbbwHnOv1scRLrIg8HhjRk8nfCtwyqv5sD8AE3+O//E5OT/XyVIukext2PtPr5Tt+J83YGhz+h8Yaw0FQ1TUichNwKrbS3hopsilVm9cYbCa+A3hFVQdpE0VkK+BLQC+mnEiCsVQVHs8mqSAimwJXYKQ+LabIE+766Uj6tu4aNzn93V3HRDNEZFvgcOA9VZ2bZIyu3u+x3/AEVV0UyQ5MKiVVfbNWGwPEuXIm/5lyJv+9ciZ/bzmT/0M5k59fzuQPd4baKL4FlJIONorrvApXeM3tnt4GTk31NkO2AEfP8fpuryQgW4BRwFWVTnb0W1ecPuz5nOH18m7jolHMaFFDCbbKAYRtksHqtEhVx7k9yx/rNSIiI4DrsW3ueaqaiDxUzRE+CQgnIh2YcmhdjDhXxBR7BPv7u0QkrHjazl3jDOyvuutGMXlnA+dRXSGT4gnM1HBwTN72oTI1kQIoZ/LDy5n8tdifcComz4/HDKi3AQ85g20/SgV5DftT/06LmN8E6Sqw8vRU7+uPtrjiLPIqqdleH81QdW3gO37nmtF4dX/EenjY8zk91cvK5FVyXcVcnBdIUizBpO4DRCSYLQJJJpFS1omFNwE7AjcDiVcBzCQB8GxIpK3VjwdcCUzECHWUqvZGy7m0P7iPE13dkVRv8gdimi+76wDTlYiMpupFcmW98cXgV+56iIhEF6H93LXefpFUOZP3MONjPVvHjsDiciY/YPNfKshjwB5Ay+5ICUn3Zgr2fRR/Qjt93e1VaJJ0a4bD5OX4O2Nq9ZbwCD4zkpFuWlcxd3Gr/QA4tfmGwJah5GBlfzthM9/DaVyBY5JqLh12ddeoyDUAIvIhTGl2AmZDO1xV601sgXkhWLn3whaMJ1S1HFO+4K7jIulnYaL0UlWtu8rH4G5s5UzjiA/90sDe7mPdrUAKY/sg20wMxhHjNVAqyPOu87ZId4nXV2vtehP4bFcxt3Qo+mqCdGuAyV3F3M9LBXkHc1drmXRPNCbdtK5irqFHTkLshe3VgpUtUNzE+raKyFgRGRe8qIqFSzExLsiLGpGj7axL9Ua8u065nV3bgV/n/qpas7xD4AR9oDN/BGJdnCEfqoTbQETWd/1uBEx36bMa9DcIqroGuNZ9nBHKmoI5Sj+uqn+t10YKc7FJii+WM/lB2qqhIMJtXoV5g0m3HJjYVcwtjfQ1geoP2jQSkK6fbKF+38EctJtWZgSoQ7qhJBuAAPPcDQLVfcwrNcrfj2meg1cgHl0SSY9TaIRxCGaffYPqihRFGiPb9pjJZHtVbTiRqerfMHF5A2xVDBwvYp0DVPV/qKr8x7nrFZjG9hcxSo+k+C4mKRwiIjs48p/r8hraF1PYXi0phlPVDA1AiHRxxsdEWDCQdMuBvbuKub/E9PWi66st0p3n9Q3yByKGbKF+38MkgrZINz3VG9gNK8DJQ0w2ME3a66HPwf471hiL3bx7hV7BnujiSPp1Dfo9wV1/oqrviYjnbspzMG0x2D33KCZC7qOqLyb7SkB1z3UptsVe2ECZE2gvs87sMBmbDJpZZAZAVV/Ffhcwe+cFmETwFAk8gzqxgTeD9WtllAryfDqre4yEx1YM9mFLhAVehV5495t+xz6bFXM1bVGlgryUzupEzDcuW6tcPSzyKqwC5vodwSanJtlC/a5OZ3XyaLzFy/F3aaXfp/A5JdXLrErH9L2L51zdShu14Oxpo7FVJEBgv4rdI0X3MiEfwKdVdXHCfidi+/l3qc70N1D1k1zlriVV3SFJmzG4FVtNPoFpQWta6R3+hB1Zmu6uFWxPmlgSE5HOGEXOPIy8491rjWt3kMInihTNq/brrmBLK8OmX1/pHDm2DT/kn3uV4bul1nwjndW6hrpSQV6izZVuiVfhHFvpGpItwNLKsP3vqHTusLvfukdaAZ9jU73T0lmt5Y/YKnZ012cBRGRtTP39cjuOuPXgVPvBrP9dVQ3uqV9i+7QtgMCY3bRNJ4Cq9gGPu48rqGNgdgj2hXtjiqPpqprkrF/4vhvk3KGq72GKpQC3q+qfE7RLiubEo2e7irmaS3g5k88DZ2+Ex1WVDtohHWZwnZ+EdNdXOq/JttHXEq/C4anev3wmteauRmXLmfwk4PZhsPY8v4P92yAdNlPfO8SkCwj3tLvugd1AjZQS7eBUzBxQIOSYrKo3qup8VX1uKDoRkSMx8bcXM5X+JGT6iJb1sDOLAb6uqklF9/Xc9d2ws3TQroicBlwNrAb+AUwRkbkxpoLAZNbvYJLCNI9JzUTfikssZ/JeOZO/lNBRjIB0mfZIdzQNSFfO5E/eAu/iKyqdtEO6V031f1s6q2vV6WsSpiofBvbjzR4a0t2XzurYhiWTIVB4BDPuYe7a1on4WhCRT2N2utXAFFWNcw9L2tZYEXlBRC6NyfsUpiFcjk0qD2Cayotiym6CnXyYS9U3fVS0XB0E/8WfIu1u5tq9DJP0dnNj+TOQA+52XjMBHsZE33VE5MMAqa5irgQcCQ0dIi7qKuairkI4O96V2LH+ATDStUcE6pCunMmf5vpmFNAu6ah6+w8iXZRsAYaIdNsAi9slnTsUuid2kz3o1PRHYxv6eyPFGzniJulvU+DnmDLtuIRiVT2JZR1MwTPgpLZzxbob8/Xc26neP4+dTM85pQwisraIzMLE6T0wZ+adsd9juohsGGl3logsE5GoU3QwSc135UY4H9QnMZIJsJ2q/smJ6btghBuPOYB/w+39llOVIA8D52nSVcz92hWO/im4wR/RVcydG80Ike2kmHrAkBHhaMwDv58I5Uw+x8DTzO8b6cqZ/NHEkC1AQLoD2iNdlvZJNwlYCzPqrsSUBesBF6pq/95JRHbFZuYKMODUs4h0YlpOqOOZ4gLyLMZMDtPighJF8Ly7jhWRL4nIyMjrw9g2AkIaVhHZCbN/vgPsqaqPQb+Bfx9MkXKRiHwHUOAM4AdAVlVnuwBFiimSbg3Z5Dowhc72hOyTIrIbtu98mKpWdmdMs/ltYJyqXhj2olHVXlW9GDu2diW2Xw3+x7Pc2FVExvbLll3F3KPAPuVMvgtT/XcCL3QVc7GarSRkCxAQ4ZRUL4XWPfAn4c6aLa0MO4Ma7kajgGsqncxI9fJE630FpDtiaWXY4SQ4sxeQbgSmaW0RAekmOoVQszjRXRe463jsQOrPAERkLvB1qprpy90sjIjksFl6GGZLexuIDZDkFDH3Y2Q+QlVvTzC2RZjr4HjMR7MWVlE1coM5HDwHfEFVB7gRquq7bl/3CPANjICz3WQTxgVAF2a2KIrIYmBzzBtnkbPZISJbYiJjETg0pHV8GAvJUPeMofstzxaRC7B9Jqr6nIh8AftP7m9pKXDOzP9J1baSCG9AWx74AN14T82vdG7VyAt5JbRLOo7wU0+e6XdsSRNn9nxgntfXDunAYo7s72ybieBWiOBw5qmqWhKRy4G8qr7iyuyJhf6rAMtU9feh+lMwhcQa4G/AT4PVJKavkRjhjqpVpka9tTCvpp2wlTiKf2Ah+p4J1dkReKzRzS4iE1S1bvAjETkIm5S2wsTMxcDMEOEmAqcAJ6rqPxJ+rUQQke2Aa1sl3FxsNmwaK4GTU73vPYvf8h5idz8Vtp3V7atV0h3gpzjP72jpdKwP5L2+3ju8SjsxY54BPlMqSMuHOEVkrfcj/qITxzqdevz/DUSkw5ke3q/2U00TrpzJb43ZQlrdKBUWepWDZ3t911H1LG8aO+BxSaWzthXeoRXSTfFTfL1Fsjms6oODJ6TWHE4bXg3AJaWCfLON+v/GBwyt3FNTaZ1sjwO7frVn5lNYsNCHWmyHZfhMTfXyZ68+kdYFrqh0vrUpPNpo0KOAC/0OTm+TbMBB6WLunlJBplE1CLeCY9NZHZLgSv/GBwOt/JmxvpQJ8DjmG/kqgBOVPkuNjXkSvIzPKV4vp3u9POT5g1wYVgELvcqqh7zKkfv7HfuK31E6wk/Rjdf/xdcGPonHGX4H/10Zxn7taRrfBA7qKub6tb2lguRonXQbEX+A8t/4P4pWRMq7sLj7zSAg2+vRjHRWR2AuQHs1O5Yo1ge29j3Wx2O55/M3fH8/P3X8JT3nXgtwQfdFo3fzvWe3xBsFpkZqO9Z7Ff3HiOIy01nN0zhGYxw2LhWklpd/XThj8STM3eoNZ6T+HPBtVX3blRmBqeM3xbR9d4b3MU57eZeqLhORMZhWOh+oxV3+Har6NBE4b49DsdAIPdizBlaG8qcAw1T1evd5NnBdJKDrLliMTR9TqDwXyjsNezbBAhHJYOr8+ara4/JPwpRDf3SfJxI6xwYsDnxF3VjCZwifVvdcBBEZj7mHzVPVXhGZCrwQ9jN1NskvYKEDf1PLB7WV6fzxxkUGlY8lG/Qfe2nrrFmAN4E/ej6LvApPR8gGMKtn5vL7PX+Lp/HfgH8d2aB/pWvm5DSYfSgab7EZPA18EbNTDcO82TcMkc3D1PWHYWEKvolpn8PIYc9TAIsPch4MCNOSY+CNGsY8zJNpGXajP+A0lQGmAD8VkQnu83mEDow6EtyN/QZ9wMPO/hdgBXCjS/sBZvQP+/qexMDTMBMxp+Nl7hWeyKZgxvIgL9zOeCzwcTBhTmXgAdRu7GTCxpiD+AIRiQtu2xLh5pM8TN5DwO61yBZgKEkHMAL8SRGyBZjVM3P5857f/Qx+0w8aqYGGZAtQKshMqhGOk2B+qSDtOPu+A3wFC/Z0HfZ/h/vfFjuhfaKq3ubyvuI8VtqCI/OJWDyUW6iq46OSzMvAte5cWRQnYO5cCzD72CSqpw5QC2F+D3AXRravJDidvpIqqaJHg1ZjJF5BNSZKgNeBbzhbXRRHu7ZmY94oB2Ph3gehacJ1FXN/JdmDIh7CbsREcf8C0o3BG3T+rRmsV4dsAU7ombniOc//2NP47aweYCtQIrIFcIFwk5DueezBHG1BVZdgBy+nAMeq6qpQdrA/DEIUvIxtM8KRrlol/NqYYbzsxvE2FqeyK1LudsybKe6ozcaYA/AnscOvC4Bo5OSFmMPAMwwmUBw2x44PXc5gfcTm2Oo1leqqHqCMrcDXMpg3Y1z+R9w4f4itiIPQqobgbMzNpdZscgewX7ORp0oFeecV/PE74LX09JaxeKsP8VMH1SNbgBN6Zq54x2OzZfitakqfBHZrhmwBHOm+Rm3/1UeA/UoFGfSMtxZxH/CWqkbH+ig2q090n/fAQvT1hMq8TDVE+zjMMB4mbSzc6voo5v0RhNwbTXy0sOOxlTiKwEH5PuCrGGHDLmofw0TWWW6M58e0EcXjqnqoe0V/j/tVdap73RFT93vYd58QSX8QEztXq+pUzJk5dqJqiXBdxVxfVzF3FjZDXIrtA+7B5P+JXcXcYV3FXM3YfPVQKsjqXxS+tetuvnfCGLxEpxiGgz/RTy2Z7Kc2nttz7q+T9nVQzznvHlg85zMv4R/xz9rhB6JYibkK7dRVzNU6Qd0QpYL8CDspLMCvMa+H67EZ/NOlgrzQattJoaqvY7P5D8RiLs7AwnSHjb/nA6eJPeDwGsx1Kmrwvsw5AUcdgY8DDnJ1FwAzVHXQg0JU9TWqbmlhnIP5IT6JiWgvUnVTG+be/wmTBE4CZorIfjHtJMWk0PcYFB7diatTGXy65iZsq/WwiPwBc3Ae9BwNaPNpNe830ln1dvW9Y1Z5THsNtn4Nf53V4KWAkbBmLN5rY3xv0UiY9e2ec1vxPeyH8w3dF9M0TcAOTQ7HZqqXsVVnIXBTGzEjP7AQkeH1wto5p9+3mozglajtJPXBfCdbbeNfAef4PTzGl7Mf/wuhrA379A0FcgAAAABJRU5ErkJggg=="},jW5J:function(e,t){},kAvg:function(e,t){},kGhB:function(e,t){},kKnC:function(e,t){},lV6F:function(e,t){},n0XY:function(e,t){},oZTE:function(e,t){},pG5Q:function(e,t){},"q9Y/":function(e,t){},rWkr:function(e,t){},sV1e:function(e,t){},tvR6:function(e,t){},uVuR:function(e,t){},uYJz:function(e,t){},v00g:function(e,t){},vF8b:function(e,t,a){e.exports=a.p+"static/img/login_bj.6a502e3.jpg"}},["NHnr"]);
//# sourceMappingURL=app.9bd647c089964ffb2984.js.map